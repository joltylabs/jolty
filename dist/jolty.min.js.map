{"version":3,"file":"jolty.min.js","sources":["../src/helpers/utils/kebabToCamel.js","../src/helpers/utils/upperFirst.js","../src/helpers/is/isFunction.js","../src/helpers/constants/index.js","../src/helpers/is/isArray.js","../src/helpers/is/isElement.js","../src/helpers/is/isHTML.js","../src/helpers/is/isIterable.js","../src/helpers/is/isNumber.js","../src/helpers/is/isObject.js","../src/helpers/is/isString.js","../src/helpers/utils/arrayFrom.js","../src/helpers/utils/arrayUnique.js","../src/helpers/utils/callOrReturn.js","../src/helpers/utils/camelToKebab.js","../src/helpers/utils/checkHash.js","../src/helpers/utils/createElement.js","../src/helpers/dom/addClass.js","../src/helpers/utils/createInset.js","../src/helpers/utils/getDataSelector.js","../src/helpers/utils/getOption.js","../src/helpers/utils/getPosition.js","../src/helpers/utils/isOverflowElement.js","../src/helpers/utils/isUnfocusable.js","../src/helpers/utils/mergeDeep.js","../src/helpers/utils/normalizeToggleParameters.js","../src/helpers/utils/observeResize.js","../src/helpers/utils/replaceWord.js","../src/helpers/utils/returnArray.js","../src/helpers/utils/strToArray.js","../src/helpers/utils/toMs.js","../src/helpers/utils/uuidGenerator.js","../src/helpers/utils/updateOptsByData.js","../src/helpers/utils/getEventsPrefix.js","../src/helpers/utils/getClassActive.js","../src/helpers/utils/getDefaultToggleSelector.js","../src/helpers/utils/updateModule.js","../src/helpers/dom/addStyle.js","../src/helpers/dom/closest.js","../src/helpers/dom/dir.js","../src/helpers/dom/each.js","../src/helpers/dom/filter.js","../src/helpers/dom/focus.js","../src/helpers/dom/fragment.js","../src/helpers/dom/getElement.js","../src/helpers/dom/getElements.js","../src/helpers/dom/inDOM.js","../src/helpers/dom/is.js","../src/helpers/dom/map.js","../src/helpers/dom/nextAll.js","../src/helpers/dom/parents.js","../src/helpers/dom/removeAttr.js","../src/helpers/dom/removeClass.js","../src/helpers/dom/setAttribute.js","../src/helpers/dom/toggleClass.js","../src/helpers/EventHandler.js","../src/helpers/Breakpoints.js","../src/helpers/Base.js","../src/helpers/ToggleMixin.js","../src/helpers/Transition.js","../src/helpers/Teleport.js","../src/helpers/modules/addDismiss.js","../src/helpers/modules/addEscapeHide.js","../src/helpers/modules/callAutofocus.js","../src/helpers/modules/baseDestroy.js","../src/helpers/modules/toggleOnInterection.js","../src/helpers/Floating.js","../src/helpers/modules/floatingTransition.js","../src/helpers/modules/addOutsideHide.js","../src/helpers/modules/callInitShow.js","../src/Collapse.js","../src/Dropdown.js","../src/Modal.js","../src/Tablist.js","../src/helpers/dom/next.js","../src/helpers/is/isUndefined.js","../src/helpers/utils/without.js","../src/helpers/Autoaction.js","../src/Toast.js","../src/helpers/utils/objectToAttributes.js","../src/Tooltip.js","../src/Popover.js"],"sourcesContent":["const cache = {};\nexport default (str = \"\") =>\n  cache[str] ||\n  (cache[str] = str.replace(/-./g, (match) => match[1].toUpperCase()));\n","const cache = {};\nexport default (str = \"\") =>\n  cache[str] || (cache[str] = str[0].toUpperCase() + str.slice(1));\n","export default (value) => typeof value === \"function\";\n","import kebabToCamel from \"../utils/kebabToCamel\";\nimport upperFirst from \"../utils/upperFirst\";\nimport isFunction from \"../is/isFunction\";\n\nexport const UI = \"ui\";\nexport const UI_PREFIX = UI + \"-\";\nexport const VAR_UI_PREFIX = \"--\" + UI_PREFIX;\nexport const DATA_PREFIX = \"data-\";\nexport const DATA_UI_PREFIX = DATA_PREFIX + UI_PREFIX;\nexport const ACTIVE = \"active\";\nexport const CLASS_ACTIVE = UI_PREFIX + ACTIVE;\n\nexport const DEFAULT = \"default\";\nexport const NAME = \"name\";\nexport const MODE = \"mode\";\n\nexport const PX = \"px\";\nexport const NONE = \"none\";\nexport const ID = \"id\";\n\nexport const WIDTH = \"width\";\nexport const HEIGHT = \"height\";\nexport const TOP = \"top\";\nexport const LEFT = \"left\";\nexport const RIGHT = \"right\";\nexport const BOTTOM = \"bottom\";\nexport const CENTER = \"center\";\nexport const START = \"start\";\nexport const END = \"end\";\nexport const UP = \"up\";\nexport const DOWN = \"down\";\nexport const IN = \"in\";\nexport const OUT = \"out\";\nexport const MOVE = \"move\";\nexport const TITLE = \"title\";\n\nexport const HORIZONTAL = \"horizontal\";\nexport const VERTICAL = \"vertical\";\nexport const ABSOLUTE = \"absolute\";\nexport const FIXED = \"fixed\";\nexport const TRANSITION = \"transition\";\n\nexport const DIV = \"div\";\nexport const BUTTON = \"button\";\nexport const WINDOW = \"window\";\nexport const DOCUMENT = \"document\";\nexport const CLASS = \"class\";\nexport const STYLE = \"style\";\nexport const KEY = \"key\";\nexport const ROLE = \"role\";\nexport const ROOT = \"root\";\nexport const CONFIRM = \"confirm\";\nexport const CANCEL = \"cancel\";\n\nexport const BEFORE = \"before\";\nexport const AFTER = \"after\";\n\nexport const MOUSE = \"mouse\";\n\nexport const CLICK = \"click\";\nexport const HOVER = \"hover\";\nexport const FOCUS = \"focus\";\nexport const SCROLL = \"scroll\";\n\nexport const HIDE = \"hide\";\nexport const HIDDEN = \"hidden\";\nexport const SHOW = \"show\";\nexport const SHOWN = \"shown\";\nexport const APPEAR = \"appear\";\n\nexport const TARGET = \"target\";\nexport const AVAILABLE = \"awailable\";\nexport const AVAILABLE_WIDTH = AVAILABLE + \"-\" + WIDTH;\nexport const AVAILABLE_HEIGHT = AVAILABLE + \"-\" + HEIGHT;\nexport const ANCHOR = \"anchor\";\nexport const ANCHOR_WIDTH = ANCHOR + \"-\" + WIDTH;\nexport const ANCHOR_HEIGHT = ANCHOR + \"-\" + HEIGHT;\n\nexport const MODAL = \"modal\";\nexport const CONTENT = \"content\";\nexport const BACKDROP = \"backdrop\";\nexport const POPOVER = \"popover\";\nexport const TOOLTIP = \"tooltip\";\nexport const TOGGLER = \"toggler\";\nexport const DROPDOWN = \"dropdown\";\nexport const ARROW = \"arrow\";\nexport const PROGRESS = \"progress\";\nexport const DISMISS = \"dismiss\";\nexport const FLOATING = \"floating\";\nexport const DIALOG = \"dialog\";\n\nexport const FLIP = \"flip\";\nexport const SHRINK = \"shrink\";\nexport const STICKY = \"sticky\";\nexport const PLACEMENT = \"placement\";\nexport const PADDING = \"padding\";\nexport const OFFSET = \"offset\";\nexport const BOUNDARY_OFFSET = \"boundary-\" + OFFSET;\nexport const WEBKIT_PREFIX = \"-webkit-\";\nexport const CLIP_PATH = \"clip-path\";\nexport const ARROW_OFFSET = ARROW + \"-\" + OFFSET;\nexport const ARROW_PADDING = ARROW + \"-\" + PADDING;\nexport const TRUE = \"true\";\n\nexport const doc = document;\nexport const body = doc.body;\n\nexport const ENTER = \"enter\";\nexport const LEAVE = \"leave\";\nexport const BEFORE_ENTER = BEFORE + upperFirst(ENTER);\nexport const ENTER_ACTIVE = ENTER + upperFirst(ACTIVE);\nexport const ENTER_FROM = ENTER + \"From\";\nexport const ENTER_TO = ENTER + \"To\";\nexport const AFTER_ENTER = AFTER + upperFirst(ENTER);\nexport const BEFORE_LEAVE = BEFORE + upperFirst(LEAVE);\nexport const LEAVE_ACTIVE = LEAVE + upperFirst(ACTIVE);\nexport const LEAVE_FROM = LEAVE + \"From\";\nexport const LEAVE_TO = LEAVE + \"To\";\nexport const AFTER_LEAVE = AFTER + upperFirst(LEAVE);\nexport const HIDDEN_MODE = HIDDEN + upperFirst(MODE);\nexport const DURATION = \"duration\";\nexport const DURATION_ENTER = DURATION + upperFirst(ENTER);\nexport const DURATION_LEAVE = DURATION + upperFirst(LEAVE);\n\nexport const ACTION_INIT = \"init\";\nexport const ACTION_DESTROY = \"destroy\";\nexport const ACTION_TOGGLE = \"toggle\";\nexport const ACTION_SHOW = SHOW;\nexport const ACTION_HIDE = HIDE;\nexport const ACTION_ADD = \"add\";\nexport const ACTION_REMOVE = \"remove\";\nexport const ACTION_UPDATE = \"update\";\nexport const ACTION_PAUSE = \"pause\";\nexport const ACTION_RESUME = \"resume\";\nexport const ACTION_RESET = \"reset\";\nexport const ACTION_ON = \"on\";\nexport const ACTION_OFF = \"off\";\nexport const ACTION_EMIT = \"emit\";\nexport const ACTION_ONCE = \"once\";\nexport const ACTION_PREVENT = \"prevent\";\n\nexport const INERT = \"inert\";\nexport const AUTOFOCUS = \"autofocus\";\nexport const TABINDEX = \"tabindex\";\nexport const DISABLED = \"disabled\";\nexport const POPOVER_DATA_ATTRIBUTE = DATA_UI_PREFIX + POPOVER + \"-wrapper\";\nexport const FLOATING_DATA_ATTRIBUTE = DATA_UI_PREFIX + FLOATING;\nexport const DATA_PREVENT_INERT = DATA_UI_PREFIX + ACTION_PREVENT + \"-\" + INERT;\nexport const DATA_APPEAR = DATA_UI_PREFIX + APPEAR;\n\nexport const EVENT_INIT = ACTION_INIT;\nexport const EVENT_BEFORE_INIT = BEFORE + upperFirst(EVENT_INIT);\nexport const EVENT_DESTROY = ACTION_DESTROY;\nexport const EVENT_BEFORE_DESTROY = BEFORE + upperFirst(EVENT_DESTROY);\nexport const EVENT_BEFORE_SHOW = BEFORE + upperFirst(SHOW);\nexport const EVENT_SHOW = SHOW;\nexport const EVENT_SHOWN = SHOWN;\nexport const EVENT_BEFORE_HIDE = BEFORE + upperFirst(HIDE);\nexport const EVENT_HIDE = HIDE;\nexport const EVENT_HIDDEN = HIDDEN;\nexport const EVENT_PAUSE = ACTION_PAUSE;\nexport const EVENT_RESUME = ACTION_RESUME;\nexport const EVENT_RESET = ACTION_RESET;\nexport const EVENT_MOUSEENTER = MOUSE + ENTER;\nexport const EVENT_MOUSELEAVE = MOUSE + LEAVE;\nexport const EVENT_MOUSEMOVE = MOUSE + MOVE;\nexport const EVENT_MOUSEDOWN = MOUSE + DOWN;\nexport const EVENT_MOUSEUP = MOUSE + UP;\nexport const EVENT_CHANGE = \"change\";\nexport const EVENT_BREAKPOINT = \"breakpoint\";\nexport const EVENT_CLOSE = \"close\";\nexport const EVENT_CLICK = CLICK;\nexport const EVENT_KEYDOWN = KEY + DOWN;\nexport const EVENT_KEYUP = KEY + UP;\nexport const EVENT_FOCUS = FOCUS;\nexport const EVENT_FOCUSIN = FOCUS + IN;\nexport const EVENT_FOCUSOUT = FOCUS + OUT;\nexport const EVENT_RIGHT_CLICK = \"contextmenu\";\nexport const EVENT_VISIBILITY_CHANGE = \"visibilitychange\";\nexport const EVENT_HIDE_PREVENTED = \"hidePrevented\";\nexport const EVENT_ACTION_OUTSIDE = `${EVENT_CLICK}.outside ${EVENT_KEYUP}.outside`;\nexport const EVENT_SCROLL = SCROLL;\nexport const EVENT_RESIZE = \"resize\";\nexport const EVENT_DISABLED = DISABLED;\nexport const EVENT_ENABLED = \"enabled\";\n\nexport const ARIA = \"aria\";\nexport const ARIA_CONTROLS = ARIA + \"-controls\";\nexport const ARIA_EXPANDED = ARIA + \"-expanded\";\nexport const ARIA_HIDDEN = ARIA + \"-\" + HIDDEN;\nexport const ARIA_MULTISELECTABLE = ARIA + \"-multiselectable\";\nexport const ARIA_LABELLEDBY = ARIA + \"-labelledby\";\nexport const ARIA_DESCRIBEDBY = ARIA + \"-describedby\";\nexport const ARIA_ORIENTATION = ARIA + \"-orientation\";\nexport const ARIA_MODAL = ARIA + \"-\" + MODAL;\nexport const ARIA_LIVE = ARIA + \"-live\";\nexport const ARIA_ATOMIC = ARIA + \"-atomic\";\n\nexport const KEY_ENTER = 13;\nexport const KEY_ESC = 27;\nexport const KEY_SPACE = 32;\nexport const KEY_END = 35;\nexport const KEY_HOME = 36;\nexport const KEY_TAB = 9;\nexport const KEY_ARROW_LEFT = 37;\nexport const KEY_ARROW_UP = 38;\nexport const KEY_ARROW_RIGHT = 39;\nexport const KEY_ARROW_DOWN = 40;\n\nexport const A11Y = \"a11y\";\nexport const OPTION_GROUP = \"group\";\nexport const OPTION_BACKDROP_OUTSIDE = \"backdropOutside\";\nexport const OPTION_APPEAR = APPEAR;\nexport const OPTION_KEEP_PLACE = \"keepPlace\";\nexport const OPTION_PREVENT_SCROLL = \"preventScroll\";\nexport const OPTION_POSITION = \"position\";\nexport const OPTION_TO = \"to\";\nexport const OPTION_ARIA_LABELLEDBY = kebabToCamel(ARIA_LABELLEDBY);\nexport const OPTION_ARIA_DESCRIBEDBY = kebabToCamel(ARIA_DESCRIBEDBY);\nexport const OPTION_ARIA_EXPANDED = kebabToCamel(ARIA_EXPANDED);\nexport const OPTION_ARIA_CONTROLS = kebabToCamel(ARIA_CONTROLS);\nexport const OPTION_ARIA_HIDDEN = kebabToCamel(ARIA_HIDDEN);\nexport const OPTION_ARIA_MODAL = kebabToCamel(ARIA_MODAL);\nexport const OPTION_ARIA_LIVE = kebabToCamel(ARIA_LIVE);\nexport const OPTION_ARIA_ATOMIC = kebabToCamel(ARIA_ATOMIC);\nexport const CLASS_ACTIVE_SUFFIX = \"ClassActive\";\n\nexport const OPTIONS_BOOLEAN = [OPTION_APPEAR, OPTION_KEEP_PLACE];\n\nexport const TRANSITION_REMOVE_MODE = { hiddenMode: ACTION_REMOVE };\nexport const DEFAULT_OPTIONS = {\n  [ACTION_INIT]: true,\n  [ACTION_DESTROY]: false,\n  data: \"\",\n  on: null,\n  [APPEAR]: null,\n  eventDispatch: true,\n  eventBubble: true,\n  [SHOWN]: null,\n  [A11Y]: true,\n};\nexport const DEFAULT_FLOATING_OPTIONS = {\n  transition: null,\n  teleport: null,\n  awaitAnimation: false,\n  placement: BOTTOM,\n  absolute: false,\n  offset: 10,\n  padding: 0,\n  delay: [200, 0],\n  boundaryOffset: 0,\n  shrink: false,\n  flip: true,\n  sticky: false,\n  escapeHide: true,\n  outsideHide: true,\n  arrow: {\n    height: null,\n    width: null,\n    offset: 0,\n    padding: 0,\n  },\n};\n\nexport const SELECTOR_AUTOFOCUS = `[${AUTOFOCUS}]`;\nexport const SELECTOR_DISABLED = `[${DISABLED}]`;\nexport const SELECTOR_INERT = `[${INERT}]`;\nexport const SELECTOR_DATA_AUTOFOCUS = `[${DATA_UI_PREFIX + AUTOFOCUS}]`;\nexport const SELECTOR_DATA_CONFIRM = `[${DATA_UI_PREFIX + CONFIRM}]`;\nexport const SELECTOR_DATA_CANCEL = `[${DATA_UI_PREFIX + CANCEL}]`;\nexport const DEFAULT_AUTOFOCUS = `${SELECTOR_AUTOFOCUS},${SELECTOR_DATA_AUTOFOCUS},[${TABINDEX}=\"-1\"]`;\nexport const FOCUSABLE_ELEMENTS_SELECTOR = `:is(button,select,textarea,input):not(disabled,inert,[aria-hidden],[type=\"hidden\"]),[href]:is(a,area),[contenteditable],iframe,object,embed,[tabindex]:not([tabindex^=\"-\"])`;\nexport const SELECTOR_ROOT = \":\" + ROOT;\n\nexport const SUPPORTS_DIALOG = isFunction(window.HTMLDialogElement);\n\nexport const MIRROR = {\n  [TOP]: BOTTOM,\n  [BOTTOM]: TOP,\n  [LEFT]: RIGHT,\n  [RIGHT]: LEFT,\n  [START]: END,\n  [END]: START,\n  [WIDTH]: HEIGHT,\n  [HEIGHT]: WIDTH,\n  x: \"y\",\n  y: \"x\",\n};\n","export default Array.isArray;\n","export default (value) => value && !!value.getElementsByClassName;\n","export default RegExp.prototype.test.bind(/(<([^>]+)>)/i);\n","import { isString } from \"./index.js\";\nexport default (value) => value && !!value[Symbol.iterator] && !isString(value);\n","export default (value) => typeof value === \"number\";\n","export default (value) => value && value.constructor === Object;\n","export default (value) => typeof value === \"string\";\n","export default Array.from;\n","import arrayFrom from \"./arrayFrom\";\nexport default (array) =>\n  array.length > 1 ? arrayFrom(new Set(array)) : array;\n","import { isFunction } from \"../is\";\nexport default (value, ...data) => (isFunction(value) ? value(...data) : value);\n","const cache = {};\nexport default (str = \"\") =>\n  cache[str] ||\n  (cache[str] = str.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase());\n","export default (id) => window.location.hash.substring(1) === id;\n","import { isString } from \"../is\";\nimport { addClass, addStyle, setAttribute } from \"../dom\";\nimport { CLASS, STYLE, DIV, doc } from \"../constants\";\nimport camelToKebab from \"./camelToKebab\";\nexport default (type = DIV, props, ...content) => {\n  const elem = doc.createElement(type);\n  if (props) {\n    if (isString(props)) {\n      props = { class: props };\n    }\n    Object.entries(props).forEach(([name, value]) => {\n      if (name === CLASS) {\n        addClass(elem, value);\n      } else if (name === STYLE) {\n        addStyle(elem, value);\n      } else {\n        setAttribute(elem, camelToKebab(name), value);\n      }\n    });\n  }\n  content.forEach((item) => item && elem.append(item));\n  return elem;\n};\n","import { toggleClass } from \"./index.js\";\nexport default (elem, classes) => toggleClass(elem, classes, true);\n","import { isArray, isObject, isNumber } from \"../is\";\nexport default (input, returnArray) => {\n  let top = 0,\n    right = 0,\n    bottom = 0,\n    left = 0;\n  if (isNumber(input)) {\n    top = right = bottom = left = input;\n  } else if (isArray(input)) {\n    if (input.length === 1) {\n      top = right = bottom = left = input[0];\n    } else if (input.length === 2) {\n      top = bottom = input[0];\n      right = left = input[1];\n    } else if (input.length === 3) {\n      top = input[0];\n      right = left = input[1];\n      bottom = input[2];\n    } else {\n      top = input[0];\n      right = input[1];\n      bottom = input[2];\n      left = input[3];\n    }\n  } else if (isObject(input)) {\n    top = input.top || 0;\n    right = input.right || 0;\n    bottom = input.bottom || 0;\n    left = input.left || 0;\n  }\n  if (returnArray) {\n    return [top, right, bottom, left];\n  } else {\n    return { top, right, bottom, left };\n  }\n};\n","import { DATA_UI_PREFIX } from \"../constants\";\nexport default (...values) => `[${DATA_UI_PREFIX + values.join(\"-\")}]`;\n","import { returnArray, callOrReturn } from \"./index.js\";\nimport { isString, isHTML } from \"../is\";\nimport { fragment } from \"../dom\";\nimport { doc } from \"../constants\";\n\nexport default function (multiply, option, root = doc, ...params) {\n  if (!option) return;\n  option = callOrReturn(option, this, ...params);\n  if (isString(option)) {\n    if (isHTML(option)) {\n      option = fragment(option);\n    } else {\n      if (option[0] === \"#\") {\n        root = doc;\n      }\n      option =\n        doc.getElementById(option) ||\n        root[multiply ? \"querySelectorAll\" : \"querySelector\"](option);\n    }\n  }\n  return multiply ? returnArray(option) : option;\n}\n","import {\n  WIDTH,\n  HEIGHT,\n  TOP,\n  LEFT,\n  RIGHT,\n  BOTTOM,\n  AVAILABLE_WIDTH,\n  AVAILABLE_HEIGHT,\n  START,\n  CENTER,\n  END,\n  MIRROR,\n} from \"../constants\";\nimport { isArray } from \"../is\";\nimport { createInset } from \"./index.js\";\n\nconst { min, max } = Math;\n\nexport default function ({\n  absolute,\n  anchorRect,\n  targetRect,\n  viewRect = { [WIDTH]: window.innerWidth, [HEIGHT]: window.innerHeight },\n  arrow,\n  placement,\n  boundaryOffset = 0,\n  offset = 0,\n  padding = 0,\n  shrink = false,\n  flip = false,\n  sticky = false,\n  minWidth = 0,\n  minHeight = 0,\n}) {\n  boundaryOffset = createInset(boundaryOffset);\n\n  if (absolute) {\n    flip = false;\n    shrink = false;\n    sticky = false;\n  }\n\n  flip = isArray(flip) ? flip : [flip];\n  flip[1] ??= flip[0];\n\n  padding = isArray(padding) ? padding : [padding];\n  padding[1] ??= padding[0];\n\n  const [baseM, baseS = CENTER] = placement.split(\"-\");\n  const hor = baseM === LEFT || baseM === RIGHT;\n\n  const size = hor ? WIDTH : HEIGHT;\n  const dir = hor ? LEFT : TOP;\n  const dirS = hor ? TOP : LEFT;\n\n  const minRect = { [WIDTH]: minWidth, [HEIGHT]: minHeight };\n\n  let useFlipM = null;\n  let useFlipS = null;\n\n  function calculate() {\n    const m = (useFlipM && MIRROR[baseM]) || baseM;\n    const s = (useFlipS && MIRROR[baseS]) || baseS;\n\n    const isStart = s === START;\n    const isEnd = s === END;\n    const isCenter = s === CENTER;\n    const isMainDir = m === dir;\n    const sumPadding = padding[0] + padding[1];\n    const mirrorSize = MIRROR[size];\n    const mirrorDirS = MIRROR[dirS];\n\n    const anchorSpace = {\n      [TOP]: anchorRect[TOP],\n      [LEFT]: anchorRect[LEFT],\n      [RIGHT]: viewRect[WIDTH] - anchorRect[RIGHT],\n      [BOTTOM]: viewRect[HEIGHT] - anchorRect[BOTTOM],\n    };\n\n    anchorSpace[m] -= offset + boundaryOffset[m];\n    anchorSpace[MIRROR[m]] -= boundaryOffset[dirS] + boundaryOffset[mirrorDirS];\n\n    let awailableSizesOffset;\n    if (sticky) {\n      awailableSizesOffset = viewRect[mirrorSize] - sumPadding;\n    } else {\n      awailableSizesOffset = viewRect[mirrorSize] - anchorRect[mirrorSize] / 2;\n      if (isStart) {\n        awailableSizesOffset =\n          anchorSpace[mirrorDirS] + anchorRect[mirrorSize] - sumPadding;\n      } else if (isEnd) {\n        awailableSizesOffset =\n          anchorSpace[dirS] + anchorRect[mirrorSize] - sumPadding;\n      }\n    }\n\n    const awailableSizes = {\n      [size]: max(minRect[size], anchorSpace[m]),\n      [mirrorSize]: max(minRect[mirrorSize], awailableSizesOffset),\n    };\n\n    const currentSize = {\n      [size]: shrink\n        ? min(targetRect[size], awailableSizes[size])\n        : targetRect[size],\n      [mirrorSize]: shrink\n        ? min(targetRect[mirrorSize], awailableSizes[mirrorSize])\n        : targetRect[mirrorSize],\n    };\n\n    if ((flip[0] || flip[1]) && useFlipM === null && useFlipS === null) {\n      if (\n        flip[0] &&\n        targetRect[size] > anchorSpace[m] &&\n        anchorSpace[m] < anchorSpace[MIRROR[m]]\n      ) {\n        useFlipM = true;\n      }\n      if (\n        flip[1] &&\n        anchorSpace[mirrorDirS] <\n          targetRect[mirrorSize] -\n            anchorRect[mirrorSize] +\n            padding[0] +\n            boundaryOffset[mirrorDirS]\n      ) {\n        useFlipS = true;\n      }\n      if (useFlipM || useFlipS) {\n        return calculate();\n      }\n    }\n\n    let mo;\n    if (isMainDir) {\n      mo = anchorRect[dir] - currentSize[size] - offset;\n    } else {\n      mo = anchorRect[MIRROR[dir]] + offset;\n    }\n\n    let so;\n    if (isStart) {\n      so = anchorRect[dirS] + padding[0];\n    } else if (isCenter) {\n      so =\n        anchorRect[dirS] -\n        (currentSize[mirrorSize] - anchorRect[mirrorSize]) / 2;\n    } else {\n      so = anchorRect[mirrorDirS] - currentSize[mirrorSize] - padding[1];\n    }\n\n    const staticSo = so;\n    if (sticky) {\n      if (so < boundaryOffset[dirS]) {\n        if (!isStart) {\n          so = boundaryOffset[dirS];\n          if (anchorRect[dirS] < boundaryOffset[dirS] - padding[0]) {\n            so = anchorRect[dirS] + padding[0];\n          }\n        }\n      } else if (\n        so + currentSize[mirrorSize] + boundaryOffset[mirrorDirS] >\n        viewRect[mirrorSize]\n      ) {\n        if (!isEnd) {\n          so -=\n            so +\n            currentSize[mirrorSize] -\n            viewRect[mirrorSize] +\n            boundaryOffset[mirrorDirS];\n          if (\n            anchorSpace[mirrorDirS] <\n            -padding[1] + boundaryOffset[mirrorDirS]\n          ) {\n            so -=\n              anchorSpace[mirrorDirS] + padding[1] - boundaryOffset[mirrorDirS];\n          }\n        }\n      }\n    }\n\n    const shift = staticSo - so;\n\n    let arrowPosition = {};\n    if (arrow) {\n      let { padding = 0, offset = 0 } = arrow;\n      padding = isArray(padding) ? padding : [padding];\n      padding[1] ??= padding[0];\n\n      let so;\n      if (isStart) {\n        so = padding[0];\n      } else if (isCenter) {\n        so = currentSize[mirrorSize] / 2 - arrow[mirrorSize] / 2;\n      } else {\n        so = currentSize[mirrorSize] - padding[1] - arrow[mirrorSize];\n      }\n\n      so += shift + max(0, -currentSize[mirrorSize] / 2);\n      let mo = -arrow[mirrorSize] / 2 + offset;\n      if (isMainDir) {\n        mo += currentSize[size];\n      }\n      arrowPosition = hor ? [mo, so] : [so, mo];\n    }\n\n    let transformOrigin;\n    if (arrow) {\n      transformOrigin = arrowPosition;\n    } else {\n      const mo = isStart\n        ? padding[0]\n        : isEnd\n        ? currentSize[mirrorSize] - padding[1]\n        : currentSize[MIRROR[size]] / 2;\n      const so = isMainDir ? currentSize[size] : 0;\n      transformOrigin = hor ? [so, mo] : [mo, so];\n    }\n\n    return {\n      [dir]: mo,\n      [dirS]: so,\n      [AVAILABLE_WIDTH]: awailableSizes[WIDTH],\n      [AVAILABLE_HEIGHT]: awailableSizes[HEIGHT],\n      arrow: arrowPosition,\n      placement: useFlipM ? MIRROR[placement] : placement,\n      transformOrigin,\n    };\n  }\n  return calculate();\n}\n","export default (elem) => {\n  const { overflow, overflowX, overflowY, display } = getComputedStyle(elem);\n  return (\n    !/inline|contents/.test(display) &&\n    /auto|hidden|scroll|overlay|clip/.test(overflow + overflowY + overflowX)\n  );\n};\n","import { SELECTOR_DISABLED, SELECTOR_INERT } from \"../constants\";\nconst UNFOCUSABLE_SELECTORS = `${SELECTOR_DISABLED},${SELECTOR_INERT}`;\nexport default (elem) => elem.matches(UNFOCUSABLE_SELECTORS);\n","import { isArray, isObject } from \"../is\";\nexport default function mergeDeep(...objects) {\n  const result = {};\n  for (const object of objects.filter(Boolean)) {\n    for (const [key, value] of Object.entries(object)) {\n      if (isObject(result[key])) {\n        result[key] = isObject(value) ? mergeDeep(result[key], value) : value;\n      } else if (isArray(result[key])) {\n        result[key] = isArray(value) ? [...result[key], ...value] : value;\n      } else if (value !== undefined) {\n        result[key] = value;\n      }\n    }\n  }\n  return result;\n}\n","import { isObject } from \"../is\";\nexport default (animated = true) =>\n  isObject(animated) ? { animated: true, ...animated } : { animated };\n","const resizeObserver = new ResizeObserver((entries) => {\n  for (const { borderBoxSize, target } of entries) {\n    const { blockSize, inlineSize } = borderBoxSize[0];\n    target.__resizeCallback__(inlineSize, blockSize);\n  }\n});\nfunction observeResize(target, fn) {\n  target.__resizeCallback__ = fn;\n  resizeObserver.observe(target, { box: \"border-box\" });\n}\nexport { resizeObserver, observeResize };\n","export default (str, word) =>\n  str\n    .split(\" \")\n    .filter((w) => w !== word)\n    .join(\" \");\n","import arrayFrom from \"./arrayFrom\";\nimport { isIterable } from \"../is\";\nexport default (elem) =>\n  elem !== undefined ? (isIterable(elem) ? arrayFrom(elem) : [elem]) : [];\n","import { isArray } from \"../is\";\nexport default (str = \"\", separator = \" \") =>\n  str ? (isArray(str) ? str : str.split(separator)).filter(Boolean) : [];\n","export default (time) => {\n  if (!time) return;\n  let num = parseFloat(time);\n  let unit = time.match(/m?s/);\n  if (unit) {\n    unit = unit[0];\n  }\n  if (unit === \"s\") {\n    num *= 1000;\n  }\n  return num;\n};\n","export default (prefix = \"\") =>\n  prefix + Math.random().toString(36).substring(2, 12);\n","import { UI, OPTIONS_BOOLEAN } from \"../constants\";\nimport { isArray } from \"../is\";\nimport { upperFirst } from \"../utils\";\n\nexport default (opts, dataset, names) => {\n  names.forEach((name) => {\n    let optionName = name;\n    let attributeName = name;\n    if (isArray(name)) {\n      optionName = name[0];\n      attributeName = name[1];\n    }\n    let value = dataset[UI + upperFirst(attributeName)];\n    const hasAttribute = value !== undefined;\n    if (hasAttribute) {\n      if (OPTIONS_BOOLEAN.includes(optionName)) {\n        value = hasAttribute;\n      } else if (value && value[0] === \"{\") {\n        value = JSON.parse(value);\n      }\n      opts[optionName] = value;\n    }\n  });\n  return opts;\n};\n","import { UI_PREFIX } from \"../constants\";\nexport default (name) => UI_PREFIX + name + \":\";\n","import { UI_PREFIX, ACTIVE } from \"../constants\";\nexport default (name) => UI_PREFIX + (name ? name + \"-\" : \"\") + ACTIVE;\n","import { DATA_UI_PREFIX, ACTION_TOGGLE } from \"../constants\";\nexport default (id, multiply) =>\n  `[${DATA_UI_PREFIX + ACTION_TOGGLE}${\n    multiply ? \"~\" : \"\"\n  }=\"${id}\"],[href=\"#${id}\"]`;\n","import { DEFAULT } from \"../constants\";\nimport { isObject } from \"../is\";\nimport { upperFirst } from \"./index\";\nconst DEFAULT_PREFIX = upperFirst(DEFAULT);\nexport default ({ opts, constructor }, name, property) => {\n  const defaultValue = constructor[DEFAULT_PREFIX + upperFirst(name)];\n  const value = opts[name];\n  if (isObject(value)) {\n    opts[name] = { ...defaultValue, ...value };\n  } else if (value) {\n    opts[name] = { ...defaultValue };\n    if (property) {\n      opts[name][property] = value;\n    }\n  }\n  return opts;\n};\n","import { isIterable, isObject } from \"../is\";\nimport { camelToKebab } from \"../utils\";\nexport default function addStyle(elem, name, value) {\n  if (isIterable(elem)) {\n    elem.forEach((elem) => addStyle(elem, name, value));\n  } else {\n    if (isObject(name)) {\n      for (const key in name) addStyle(elem, key, name[key]);\n    } else {\n      elem.style.setProperty(camelToKebab(name), value);\n    }\n  }\n}\n","import { getElements } from \"./index.js\";\nexport default (elem, selectors) =>\n  getElements(selectors).find((t) => t === elem || t.contains(elem));\n","import { isFunction } from \"../is\";\nimport { filter, map, is } from \"./index.js\";\n\nexport default (elem, property, selector, until) => {\n  const utilIsFn = isFunction(until);\n  return map(elem, (el) => {\n    const elems = [];\n    while (el) {\n      el = el[property];\n      if (el) {\n        if (until && (utilIsFn ? until(el) : is(el, until))) break;\n        elems.push(el);\n      }\n    }\n    return filter(elems, selector);\n  }).flat();\n};\n","import { getElements } from \"./index.js\";\nexport default (elems, fn) => {\n  elems = getElements(elems);\n  elems.forEach(fn);\n  return elems;\n};\n","import { isFunction } from \"../is\";\nimport { is } from \"../dom\";\nimport { arrayFrom } from \"../utils\";\n\nexport default (elems, selector) => {\n  const isFn = isFunction(selector);\n  elems = arrayFrom(elems);\n  return selector\n    ? elems.filter((elem, i, list) =>\n        isFn ? selector(elem, i, list) : is(elem, selector),\n      )\n    : elems;\n};\n","export default (elem, opts = { preventScroll: true }) =>\n  elem && elem.focus(opts);\n","import { isString } from \"../is\";\nimport { arrayFrom } from \"../utils\";\nexport default (html, findSelectors) => {\n  let children = html;\n  if (isString(html)) {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n    if (findSelectors) {\n      return arrayFrom(doc.querySelectorAll(findSelectors));\n    }\n    children = doc.body.children;\n  }\n  return children\n    ? children.length > 1\n      ? arrayFrom(children)\n      : children[0]\n    : \"\";\n};\n","import { getElements } from \"./index.js\";\nexport default (selector, context, findSelf) =>\n  getElements(selector, context, findSelf)[0];\n","import { isElement, isString, isIterable, isHTML } from \"../is\";\nimport { arrayUnique, returnArray, arrayFrom } from \"../utils\";\nimport { getElement, is } from \"../dom\";\nimport { WINDOW, DOCUMENT, doc } from \"../constants\";\nimport { fragment } from \"./index.js\";\n\nexport default function getElements(selector, context = doc, findSelf = false) {\n  if (isElement(selector)) {\n    return [selector];\n  }\n  let result = selector;\n  if (isString(context)) {\n    context = getElement(context);\n  }\n  if (!isElement(context) || !selector) return [];\n  if (isString(selector)) {\n    selector = selector.trim();\n    if (selector === DOCUMENT) {\n      result = doc;\n    } else if (selector === WINDOW) {\n      result = window;\n    } else if (isHTML(selector)) {\n      result = fragment(selector);\n    } else {\n      result = context.querySelectorAll(selector);\n    }\n  } else if (isIterable(selector)) {\n    result = arrayFrom(selector, (item) => getElements(item, context)).flat();\n  }\n\n  result = returnArray(result);\n\n  if (findSelf && is(context, selector)) {\n    result.unshift(context);\n  }\n  return arrayUnique(result).filter(Boolean);\n}\n","import { body } from \"../constants\";\nexport default (elem) => elem && body.contains(elem);\n","import { isString, isIterable, isFunction } from \"../is\";\nimport { arrayFrom } from \"../utils\";\nexport default (elem, selector) =>\n  elem === selector\n    ? true\n    : isString(selector)\n    ? elem.matches(selector)\n    : isIterable(selector)\n    ? arrayFrom(selector).includes(elem)\n    : isFunction(selector) && selector(elem);\n","import { getElements } from \"./index.js\";\nexport default (elems, fn) => getElements(elems).map(fn);\n","import { dir } from \"./index.js\";\nexport default (elem, selector, until) =>\n  dir(elem, \"nextElementSibling\", selector, until);\n","import { dir } from \"./index.js\";\nexport default (elem, selector, until) =>\n  dir(elem, \"parentElement\", selector, until);\n","import { isIterable } from \"../is\";\nimport { strToArray } from \"../utils\";\nexport default (elem, names) => {\n  names = strToArray(names);\n  if (isIterable(elem)) {\n    elem.forEach((elem) =>\n      names.forEach((name) => elem && elem.removeAttribute(name)),\n    );\n  } else {\n    names.forEach((name) => elem && elem.removeAttribute(name));\n  }\n};\n","import { toggleClass } from \"./index.js\";\nexport default (elem, classes) => toggleClass(elem, classes, false);\n","import { isFunction, isArray } from \"../is\";\nexport default function setAttribute(elem, name, value) {\n  if (!elem) return;\n  if (isArray(elem)) {\n    return elem.forEach((elem) => setAttribute(elem, name, value));\n  }\n  if (isFunction(value)) {\n    value = value(elem.getAttribute(name));\n  }\n  if (value === null) {\n    elem.removeAttribute(name);\n  } else if (value !== undefined) {\n    elem.setAttribute(name, value);\n  }\n}\n","import { isElement, isIterable, isArray } from \"../is\";\nimport { strToArray } from \"../utils\";\nimport { ACTION_ADD, ACTION_REMOVE } from \"../constants\";\n\nexport default function toggleClass(elem, classes, s) {\n  if (isArray(classes)) {\n    classes = classes.filter(Boolean).join(\" \");\n  }\n  const cls = strToArray(classes);\n  if (isElement(elem)) {\n    s ??= !elem.classList.contains(cls[0]);\n    elem.classList[s ? ACTION_ADD : ACTION_REMOVE](...cls);\n  } else if (isIterable(elem)) {\n    elem.forEach((el) => toggleClass(el, cls, s));\n  }\n}\n","import { ACTION_ON, ACTION_OFF, ACTION_EMIT, ACTION_ONCE } from \"./constants\";\nimport { isString, isObject } from \"./is\";\nimport { closest, each } from \"./dom\";\nimport { strToArray, arrayFrom } from \"./utils\";\n\nconst getOptsObj = (args, newOpts) => {\n  args = arrayFrom(args);\n  const optsPosition = isString(args[2]) ? 4 : 3;\n  let opts = args[optsPosition];\n  opts = isObject(opts) ? opts : { capture: !!opts };\n  args[optsPosition] = { ...opts, ...newOpts };\n  return args;\n};\n\nclass EventHandler {\n  constructor() {\n    this.eventsSet = new Set();\n    for (const name of [ACTION_ON, ACTION_OFF, ACTION_EMIT, ACTION_ONCE]) {\n      this[name] = this[name].bind(this);\n    }\n    this._id = 0;\n  }\n  getNamespaces(eventFullName) {\n    let [event, ...namespace] = eventFullName.split(/\\.(?![^([]*[\\]])/);\n    namespace = namespace?.join(\".\");\n    event = event.replace(/[[\\]']+/g, \"\");\n    return { eventFullName, event, namespace };\n  }\n  on(elems, events, ...params) {\n    let [_handler, _opts] = params;\n    let deligate;\n\n    if (isString(_handler)) {\n      [deligate, _handler, _opts] = params;\n    }\n    if (!isObject(_opts)) {\n      _opts = { capture: !!_opts };\n    }\n\n    _handler = ((fn) => (e) => {\n      fn(e, e.detail);\n    })(_handler);\n\n    elems = each(elems, (elem) => {\n      events = isString(events)\n        ? strToArray(events)\n        : isObject(events)\n        ? [events]\n        : events;\n      events.forEach((eventFullName) => {\n        const id = this._id++;\n        const opts = { ..._opts };\n        let handler = _handler;\n\n        const { event, namespace } = isString(eventFullName)\n          ? this.getNamespaces(eventFullName)\n          : eventFullName;\n\n        if (opts.once) {\n          handler = ((fn) => (e) => {\n            this.offId(id);\n            fn(e);\n          })(handler);\n        }\n        opts.once = false;\n\n        if (deligate) {\n          const isSelector = isString(deligate);\n          handler = ((fn) => (e) => {\n            e.deligateTarget = isSelector\n              ? e.target.closest(deligate)\n              : closest(e.target, deligate);\n            if (e.deligateTarget) {\n              fn(e);\n            }\n          })(handler);\n        }\n\n        elem.addEventListener(event, handler, opts);\n        this.eventsSet.add({\n          id,\n          elem,\n          eventFullName,\n          event,\n          namespace,\n          handler,\n          opts,\n        });\n      });\n    });\n    return elems;\n  }\n  once() {\n    return this.on(...getOptsObj(arguments, { once: true }));\n  }\n  offId(id) {\n    this.removeSets([arrayFrom(this.eventsSet).find((s) => s.id === id)]);\n  }\n  removeSets(sets, opts) {\n    sets.forEach((set) => {\n      if (!set) return;\n      set.elem.removeEventListener(set.event, set.handler, opts);\n      this.eventsSet.delete(set);\n    });\n  }\n  off(elems, events, handler, opts) {\n    const eventsSet = this.eventsSet;\n    if (!arguments.length) {\n      this.removeSets(eventsSet, opts);\n    } else {\n      return each(elems, (elem) => {\n        if (events) {\n          strToArray(events).forEach((eventFullName) => {\n            const { event, namespace } = this.getNamespaces(eventFullName);\n            const sets = arrayFrom(eventsSet).filter(\n              (set) =>\n                set.elem === elem &&\n                (!namespace || set.namespace === namespace) &&\n                (!event || set.event === event) &&\n                (!handler || set.handler === handler),\n            );\n\n            this.removeSets(sets, opts);\n          });\n        } else {\n          this.removeSets(\n            [...eventsSet].filter((e) => e.elem === elem),\n            opts,\n          );\n        }\n      });\n    }\n  }\n  emit(elems, events, opts) {\n    each(elems, (elem) => {\n      strToArray(events).forEach((event) => {\n        elem.dispatchEvent(new CustomEvent(event, opts));\n      });\n    });\n  }\n}\n\nexport { EventHandler };\n","import { PX, EVENT_CHANGE } from \"./constants\";\nimport { mergeDeep } from \"./utils\";\n\nclass Breakpoints {\n  static mql = {};\n  static instances = new Set();\n  constructor(breakpoints, opts) {\n    const unit = opts.unit ?? PX;\n    this._onResize = this._onResize.bind(this);\n    breakpoints = Object.entries(breakpoints).sort((a, b) => a[0] - b[0]);\n    this.mql = breakpoints.map(([width, data], i) => {\n      width = +width;\n      const media = !i\n        ? `not all and (min-width:${breakpoints[i + 1][0]}${unit})`\n        : `(min-width:${width}${unit})`;\n      const mq = (this.constructor.mql[width] ||= window.matchMedia(media));\n      mq.addEventListener(EVENT_CHANGE, this._onResize);\n      return { mq, width, data };\n    });\n    this.breakpoints = breakpoints;\n    this.opts = opts;\n    this._onResize();\n    this.constructor.instances.add(this);\n  }\n  _onResize(e) {\n    if (!e || e.matches) {\n      this.checkBreakpoints();\n    }\n  }\n  checkBreakpoints(ignoreConditions) {\n    const { opts, breakpoint, mql } = this;\n    let currentData, newBreakpoint;\n    for (const { width, data, mq } of mql) {\n      if (width && !mq.matches) break;\n      newBreakpoint = [data, width];\n      currentData = mergeDeep(currentData ?? data, data);\n    }\n    if (ignoreConditions || !breakpoint || breakpoint[1] !== newBreakpoint[1]) {\n      this.breakpoint = newBreakpoint;\n      opts.onUpdate && opts.onUpdate(newBreakpoint, currentData);\n    }\n\n    return this.breakpoint;\n  }\n  destroy() {\n    this.mql.forEach(({ mq }) =>\n      mq.removeEventListener(EVENT_CHANGE, this._onResize),\n    );\n    this.constructor.instances.delete(this);\n  }\n}\n\nexport default Breakpoints;\n","import {\n  DATA_UI_PREFIX,\n  EVENT_BREAKPOINT,\n  ACTION_TOGGLE,\n  ACTION_SHOW,\n  ACTION_HIDE,\n  ACTION_INIT,\n  ACTION_DESTROY,\n  ACTION_UPDATE,\n  ACTION_ON,\n  ACTION_OFF,\n  ACTION_EMIT,\n  ACTION_ONCE,\n  doc,\n} from \"./constants\";\nimport { isArray, isFunction, isHTML, isString } from \"./is\";\nimport { getElement, fragment } from \"./dom\";\nimport {\n  mergeDeep,\n  uuidGenerator,\n  callOrReturn,\n  getDataSelector,\n  getOption,\n  arrayFrom,\n} from \"./utils\";\nimport { EventHandler } from \"./EventHandler\";\nimport Breakpoints from \"./Breakpoints\";\n\nclass Base {\n  static allInstances = new Map();\n  constructor({ elem, opts }) {\n    if (isFunction(opts)) {\n      opts = opts(elem);\n    }\n    opts ??= {};\n    const { NAME, BASE_NODE_NAME, Default, _data, allInstances } =\n      this.constructor;\n    const baseElemName = BASE_NODE_NAME ?? NAME;\n\n    let dataName = opts.data;\n    let dataValue = dataName && _data[dataName];\n    let datasetValue, isDataObject;\n\n    if (elem == null) {\n      opts = mergeDeep(Default, callOrReturn(dataValue, elem), opts);\n      elem = opts.template(opts);\n      this._fromTemplate = true;\n    } else if (elem) {\n      if (isHTML(elem)) {\n        elem = fragment(elem);\n        this._fromHTML = true;\n      } else if (isString(elem)) {\n        elem = doc.querySelector(elem);\n      }\n      datasetValue = elem.getAttribute(DATA_UI_PREFIX + NAME)?.trim() || \"\";\n      isDataObject = datasetValue[0] === \"{\";\n      dataName ||= !isDataObject && datasetValue;\n\n      datasetValue = isDataObject ? JSON.parse(datasetValue) : {};\n\n      if (dataName && !_data[dataName]) return;\n\n      dataValue = _data[dataName] || {};\n\n      opts = mergeDeep(\n        Default,\n        callOrReturn(dataValue, elem),\n        datasetValue,\n        opts,\n      );\n    }\n    elem = getElement(elem);\n\n    if (!elem) return;\n\n    this[baseElemName] = elem;\n\n    this.baseOpts = this.opts = opts;\n\n    this.id = elem.id ||= this.uuid = uuidGenerator(NAME + \"-\");\n    const eventHandler = new EventHandler();\n    [ACTION_ON, ACTION_OFF, ACTION_ONCE].forEach((name) => {\n      this[name] = (...params) => {\n        eventHandler[name](...params);\n        return this;\n      };\n    });\n\n    this.getOptionElem = getOption.bind(this, false);\n    this.getOptionElems = getOption.bind(this, true);\n\n    [\n      ACTION_TOGGLE,\n      ACTION_SHOW,\n      ACTION_HIDE,\n      ACTION_INIT,\n      ACTION_DESTROY,\n      ACTION_UPDATE,\n      ACTION_EMIT,\n    ].forEach((action) => (this[action] = this[action]?.bind(this)));\n\n    if (this.baseOpts.breakpoints) {\n      this._initBreakpoints();\n    } else {\n      this.init();\n    }\n\n    allInstances.set(this.id, this);\n\n    return this;\n  }\n  _initBreakpoints() {\n    this.breakpoints = new Breakpoints(\n      { 0: this.baseOpts, ...this.baseOpts.breakpoints },\n      {\n        onUpdate: (breakpoint, opts) => {\n          this.emit(EVENT_BREAKPOINT, breakpoint, this.breakpoint);\n          this.opts = breakpoint[1]\n            ? mergeDeep(opts, breakpoint[0])\n            : { ...opts };\n          delete this.opts.breakpoints;\n          if (opts.destroy) {\n            this.destroy();\n          } else if (this.isInit) {\n            this._update?.();\n          } else {\n            this.init();\n          }\n          this.breakpoint = breakpoint;\n        },\n      },\n    );\n  }\n  emit(eventName, ...detail) {\n    const { opts, base } = this;\n    const { on, eventDispatch, eventBubble, eventPrefix } = opts;\n    detail = [this, ...detail];\n    if (on) {\n      on[eventName] && on[eventName](...detail);\n      on.any && on.any(eventName, ...detail);\n    }\n\n    if (\n      isArray(eventDispatch) ? eventDispatch.includes(eventName) : eventDispatch\n    ) {\n      const bubbles =\n        (isArray(eventBubble) && eventBubble.includes(eventName)) ||\n        !!eventBubble;\n      base.dispatchEvent(\n        new CustomEvent(eventPrefix + eventName, { detail, bubbles }),\n      );\n    }\n    return this;\n  }\n  update(opts) {\n    if (opts) {\n      this.baseOpts = mergeDeep(this.baseOpts, opts);\n      if (this.breakpoints || this.baseOpts.breakpoints) {\n        this.breakpoints?.destroy();\n        this.breakpoints = false;\n        this._initBreakpoints();\n      } else {\n        this._update?.();\n      }\n      return;\n    }\n  }\n  get base() {\n    return this[this.constructor.BASE_NODE_NAME ?? this.constructor.NAME];\n  }\n  get instances() {\n    return this.constructor.instances;\n  }\n  get Default() {\n    return this.constructor.Default;\n  }\n  static get(elem) {\n    if (elem === undefined) return [...this.instances.values()];\n    for (const [id, instance] of this.instances) {\n      if ([id, instance.base].includes(elem)) {\n        return instance;\n      }\n    }\n  }\n  static getOrCreate(elem, opts) {\n    return this.get(elem, opts) || new this(elem, opts);\n  }\n  static initAll(root = doc) {\n    return arrayFrom(root.querySelectorAll(getDataSelector(this.NAME))).map(\n      (elem) => this.getOrCreate(elem),\n    );\n  }\n  static updateDefault(opts) {\n    return mergeDeep(this.Default, opts);\n  }\n  static data(name, opts) {\n    if (arguments.length === 1) {\n      opts = name;\n      name = \"\";\n    }\n    if (!opts) return this._data[name];\n    if (isArray(name)) {\n      name.forEach((data) => this.data(...data));\n    }\n    this._data[name] = opts;\n    return this;\n  }\n}\nexport default Base;\n","export default (Base, NAME) =>\n  class extends Base {\n    static _data = {};\n    static instances = new Map();\n    static get NAME() {\n      return NAME;\n    }\n    get isAnimating() {\n      return this.transition.isAnimating;\n    }\n    get isEntering() {\n      return this.transition.isEntering;\n    }\n    get isShown() {\n      return this.transition.isShown;\n    }\n    get initialPlaceNode() {\n      return (\n        this.teleport?.placeholder ?? this.transition?.placeholder ?? this.base\n      );\n    }\n    async hide(opts) {\n      return this.toggle(false, opts);\n    }\n    async show(opts) {\n      return this.toggle(true, opts);\n    }\n    static async toggle(id, s, opts) {\n      return this.instances.get(id)?.toggle(s, opts);\n    }\n    static async show(id, opts) {\n      return this.instances.get(id)?.show(opts);\n    }\n    static async hide(id, opts) {\n      return this.instances.get(id)?.hide(opts);\n    }\n  };\n","import {\n  UI,\n  UI_PREFIX,\n  VAR_UI_PREFIX,\n  HIDDEN,\n  SHOWN,\n  WIDTH,\n  HEIGHT,\n  CLASS,\n  PX,\n  ACTION_DESTROY,\n  ACTION_ADD,\n  ACTION_REMOVE,\n  NONE,\n  FLOATING_DATA_ATTRIBUTE,\n  OPTION_KEEP_PLACE,\n  BEFORE_ENTER,\n  ENTER,\n  ENTER_ACTIVE,\n  ENTER_FROM,\n  ENTER_TO,\n  AFTER_ENTER,\n  BEFORE_LEAVE,\n  LEAVE,\n  LEAVE_ACTIVE,\n  LEAVE_FROM,\n  LEAVE_TO,\n  AFTER_LEAVE,\n  HIDDEN_MODE,\n  DURATION,\n  TRANSITION,\n  NAME,\n  doc,\n} from \"./constants\";\nimport { toggleClass, removeClass, inDOM } from \"./dom\";\nimport { isString, isFunction, isObject } from \"./is\";\nimport { toMs, camelToKebab, updateOptsByData, upperFirst } from \"./utils\";\n\nconst HIDDEN_CLASS = UI_PREFIX + HIDDEN;\n// const SHOWN_CLASS = UI_PREFIX + SHOWN;\nconst DATASET_DURATION = UI + upperFirst(DURATION);\nconst DATASET_DURATION_ENTER = DATASET_DURATION + upperFirst(ENTER);\nconst DATASET_DURATION_LEAVE = DATASET_DURATION + upperFirst(LEAVE);\nconst OPTION_SHOWN_CLASS = SHOWN + upperFirst(CLASS);\nconst OPTION_HIDDEN_CLASS = HIDDEN + upperFirst(CLASS);\n\nexport default class Transition {\n  static Default = {\n    name: UI,\n    css: true,\n    variablePrefix: VAR_UI_PREFIX + TRANSITION + \"-\",\n    [HIDDEN_MODE]: HIDDEN,\n    [OPTION_HIDDEN_CLASS]: \"\",\n    [OPTION_SHOWN_CLASS]: \"\",\n    [ENTER]: null,\n    [BEFORE_ENTER]: null,\n    [ENTER_ACTIVE]: null,\n    [ENTER_FROM]: null,\n    [ENTER_TO]: null,\n    [AFTER_ENTER]: null,\n    [BEFORE_LEAVE]: null,\n    [LEAVE_ACTIVE]: null,\n    [AFTER_LEAVE]: null,\n    [DURATION]: null,\n    [OPTION_KEEP_PLACE]: true,\n  };\n  constructor(elem, opts = {}, defaultOpts) {\n    this.elem = elem;\n    this.updateConfig(opts, defaultOpts);\n    this.promises = [];\n    if (this.opts[HIDDEN_MODE] === ACTION_REMOVE && elem[HIDDEN]) {\n      this.toggleRemove(false);\n      elem[HIDDEN] = false;\n    } else {\n      this.setFinishClass();\n    }\n    this.isInit = true;\n  }\n  updateConfig(opts, defaultOpts = {}) {\n    const elem = this.elem;\n    const defaultConfig = Transition.Default;\n    const dataset = elem.dataset;\n\n    const datasetData = {};\n\n    const duration = dataset[DATASET_DURATION];\n    const durationEnter = dataset[DATASET_DURATION_ENTER];\n    const durationLeave = dataset[DATASET_DURATION_LEAVE];\n    if (duration || durationEnter || durationLeave) {\n      datasetData.duration =\n        durationEnter || durationLeave\n          ? {\n              enter: toMs(durationEnter ?? duration),\n              leave: toMs(durationLeave ?? duration),\n            }\n          : toMs(duration);\n    }\n\n    opts = isString(opts) ? { name: opts } : opts;\n    opts = { ...defaultConfig, ...defaultOpts, ...opts, ...datasetData };\n\n    this.opts = updateOptsByData(opts, elem.dataset, [\n      HIDDEN_MODE,\n      OPTION_HIDDEN_CLASS,\n      OPTION_SHOWN_CLASS,\n      ENTER_ACTIVE,\n      ENTER_FROM,\n      ENTER_TO,\n      LEAVE_ACTIVE,\n      LEAVE_FROM,\n      LEAVE_TO,\n      [NAME, TRANSITION + \"Name\"],\n    ]);\n\n    this.teleport = opts.teleport;\n\n    if (opts[HIDDEN_MODE] !== CLASS) {\n      removeClass(elem, HIDDEN_CLASS);\n    }\n\n    return this;\n  }\n  toggleVariables(s) {\n    const { offsetWidth, offsetHeight, style } = this.elem;\n    const rect = [offsetWidth, offsetHeight];\n    [WIDTH, HEIGHT].forEach((name, i) => {\n      const prop = this.opts.variablePrefix + name;\n      if (s) {\n        style.setProperty(prop, rect[i] + PX);\n      } else {\n        style.removeProperty(prop);\n      }\n    });\n    return this;\n  }\n\n  toggleAnimationClasses(s) {\n    this.elem.style.transition = NONE;\n    this.setClasses([s ? ENTER_FROM : LEAVE_FROM]);\n    this.elem.offsetWidth;\n    this.elem.style.transition = \"\";\n    this.setClasses([s ? ENTER_ACTIVE : LEAVE_ACTIVE, s ? ENTER_TO : LEAVE_TO]);\n    return this;\n  }\n  setFinishClasses(s) {\n    this.removeClasses(s);\n    this.promises.length = 0;\n  }\n  removeClasses() {\n    this.setClasses(null);\n  }\n\n  get isShown() {\n    const { elem, opts } = this;\n    const mode = opts[HIDDEN_MODE];\n    return opts[HIDDEN_MODE] === ACTION_REMOVE\n      ? inDOM(elem)\n      : mode === CLASS\n      ? !elem.classList.contains(HIDDEN_CLASS)\n      : !elem.hasAttribute(mode);\n  }\n  setClasses(animations) {\n    const { elem, opts } = this;\n    const classes = [\"\", \"\"];\n    const styles = [{}, {}];\n    let hasStyle = false;\n    let hasClass = false;\n    [\n      ENTER_ACTIVE,\n      ENTER_FROM,\n      ENTER_TO,\n      LEAVE_ACTIVE,\n      LEAVE_FROM,\n      LEAVE_TO,\n    ].forEach((state) => {\n      const s = animations?.includes(state) | 0;\n      if (isObject(opts[state])) {\n        hasStyle = true;\n        styles[s] = { ...styles[s], ...opts[state] };\n      } else {\n        hasClass = true;\n        classes[s] +=\n          (opts[state] ??\n            (opts.name ? opts.name + \"-\" + camelToKebab(state) : \"\")) + \" \";\n      }\n    });\n    if (hasClass) {\n      classes.forEach((classes, s) =>\n        elem.classList[s ? ACTION_ADD : ACTION_REMOVE](\n          ...classes.split(\" \").filter(Boolean),\n        ),\n      );\n    }\n    if (hasStyle) {\n      styles.forEach((styles, s) => {\n        Object.entries(styles).forEach(([name, value]) => {\n          if (name[0] !== \"-\") {\n            name = camelToKebab(name);\n          }\n          if (s) {\n            elem.style.setProperty(name, value);\n          } else {\n            elem.style.removeProperty(name);\n          }\n        });\n      });\n    }\n  }\n  getPromises(s) {\n    const { elem, promises, opts } = this;\n    const state = s ? ENTER : LEAVE;\n    const duration = opts.duration?.[state] ?? opts.duration;\n    promises.length = 0;\n    let promisesEvent, promisesAnimation;\n    if (isFunction(opts[state])) {\n      promisesEvent = new Promise((resolve) => opts[state](elem, resolve));\n    }\n    let animations;\n    if (opts.css) {\n      animations = elem.getAnimations();\n      promisesAnimation =\n        animations.length &&\n        Promise.allSettled(animations.map(({ finished }) => finished));\n    }\n\n    if (!duration && !promisesEvent && !promisesAnimation) return promises;\n\n    const promisesDuration =\n      !isNaN(duration) && duration != null\n        ? new Promise((resolve) => setTimeout(resolve, duration))\n        : null;\n\n    promisesDuration && promises.push(promisesDuration);\n    promisesEvent && promises.push(promisesEvent);\n    promisesAnimation && promises.push(promisesAnimation);\n\n    this.animations = animations;\n\n    return promises;\n  }\n  get isAnimating() {\n    return !!this.promises.length;\n  }\n  cancel() {\n    // this.cancelAnimations = this.animations?.map((animation) => {\n    //    const { effect, currentTime, transitionProperty, animationName } = animation;\n    //    return {\n    //       animationName,\n    //       transitionProperty,\n    //       currentTime,\n    //       ...effect.getTiming(),\n    //    };\n    // });\n    this.animations?.forEach((animation) => animation.cancel());\n    return this.getAwaitPromises();\n  }\n  getAwaitPromises() {\n    return Promise.allSettled(this.promises);\n  }\n  toggleRemove(s = this.isEntering) {\n    const { elem, opts } = this;\n    const mode = opts[HIDDEN_MODE];\n    if (mode === ACTION_REMOVE) {\n      if (s) {\n        if (opts[OPTION_KEEP_PLACE]) {\n          this.placeholder?.replaceWith(elem);\n          this.placeholder = null;\n        } else {\n          this.parent?.append(elem);\n        }\n      } else {\n        if (opts[OPTION_KEEP_PLACE]) {\n          elem.replaceWith(\n            (this.placeholder ||= doc.createComment(\n              UI_PREFIX + TRANSITION + \":\" + elem.id,\n            )),\n          );\n        } else {\n          const parent = elem.parentElement;\n          if (parent) {\n            this.parent = parent.hasAttribute(FLOATING_DATA_ATTRIBUTE)\n              ? parent.parentElement\n              : parent;\n            elem.remove();\n          }\n        }\n      }\n    } else if (mode !== ACTION_DESTROY && mode !== CLASS) {\n      elem.toggleAttribute(mode, !s);\n    }\n  }\n  setFinishClass(s = this.isShown) {\n    const { elem, opts } = this;\n\n    if (opts[HIDDEN_MODE] === CLASS) {\n      toggleClass(elem, HIDDEN_CLASS, !s);\n    }\n    opts[OPTION_HIDDEN_CLASS] &&\n      toggleClass(elem, opts[OPTION_HIDDEN_CLASS], !s);\n    opts[OPTION_SHOWN_CLASS] && toggleClass(elem, opts[OPTION_SHOWN_CLASS], s);\n  }\n  async run(\n    s,\n    animated = true,\n    { show, hide, shown, hidden, destroy, allowRemove = true } = {},\n  ) {\n    const { elem, opts } = this;\n    if (!elem) return;\n\n    this.isEntering = s;\n    // this.cancelAnimations = null;\n\n    opts[s ? BEFORE_ENTER : BEFORE_LEAVE]?.(elem);\n\n    const toggle = (s) => {\n      allowRemove && this.toggleRemove(s);\n      this.setFinishClass(s);\n      if (!s && opts[HIDDEN_MODE] === ACTION_DESTROY) {\n        this.destroy();\n        destroy?.(elem);\n      }\n    };\n\n    if (s) {\n      toggle(s);\n      show?.(elem);\n    } else {\n      hide?.(elem);\n    }\n\n    if (animated) {\n      opts.css && this.toggleVariables(true).toggleAnimationClasses(s);\n      this.getPromises(s);\n      if (this.promises.length) {\n        await this.getAwaitPromises();\n      }\n      opts.css && this.toggleVariables(false).setFinishClasses(s);\n    }\n\n    if (s) {\n      shown?.(elem);\n    } else {\n      hidden?.(elem);\n      toggle(s);\n    }\n\n    opts[s ? AFTER_ENTER : AFTER_LEAVE]?.(elem);\n  }\n  destroy() {\n    this.removeClasses();\n    this.placeholder?.replaceWith(this.elem);\n    this.isInit = false;\n  }\n  static createOrUpdate(transition, elem, opts, defaultOpts) {\n    return transition\n      ? transition.update(opts, defaultOpts)\n      : new Transition(elem, opts, defaultOpts);\n  }\n}\n","import {\n  UI_PREFIX,\n  OPTION_TO,\n  OPTION_POSITION,\n  OPTION_KEEP_PLACE,\n  doc,\n} from \"./constants\";\nimport { isString, isObject } from \"./is\";\nimport {\n  mergeDeep,\n  callOrReturn,\n  updateOptsByData,\n  upperFirst,\n  kebabToCamel,\n} from \"./utils\";\nconst TELEPORT = \"teleport\";\nconst TELEPORT_DATA_ATTRIBUTE = kebabToCamel(UI_PREFIX + TELEPORT);\nconst TELEPORT_DATA_ATTRIBUTES = [\n  [OPTION_TO, TELEPORT],\n  [OPTION_POSITION, TELEPORT + upperFirst(OPTION_POSITION)],\n  [OPTION_KEEP_PLACE, TELEPORT + upperFirst(OPTION_KEEP_PLACE)],\n];\n\nclass Teleport {\n  static Default = {\n    [OPTION_TO]: false,\n    [OPTION_POSITION]: \"beforeend\",\n    [OPTION_KEEP_PLACE]: true,\n  };\n  constructor(elem, opts = {}, defaultOpts) {\n    this.elem = elem;\n    this.update(opts, defaultOpts);\n  }\n  update(opts, defaultOpts = {}) {\n    const dataset = this.elem.dataset;\n    const defaultConfig = this.constructor.Default;\n    if (opts === false && !dataset[TELEPORT_DATA_ATTRIBUTE]) {\n      return this.destroy();\n    }\n    opts = isObject(opts) ? opts : { to: opts };\n    opts = mergeDeep(defaultConfig, defaultOpts, opts);\n    this.opts = updateOptsByData(opts, dataset, TELEPORT_DATA_ATTRIBUTES);\n    return this;\n  }\n  move(...toParameters) {\n    const { opts, elem } = this;\n    let { to, position, keepPlace } = opts;\n    to = callOrReturn(to, ...toParameters);\n    to = isString(to) ? doc.querySelector(to) : to;\n    if (!to) return;\n    this.placeholder ||= keepPlace\n      ? doc.createComment(UI_PREFIX + TELEPORT + \":\" + elem.id)\n      : null;\n    if (this.placeholder) {\n      elem.before(this.placeholder);\n    }\n    to.insertAdjacentElement(position, elem);\n    return this;\n  }\n  destroy() {\n    this.reset();\n  }\n  reset() {\n    this.placeholder?.replaceWith(this.elem);\n    this.placeholder = null;\n    return this;\n  }\n  static createOrUpdate(teleport, elem, opts, defaultOpts) {\n    return teleport\n      ? teleport.update(opts, defaultOpts)\n      : opts !== false || elem.dataset[TELEPORT_DATA_ATTRIBUTE]\n      ? new Teleport(elem, opts, defaultOpts)\n      : null;\n  }\n}\nexport default Teleport;\n","import { DATA_UI_PREFIX, DISMISS, EVENT_CLICK } from \"../constants\";\nimport { isString } from \"../is\";\nconst eventName = EVENT_CLICK + \".\" + DISMISS;\nexport default function (\n  instance,\n  elem = instance.base,\n  action = instance.hide,\n) {\n  if (instance._dismiss) {\n    instance.off(elem, eventName);\n  }\n  if (instance.opts[DISMISS]) {\n    instance.on(\n      elem,\n      eventName,\n      isString(instance.opts[DISMISS])\n        ? instance.opts[DISMISS]\n        : `[${DATA_UI_PREFIX + DISMISS}=\"\"],[${DATA_UI_PREFIX + DISMISS}=\"${\n            instance.constructor.NAME\n          }\"]`,\n      (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        action({ event, trigger: event.deligateTarget });\n      },\n    );\n    instance._dismiss = true;\n  }\n}\n","import { EVENT_KEYDOWN, KEY_ESC, CANCEL } from \"../constants\";\nconst eventName = EVENT_KEYDOWN + \".escapeHide\";\n\nexport default function (instance, s, elem = instance.base) {\n  if (s) {\n    instance.on(elem, eventName, (event) => {\n      if (event.keyCode === KEY_ESC) {\n        (instance.opts.escapeHide.stop ?? true) && event.stopPropagation();\n        instance.hide({ event });\n        instance.emit(CANCEL, { event });\n      }\n    });\n  } else {\n    instance.off(elem, eventName);\n  }\n}\n","import { doc, OPTION_PREVENT_SCROLL, SUPPORTS_DIALOG } from \"../constants\";\nexport default ({ opts: { autofocus }, getOptionElem, base }, elem = base) => {\n  if (elem.contains(doc.activeElement)) return;\n  let focusElem = getOptionElem(autofocus.elem, elem);\n  const isDialog = elem.tagName === \"DIALOG\";\n  if (\n    (!focusElem && autofocus.required && !isDialog) ||\n    (isDialog && !SUPPORTS_DIALOG)\n  ) {\n    focusElem = getOptionElem(autofocus.focusableElements, elem);\n  }\n  focusElem?.focus({\n    [OPTION_PREVENT_SCROLL]: autofocus[OPTION_PREVENT_SCROLL] ?? false,\n  });\n};\n","import { EVENT_DESTROY, ID, MODAL } from \"../constants\";\n\nexport default (\n  instance,\n  {\n    remove = false,\n    keepInstance = false,\n    destroyTransition = true,\n    destroyTeleport = true,\n  } = {},\n) => {\n  const {\n    base,\n    off,\n    emit,\n    autohide,\n    transition,\n    floating,\n    teleport,\n    id,\n    uuid,\n    instances,\n    breakpoints,\n  } = instance;\n\n  if (autohide) {\n    autohide.destroy();\n    instance.autohide = null;\n  }\n  if (floating) {\n    floating.destroy();\n    instance.floating = null;\n  }\n  if (destroyTransition && transition) {\n    transition.destroy();\n    if (instance.constructor.NAME === MODAL) {\n      instance.transitions = null;\n    } else {\n      instance.transition = null;\n    }\n  }\n  if (destroyTeleport && teleport) {\n    teleport.destroy();\n    instance.teleport = null;\n  }\n\n  off();\n\n  if (!keepInstance) {\n    base.id.includes(uuid) && base.removeAttribute(ID);\n    breakpoints?.destroy();\n    instances.delete(id);\n  }\n  if (remove) {\n    base.remove();\n  }\n\n  emit(EVENT_DESTROY);\n  instance.isInit = false;\n  return instance;\n};\n","import {\n  HOVER,\n  FOCUS,\n  CLICK,\n  EVENT_CLICK,\n  EVENT_MOUSEENTER,\n  EVENT_MOUSELEAVE,\n  EVENT_FOCUSOUT,\n  EVENT_FOCUSIN,\n} from \"../constants\";\nimport { isArray } from \"../is\";\n\nexport default ({\n  anchor,\n  target,\n  instance,\n  trigger,\n  action = instance.toggle,\n  delay,\n}) => {\n  const { opts, on } = instance;\n  trigger ??= opts.trigger;\n  delay ??= opts.delay;\n  const triggerClick = trigger.includes(CLICK);\n  const triggerHover = trigger.includes(HOVER);\n  const triggerFocus = trigger.includes(FOCUS);\n  const events = [];\n  if (triggerHover || triggerFocus) {\n    delay = isArray(delay) ? delay : [delay, delay];\n  }\n  if (triggerClick) {\n    on(anchor, EVENT_CLICK, (event) =>\n      action(null, { event, trigger: anchor }),\n    );\n  }\n  if (triggerHover) {\n    events.push(EVENT_MOUSEENTER, EVENT_MOUSELEAVE);\n  }\n  if (triggerFocus) {\n    events.push(EVENT_FOCUSIN, EVENT_FOCUSOUT);\n  }\n  if (triggerHover || triggerFocus) {\n    on([anchor, target], events, (event) => {\n      const { type, target } = event;\n      const isFocus = type === EVENT_FOCUSIN || type === EVENT_FOCUSOUT;\n      const entered =\n        (triggerHover && type === EVENT_MOUSEENTER) ||\n        (triggerFocus && type === EVENT_FOCUSIN);\n      const d = isFocus ? 0 : delay[entered ? 0 : 1];\n      clearTimeout(instance._hoverTimer);\n      if (d) {\n        instance._hoverTimer = setTimeout(\n          () => action(entered, { trigger: anchor, event }),\n          d,\n        );\n      } else {\n        action(entered, { event, trigger: target });\n      }\n    });\n  }\n};\n","import {\n  VAR_UI_PREFIX,\n  NONE,\n  WIDTH,\n  HEIGHT,\n  ANCHOR,\n  TOP,\n  LEFT,\n  PX,\n  DIV,\n  AVAILABLE_WIDTH,\n  AVAILABLE_HEIGHT,\n  body,\n  DATA_PREFIX,\n  UI_PREFIX,\n  EVENT_SCROLL,\n  EVENT_RESIZE,\n  FLOATING_DATA_ATTRIBUTE,\n  DATA_UI_PREFIX,\n  INERT,\n  DIALOG,\n  SUPPORTS_DIALOG,\n  ABSOLUTE,\n  FIXED,\n  CANCEL,\n  FLIP,\n  SHRINK,\n  STICKY,\n  PLACEMENT,\n  PADDING,\n  OFFSET,\n  BOUNDARY_OFFSET,\n  ARROW,\n  WEBKIT_PREFIX,\n  CLIP_PATH,\n  ARROW_OFFSET,\n  ARROW_PADDING,\n  TRUE,\n  TOOLTIP,\n  DROPDOWN,\n  POPOVER,\n  STYLE,\n  doc,\n} from \"./constants\";\nimport {\n  createElement,\n  kebabToCamel,\n  createInset,\n  getPosition,\n  returnArray,\n  isOverflowElement,\n  observeResize,\n  resizeObserver,\n} from \"./utils\";\nimport { EventHandler } from \"./EventHandler\";\nimport { parents, setAttribute } from \"./dom\";\n\nconst CLIP_PATH_PROPERTY = CSS.supports(CLIP_PATH + \":\" + NONE)\n  ? CLIP_PATH\n  : WEBKIT_PREFIX + CLIP_PATH;\nconst valuesToArray = ({ value }) => value.trim().split(\" \").map(parseFloat);\nconst registerProperty = CSS.registerProperty;\n\nlet css = \"\";\n[TOOLTIP, DROPDOWN, POPOVER].forEach((name) => {\n  const PREFIX = VAR_UI_PREFIX + name + \"-\";\n  [\n    STICKY,\n    FLIP,\n    SHRINK,\n    PLACEMENT,\n    PADDING,\n    OFFSET,\n    BOUNDARY_OFFSET,\n    ARROW_OFFSET,\n    ARROW_PADDING,\n  ].forEach((prop) => {\n    if (registerProperty) {\n      registerProperty({\n        name: PREFIX + prop,\n        syntax: \"*\",\n        inherits: false,\n      });\n    } else {\n      css += PREFIX + prop + \":;\";\n    }\n  });\n});\nif (!registerProperty) {\n  doc.head.appendChild(createElement(STYLE, false, `*{${css}}`));\n}\n\nexport default class Floating {\n  constructor({ target, anchor, arrow, opts, root = body, name = \"\" }) {\n    const { on, off } = new EventHandler();\n    Object.assign(this, { target, anchor, arrow, opts, root, name, on, off });\n  }\n  recalculate() {\n    const { target, anchor, arrow, opts, name } = this;\n    const anchorScrollParents = parents(anchor, isOverflowElement);\n    const targetStyles = getComputedStyle(target);\n    const anchorStyles = getComputedStyle(anchor);\n    const PREFIX = VAR_UI_PREFIX + name + \"-\";\n\n    const minHeight = parseFloat(targetStyles.minHeight);\n    const minWidth = parseFloat(targetStyles.minWidth);\n\n    let [sticky, flip, shrink, placement] = [\n      STICKY,\n      FLIP,\n      SHRINK,\n      PLACEMENT,\n    ].map(\n      (name) =>\n        anchorStyles.getPropertyValue(PREFIX + name).trim() ||\n        targetStyles.getPropertyValue(PREFIX + name).trim(),\n    );\n\n    flip = flip\n      ? flip.split(\" \").map((v) => v === TRUE)\n      : returnArray(opts[FLIP]);\n    sticky = sticky ? sticky === TRUE : opts[STICKY];\n    shrink = shrink ? shrink === TRUE : opts[SHRINK];\n\n    placement =\n      anchor.getAttribute(`${DATA_UI_PREFIX + name}-${PLACEMENT}`)?.trim() ||\n      placement ||\n      opts[PLACEMENT];\n\n    const absolute = opts[ABSOLUTE];\n    const valuesNames = [\n      PADDING,\n      OFFSET,\n      BOUNDARY_OFFSET,\n      ARROW_OFFSET,\n      ARROW_PADDING,\n    ];\n    const values = valuesNames\n      .map((name) => {\n        let value = targetStyles.getPropertyValue(PREFIX + name).trim();\n        if (!value) return;\n        value = value.split(\" \");\n        if (name === BOUNDARY_OFFSET) {\n          value = createInset(value, true);\n        } else {\n          value[1] ??= value[0];\n        }\n        return { name, value };\n      })\n      .filter(Boolean);\n\n    const polygonValues = values\n      .map(({ name, value }) => {\n        if (name === BOUNDARY_OFFSET) {\n          const valueEnd = value.splice(2).join(\" \");\n          value = value.join(\" \");\n          return [value, valueEnd].join(\",\");\n        }\n        return value.join(\" \");\n      })\n      .join(\",\");\n\n    const wrapper = this.createWrapper(\n      values.length\n        ? { [CLIP_PATH_PROPERTY]: `polygon(${polygonValues})` }\n        : {},\n    );\n    const wrapperComputedStyle = getComputedStyle(this.wrapper);\n    const wrapperStyle = wrapper.style;\n\n    const computedValues = wrapperComputedStyle[CLIP_PATH_PROPERTY].slice(8, -1)\n      .split(\",\")\n      .values();\n\n    const {\n      padding,\n      offset = opts.offset,\n      boundaryOffset = opts.boundaryOffset,\n      arrowPadding = opts[ARROW]?.padding ?? 0,\n      arrowOffset = opts[ARROW]?.offset ?? 0,\n    } = values.length\n      ? Object.fromEntries(\n          values.map(({ name }) => {\n            let value = valuesToArray(computedValues.next());\n            if (name === BOUNDARY_OFFSET) {\n              value = [...value, ...valuesToArray(computedValues.next())];\n            } else if (name === OFFSET || name === ARROW_OFFSET) {\n              value = value[0];\n            }\n            return [kebabToCamel(name), value];\n          }),\n        )\n      : {};\n\n    if (values.length) {\n      wrapperStyle.removeProperty(CLIP_PATH_PROPERTY);\n    }\n\n    const arrowRect = arrow && arrow.getBoundingClientRect();\n    let anchorRect = anchor.getBoundingClientRect();\n\n    const targetRect = {};\n    [WIDTH, HEIGHT].forEach((size) => {\n      targetRect[size] = parseFloat(wrapperComputedStyle[size]);\n      wrapperStyle.setProperty(PREFIX + size, targetRect[size] + PX);\n      wrapperStyle.setProperty(\n        PREFIX + ANCHOR + \"-\" + size,\n        anchorRect[size] + PX,\n      );\n    });\n\n    const arrowData = arrow && {\n      [WIDTH]: arrowRect[WIDTH],\n      [HEIGHT]: arrowRect[HEIGHT],\n      [PADDING]: arrowPadding,\n      [OFFSET]: arrowOffset,\n    };\n\n    const params = {\n      anchorRect,\n      targetRect,\n      arrow: arrowData,\n      placement,\n      absolute,\n      flip,\n      sticky,\n      shrink,\n      offset,\n      boundaryOffset,\n      padding,\n      minHeight,\n      minWidth,\n    };\n\n    const updatePosition = () => {\n      anchorRect = anchor.getBoundingClientRect().toJSON();\n\n      if (absolute) {\n        anchorRect.left = anchor.offsetLeft;\n        anchorRect.top = anchor.offsetTop;\n      }\n\n      const position = getPosition({ ...params, anchorRect });\n\n      setAttribute(\n        wrapper,\n        DATA_UI_PREFIX + \"current-\" + PLACEMENT,\n        position.placement,\n      );\n\n      if (shrink) {\n        [AVAILABLE_WIDTH, AVAILABLE_HEIGHT].forEach((name) =>\n          wrapperStyle.setProperty(PREFIX + name, position[name] + PX),\n        );\n      }\n      if (arrow) {\n        [LEFT, TOP].forEach((dir, i) =>\n          wrapperStyle.setProperty(\n            PREFIX + ARROW + \"-\" + dir,\n            position.arrow[i] + PX,\n          ),\n        );\n      }\n      wrapperStyle.setProperty(\n        PREFIX + \"transform-origin\",\n        position.transformOrigin[0] +\n          PX +\n          \" \" +\n          position.transformOrigin[1] +\n          PX,\n      );\n\n      wrapperStyle.transform = `translate3d(${position.left}px,${position.top}px,0)`;\n    };\n\n    observeResize(target, (width, height) => {\n      targetRect[WIDTH] = width;\n      targetRect[HEIGHT] = height;\n      updatePosition();\n    });\n\n    updatePosition();\n\n    this.on(anchorScrollParents, EVENT_SCROLL, () => {\n      updatePosition();\n    });\n    this.on(window, [EVENT_SCROLL, EVENT_RESIZE], updatePosition);\n    this.updatePosition = updatePosition.bind(this);\n    return this;\n  }\n  createWrapper(style = {}) {\n    const {\n      target,\n      root,\n      name,\n      on,\n      off,\n      opts: { absolute, interactive, mode, topLayer, escapeHide },\n    } = this;\n    const attributes = {\n      style: {\n        position: absolute ? ABSOLUTE : FIXED,\n        top: 0,\n        left: 0,\n        zIndex: 999,\n        margin: 0,\n        padding: 0,\n        background: NONE,\n        maxWidth: NONE,\n        maxHeight: NONE,\n        willChange: \"transform\",\n        width: \"fit-content\",\n        height: \"fit-content\",\n        minWidth: \"max-content\",\n        display: \"block\",\n        overflow: \"unset\",\n        ...style,\n      },\n      [FLOATING_DATA_ATTRIBUTE]: \"\",\n      [DATA_PREFIX + UI_PREFIX + name + \"-wrapper\"]: \"\",\n    };\n\n    if (interactive !== undefined && !interactive) {\n      attributes[INERT] = \"\";\n      attributes.style.pointerEvents = NONE;\n    }\n    const wrapper = (this.wrapper = createElement(\n      mode === DIALOG && SUPPORTS_DIALOG ? DIALOG : DIV,\n      attributes,\n      target,\n    ));\n    root.append(wrapper);\n    if (mode === DIALOG && SUPPORTS_DIALOG) {\n      if (topLayer) {\n        wrapper.showModal();\n      } else {\n        wrapper.show();\n      }\n      if (escapeHide) {\n        on(wrapper, CANCEL, (e) => e.preventDefault());\n      } else {\n        off(wrapper, CANCEL);\n      }\n    }\n    return wrapper;\n  }\n  destroy() {\n    this.off();\n    resizeObserver.unobserve(this.target);\n    this.wrapper.close?.();\n    this.wrapper.remove();\n  }\n}\n","import { EVENT_SHOW, EVENT_HIDE, ARROW, doc } from \"../constants\";\nimport { getDataSelector } from \"../utils\";\nimport { addOutsideHide, addEscapeHide } from \"../modules\";\nimport Floating from \"../Floating.js\";\n\nexport default (instance, { s, animated, silent, eventParams }) => {\n  const { transition, base, opts, toggler, emit, floating, constructor } =\n    instance;\n  const name = constructor.NAME;\n  const target = instance[name];\n  const transitionParams = { allowRemove: false };\n  transition.parent = null;\n\n  if (!silent && !s) {\n    emit(EVENT_HIDE, eventParams);\n  }\n\n  if (s) {\n    transitionParams[EVENT_SHOW] = () => {\n      const root = target.parentNode;\n      const arrow = target.querySelector(getDataSelector(name, ARROW));\n\n      instance.floating = new Floating({\n        anchor: toggler ?? base,\n        target,\n        arrow,\n        opts,\n        root,\n        name,\n      }).recalculate();\n      if (!silent) {\n        emit(EVENT_SHOW, eventParams);\n      }\n    };\n  }\n\n  !s && instance?.floating?.wrapper.close?.();\n\n  const promise = transition.run(s, animated, transitionParams);\n\n  if (s) {\n    opts.outsideHide && addOutsideHide(instance, s, [toggler ?? base, target]);\n    opts.escapeHide && addEscapeHide(instance, s, doc);\n  }\n\n  (async () => {\n    await promise;\n    if (!s) {\n      if (transition.placeholder) {\n        floating.wrapper.replaceWith(transition.placeholder);\n      }\n      floating?.destroy();\n      instance.floating = null;\n    }\n  })();\n\n  return promise;\n};\n","import { doc, EVENT_ACTION_OUTSIDE } from \"../constants\";\nimport { closest } from \"../dom\";\n\nexport default (instance, s, activeElems) => {\n  if (s) {\n    instance.on(doc, EVENT_ACTION_OUTSIDE, (event) => {\n      !closest(event.target, activeElems) && instance.hide({ event });\n    });\n  } else {\n    instance.off(doc, EVENT_ACTION_OUTSIDE);\n  }\n};\n","import { DATA_APPEAR } from \"../constants\";\nimport { callOrReturn, checkHash } from \"../utils\";\n\nexport default (instance, elem = instance.base) => {\n  const { opts, isShown, show, id } = instance;\n  const shown =\n    callOrReturn(\n      (opts.hashNavigation && checkHash(id)) || opts.shown,\n      instance,\n    ) ?? isShown;\n  shown &&\n    show({\n      animated: opts.appear ?? elem.hasAttribute(DATA_APPEAR),\n      ignoreConditions: true,\n    });\n};\n","import {\n  ROLE,\n  BUTTON,\n  A11Y,\n  ARIA_CONTROLS,\n  ARIA_EXPANDED,\n  DEFAULT_OPTIONS,\n  EVENT_BEFORE_INIT,\n  EVENT_INIT,\n  EVENT_BEFORE_DESTROY,\n  EVENT_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDE,\n  EVENT_HIDDEN,\n  EVENT_CLICK,\n  DEFAULT_AUTOFOCUS,\n  OPTION_ARIA_CONTROLS,\n  OPTION_ARIA_EXPANDED,\n  CLASS_ACTIVE,\n  CLASS_ACTIVE_SUFFIX,\n  TOGGLER,\n} from \"./helpers/constants\";\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\nimport { removeAttr, setAttribute, toggleClass } from \"./helpers/dom\";\nimport {\n  normalizeToggleParameters,\n  replaceWord,\n  arrayUnique,\n  arrayFrom,\n  getEventsPrefix,\n  getDefaultToggleSelector,\n  updateModule,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  callAutofocus,\n  callInitShow,\n} from \"./helpers/modules\";\n\nconst COLLAPSE = \"collapse\";\nconst OPTION_TOGGLER_ROLE = TOGGLER + \"Role\";\n\nclass Collapse extends ToggleMixin(Base, COLLAPSE) {\n  static DefaultA11y = {\n    [OPTION_ARIA_CONTROLS]: true,\n    [OPTION_ARIA_EXPANDED]: true,\n    [OPTION_TOGGLER_ROLE]: BUTTON,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    transition: null,\n    teleport: null,\n    eventPrefix: getEventsPrefix(COLLAPSE),\n    autofocus: DEFAULT_AUTOFOCUS,\n    hashNavigation: true,\n    dismiss: true,\n    [TOGGLER]: true,\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [COLLAPSE + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n  };\n\n  constructor(elem, opts) {\n    super({ elem, opts });\n  }\n  _update() {\n    const { base, opts, transition, teleport } = this;\n\n    addDismiss(this);\n    updateModule(this, A11Y);\n\n    this.teleport = Teleport.createOrUpdate(\n      teleport,\n      base,\n      opts.teleport,\n    )?.move(this);\n    this.transition = Transition.createOrUpdate(\n      transition,\n      base,\n      opts.transition,\n    );\n\n    this.updateTriggers();\n\n    return this;\n  }\n  destroy(destroyOpts) {\n    let {\n      opts: { a11y },\n      togglers,\n    } = this;\n\n    if (!this.isInit) return;\n\n    this.emit(EVENT_BEFORE_DESTROY);\n\n    if (a11y[OPTION_ARIA_CONTROLS]) {\n      const otherTogglers = arrayFrom(this.instances.values())\n        .filter((item) => item !== this)\n        .flatMap((item) => item.togglers.filter((t) => togglers.includes(t)));\n      if (otherTogglers.length) {\n        togglers = togglers.filter((toggler) => {\n          if (!otherTogglers.includes(toggler)) {\n            return true;\n          } else {\n            setAttribute(toggler, ARIA_CONTROLS, (v) =>\n              replaceWord(v, this.id),\n            );\n          }\n        });\n      }\n    }\n\n    removeAttr(togglers, [\n      a11y[OPTION_ARIA_CONTROLS] && ARIA_CONTROLS,\n      a11y[OPTION_ARIA_EXPANDED] && ARIA_EXPANDED,\n      a11y[ROLE] && ROLE,\n    ]);\n    baseDestroy(this, destroyOpts);\n    return this;\n  }\n\n  init() {\n    if (this.isInit) return;\n\n    this.emit(EVENT_BEFORE_INIT);\n\n    this._update();\n\n    this.instances.set(this.id, this);\n\n    this.isInit = true;\n\n    this.emit(EVENT_INIT);\n\n    return callInitShow(this);\n  }\n  updateTriggers() {\n    const { opts, id } = this;\n\n    return (this.togglers = this.getOptionElems(\n      opts[TOGGLER] === true\n        ? ({ id }) => getDefaultToggleSelector(id, true)\n        : opts[TOGGLER],\n    )\n      .filter(Boolean)\n      .map((toggler) => {\n        if (!this.togglers?.includes(toggler)) {\n          opts.a11y[OPTION_ARIA_CONTROLS] &&\n            setAttribute(toggler, ARIA_CONTROLS, (v) =>\n              v ? arrayUnique(v.split(\" \").concat(id)).join(\" \") : id,\n            );\n          opts.a11y[OPTION_TOGGLER_ROLE] &&\n            setAttribute(toggler, ROLE, opts.a11y[OPTION_TOGGLER_ROLE]);\n          toggleClass(\n            toggler,\n            opts[TOGGLER + CLASS_ACTIVE_SUFFIX],\n            this.isShown,\n          );\n          this.on(toggler, EVENT_CLICK, (event) => {\n            event.preventDefault();\n            this.toggle(null, { trigger: toggler, event });\n          });\n        }\n        return toggler;\n      }));\n  }\n  async toggle(s, params) {\n    const { base, transition, togglers, opts, emit, isEntering, isAnimating } =\n      this;\n    const { awaitAnimation, a11y } = opts;\n    const {\n      animated,\n      silent,\n      trigger,\n      event,\n      ignoreConditions,\n      ignoreAutofocus,\n    } = normalizeToggleParameters(params);\n\n    s ??= !isEntering;\n\n    if (\n      !ignoreConditions &&\n      ((awaitAnimation && isAnimating) || s === isEntering)\n    )\n      return;\n\n    if (isAnimating && !awaitAnimation) {\n      await transition.cancel();\n    }\n\n    const eventParams = { trigger, event };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    a11y[OPTION_ARIA_EXPANDED] && setAttribute(togglers, ARIA_EXPANDED, !!s);\n    toggleClass(togglers, opts[TOGGLER + CLASS_ACTIVE_SUFFIX], s);\n    toggleClass(base, opts[COLLAPSE + CLASS_ACTIVE_SUFFIX], s);\n\n    const promise = transition.run(s, animated, {\n      [s ? EVENT_SHOW : EVENT_HIDE]: () =>\n        !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, eventParams),\n      [EVENT_DESTROY]: () =>\n        this.destroy({ remove: true, destroyTransition: false }),\n    });\n\n    animated && awaitAnimation && (await promise);\n\n    s && !ignoreAutofocus && s && callAutofocus(this);\n\n    !silent && emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n    return this;\n  }\n}\n\nexport default Collapse;\n","import {\n  EVENT_INIT,\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDDEN,\n  EVENT_CLICK,\n  EVENT_KEYDOWN,\n  CLASS_ACTIVE,\n  ARIA_CONTROLS,\n  ACTION_REMOVE,\n  DROPDOWN,\n  CLICK,\n  DATA_UI_PREFIX,\n  KEY_ENTER,\n  KEY_SPACE,\n  KEY_END,\n  KEY_HOME,\n  KEY_ARROW_LEFT,\n  KEY_ARROW_UP,\n  KEY_ARROW_RIGHT,\n  KEY_ARROW_DOWN,\n  DEFAULT_AUTOFOCUS,\n  DEFAULT_FLOATING_OPTIONS,\n  DEFAULT_OPTIONS,\n  OPTION_ARIA_CONTROLS,\n  OPTION_ARIA_EXPANDED,\n  ARIA_EXPANDED,\n  KEY_TAB,\n  MODE,\n  FOCUSABLE_ELEMENTS_SELECTOR,\n  body,\n  TOGGLER,\n  CLASS_ACTIVE_SUFFIX,\n  doc,\n} from \"./helpers/constants\";\n\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport {\n  toggleClass,\n  removeClass,\n  removeAttr,\n  setAttribute,\n  closest,\n} from \"./helpers/dom\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\nimport {\n  normalizeToggleParameters,\n  isUnfocusable,\n  getDataSelector,\n  getDefaultToggleSelector,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  callAutofocus,\n  toggleOnInterection,\n  floatingTransition,\n  callInitShow,\n} from \"./helpers/modules\";\n\nclass Dropdown extends ToggleMixin(Base, DROPDOWN) {\n  static DefaultA11y = {\n    [OPTION_ARIA_CONTROLS]: true,\n    [OPTION_ARIA_EXPANDED]: true,\n  };\n  static DefaultAutofocus = {\n    elem: DEFAULT_AUTOFOCUS,\n    required: true,\n    focusableElements: FOCUSABLE_ELEMENTS_SELECTOR,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    ...DEFAULT_FLOATING_OPTIONS,\n    topLayer: true,\n    itemClickHide: true,\n    mode: false,\n    autofocus: true,\n    items: getDataSelector(DROPDOWN + \"-item\"),\n    trigger: CLICK,\n    [TOGGLER]: null,\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n  };\n\n  constructor(elem, opts = {}) {\n    super({ opts, elem });\n  }\n  init() {\n    if (this.isInit) return;\n    this._update();\n\n    const { opts, toggler, id, instances, dropdown, emit, show, on } = this;\n\n    instances.set(id, this);\n\n    toggleOnInterection({ anchor: toggler, target: dropdown, instance: this });\n    addDismiss(this, dropdown);\n\n    on(dropdown, EVENT_KEYDOWN, this._onKeydown.bind(this));\n    on(toggler, EVENT_KEYDOWN, async (event) => {\n      const { keyCode, shiftKey } = event;\n      const horizontal = opts.togglerHorizontal;\n      const prevCode = horizontal ? KEY_ARROW_LEFT : KEY_ARROW_UP;\n      const nextCode = horizontal ? KEY_ARROW_RIGHT : KEY_ARROW_DOWN;\n      const arrowActivated = prevCode === keyCode || nextCode === keyCode;\n      if (\n        arrowActivated ||\n        (keyCode === KEY_TAB && !shiftKey && this.isShown)\n      ) {\n        event.preventDefault();\n      }\n      if (arrowActivated) {\n        if (!this.isShown) {\n          await show({ event, trigger: toggler });\n        }\n      }\n      if (arrowActivated || (keyCode === KEY_TAB && !shiftKey)) {\n        this.focusableElems[0]?.focus();\n      }\n    });\n\n    this.isInit = true;\n\n    emit(EVENT_INIT);\n\n    callInitShow(this, dropdown);\n\n    return this;\n  }\n  _update() {\n    const { base, opts, transition, teleport, on, off, hide, dropdown } = this;\n\n    opts.mode = base.getAttribute(DATA_UI_PREFIX + MODE) ?? opts.mode;\n\n    this.updateToggler();\n    this.teleport = Teleport.createOrUpdate(\n      teleport,\n      base,\n      opts.teleport ?? (opts.absolute ? base.parentNode : body),\n    );\n    this.transition = Transition.createOrUpdate(\n      transition,\n      base,\n      opts.transition,\n      { hiddenMode: ACTION_REMOVE, keepPlace: false },\n    );\n\n    if (opts.itemClickHide) {\n      on(dropdown, EVENT_CLICK, (event) => {\n        const trigger = closest(event.target, this.focusableElems);\n        trigger && hide({ event, trigger });\n      });\n    } else {\n      off(dropdown, EVENT_CLICK);\n    }\n  }\n  updateToggler() {\n    const { opts, id, getOptionElem } = this;\n    const toggler = (this.toggler = getOptionElem(\n      opts.toggler ?? getDefaultToggleSelector(id),\n    ));\n    if (!toggler) return;\n    opts.a11y[OPTION_ARIA_CONTROLS] && setAttribute(toggler, ARIA_CONTROLS, id);\n    return this;\n  }\n  get focusableElems() {\n    return this.getOptionElems(this.opts.items, this.dropdown).filter(\n      (elem) => !isUnfocusable(elem),\n    );\n  }\n  _onKeydown(event) {\n    const { keyCode, shiftKey } = event;\n    const isControl = [\n      KEY_ENTER,\n      KEY_SPACE,\n      KEY_END,\n      KEY_HOME,\n      KEY_ARROW_LEFT,\n      KEY_ARROW_UP,\n      KEY_ARROW_RIGHT,\n      KEY_ARROW_DOWN,\n    ].includes(keyCode);\n    const { toggler, focusableElems, hide, opts } = this;\n\n    if (!isControl && keyCode !== KEY_TAB) {\n      focusableElems\n        .find((elem) => elem.textContent.toLowerCase().startsWith(event.key))\n        ?.focus();\n      return;\n    }\n\n    const rtl = false;\n    const firstIndex = 0;\n    const lastIndex = focusableElems.length - 1;\n    const currentIndex = focusableElems.findIndex(\n      (elem) => elem === doc.activeElement,\n    );\n\n    if (currentIndex === 0 && shiftKey && keyCode === KEY_TAB) {\n      event.preventDefault();\n      toggler.focus();\n      return;\n    }\n\n    const nextIndex = currentIndex + 1 > lastIndex ? 0 : currentIndex + 1;\n    const prevIndex = currentIndex ? currentIndex - 1 : lastIndex;\n\n    const prevCode = opts.horizontal ? KEY_ARROW_LEFT : KEY_ARROW_UP;\n    const nextCode = opts.horizontal ? KEY_ARROW_RIGHT : KEY_ARROW_DOWN;\n\n    if (isControl) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    switch (event.keyCode) {\n      case KEY_ENTER:\n      case KEY_SPACE:\n        focusableElems[currentIndex].click();\n        hide({ event, trigger: event.target });\n        break;\n      case KEY_END:\n        focusableElems[rtl ? firstIndex : lastIndex].focus();\n        break;\n      case KEY_HOME:\n        focusableElems[rtl ? lastIndex : firstIndex].focus();\n        break;\n      case prevCode:\n        focusableElems[rtl ? nextIndex : prevIndex].focus();\n        break;\n      case nextCode:\n        focusableElems[rtl ? prevIndex : nextIndex].focus();\n        break;\n    }\n  }\n  destroy(destroyOpts) {\n    const { isInit, toggler, opts } = this;\n    if (!isInit) return;\n    this.emit(EVENT_BEFORE_DESTROY);\n    removeClass(toggler, opts[TOGGLER + CLASS_ACTIVE_SUFFIX]);\n    removeAttr(toggler, [\n      opts.a11y[OPTION_ARIA_EXPANDED] && ARIA_EXPANDED,\n      opts.a11y[OPTION_ARIA_CONTROLS] && ARIA_CONTROLS,\n    ]);\n    return baseDestroy(this, destroyOpts);\n  }\n\n  async toggle(s, params) {\n    const {\n      toggler,\n      dropdown,\n      opts,\n      emit,\n      teleport,\n      transition,\n      isEntering,\n      isAnimating,\n    } = this;\n    const { awaitAnimation, autofocus, a11y } = opts;\n    const {\n      animated,\n      trigger,\n      silent,\n      event,\n      ignoreConditions,\n      ignoreAutofocus,\n    } = normalizeToggleParameters(params);\n\n    s ??= !isEntering;\n\n    if (\n      !ignoreConditions &&\n      ((awaitAnimation && isAnimating) || s === isEntering)\n    )\n      return;\n\n    if (isAnimating && !awaitAnimation) {\n      await Promise.allSettled([transition.cancel()]);\n    }\n\n    s && teleport?.move(this);\n\n    const eventParams = { event, trigger };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    a11y[OPTION_ARIA_EXPANDED] && toggler.setAttribute(ARIA_EXPANDED, !!s);\n\n    toggleClass(toggler, opts[TOGGLER + CLASS_ACTIVE_SUFFIX], s);\n\n    if (!s && dropdown.contains(doc.activeElement)) {\n      toggler.focus();\n    }\n\n    const promise = floatingTransition(this, {\n      s,\n      animated,\n      silent,\n      eventParams,\n    });\n\n    animated && awaitAnimation && (await promise);\n\n    s && !ignoreAutofocus && autofocus && callAutofocus(this);\n\n    !silent && emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n    return this;\n  }\n}\n\nexport default Dropdown;\n","import {\n  DEFAULT_OPTIONS,\n  body,\n  ROLE,\n  UI_PREFIX,\n  VAR_UI_PREFIX,\n  DATA_UI_PREFIX,\n  PX,\n  MODAL,\n  CONTENT,\n  BACKDROP,\n  SCROLL,\n  WIDTH,\n  ROOT,\n  DEFAULT_AUTOFOCUS,\n  SELECTOR_ROOT,\n  ACTION_PREVENT,\n  ARIA_MODAL,\n  ARIA_LABELLEDBY,\n  ARIA_DESCRIBEDBY,\n  TABINDEX,\n  HIDDEN_MODE,\n  EVENT_INIT,\n  EVENT_SHOW,\n  EVENT_HIDE,\n  EVENT_CLICK,\n  EVENT_MOUSEDOWN,\n  EVENT_RIGHT_CLICK,\n  EVENT_HIDE_PREVENTED,\n  EVENT_BEFORE_INIT,\n  EVENT_HIDDEN,\n  EVENT_SHOWN,\n  A11Y,\n  OPTION_GROUP,\n  OPTION_BACKDROP_OUTSIDE,\n  AUTOFOCUS,\n  OPTION_ARIA_MODAL,\n  FOCUSABLE_ELEMENTS_SELECTOR,\n  ACTION_DESTROY,\n  SUPPORTS_DIALOG,\n  TITLE,\n  OPTION_PREVENT_SCROLL,\n  NAME,\n  EVENT_BEFORE_HIDE,\n  EVENT_BEFORE_SHOW,\n  SELECTOR_DATA_CANCEL,\n  SELECTOR_DATA_CONFIRM,\n  CANCEL,\n  CONFIRM,\n  CLASS_ACTIVE,\n  TOGGLER,\n  CLASS_ACTIVE_SUFFIX,\n  DIALOG,\n  doc,\n} from \"./helpers/constants\";\nimport { isString, isElement, isFunction } from \"./helpers/is\";\nimport {\n  getElements,\n  toggleClass,\n  removeClass,\n  focus,\n  closest,\n  setAttribute,\n  removeAttr,\n} from \"./helpers/dom\";\nimport {\n  arrayFrom,\n  callOrReturn,\n  getDataSelector,\n  uuidGenerator,\n  normalizeToggleParameters,\n  getEventsPrefix,\n  getDefaultToggleSelector,\n  updateModule,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  callAutofocus,\n  addEscapeHide,\n  callInitShow,\n} from \"./helpers/modules\";\nimport Base from \"./helpers/Base\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\n\nconst DOM_ELEMENTS = [MODAL, BACKDROP, CONTENT];\nconst CLASS_PREVENT_SCROLL =\n  UI_PREFIX + MODAL + \"-\" + ACTION_PREVENT + \"-\" + SCROLL;\nconst PROPERTY_MODAL_DEEP = VAR_UI_PREFIX + MODAL + \"-deep\";\nconst DATA_MODAL_DEEP = DATA_UI_PREFIX + MODAL + \"-deep\";\n\nconst PROPERTY_ROOT_SCROLLBAR_WIDTH =\n  VAR_UI_PREFIX + ROOT + \"-scrollbar-\" + WIDTH;\nconst ARIA_SUFFIX = {\n  [ARIA_LABELLEDBY]: TITLE,\n  [ARIA_DESCRIBEDBY]: \"description\",\n};\n\nconst updateBodyScrollbarWidth = () => {\n  return doc\n    .querySelector(SELECTOR_ROOT)\n    .style.setProperty(\n      PROPERTY_ROOT_SCROLLBAR_WIDTH,\n      window.innerWidth - doc.documentElement.clientWidth + PX,\n    );\n};\n\nclass Modal extends ToggleMixin(Base, MODAL) {\n  static DefaultGroup = {\n    name: \"\",\n    awaitPrevious: true,\n    hidePrevious: true,\n  };\n  static DefaultPreventScroll = {\n    class: CLASS_PREVENT_SCROLL,\n  };\n  static DefaultAutofocus = {\n    elem: DEFAULT_AUTOFOCUS,\n    required: true,\n    focusableElements: FOCUSABLE_ELEMENTS_SELECTOR,\n  };\n  static DefaultA11y = {\n    [OPTION_ARIA_MODAL]: false,\n    [TABINDEX]: -1,\n    [ROLE]: DIALOG,\n    disableIfDialog: true,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    teleport: null,\n    transitions: null,\n    eventPrefix: getEventsPrefix(MODAL),\n    escapeHide: true,\n    backdropHide: true,\n    rightClickHide: true,\n    hashNavigation: false,\n    returnFocus: true,\n    hideable: true,\n    dismiss: true,\n    preventScroll: true,\n    cancel: SELECTOR_DATA_CANCEL,\n    confirm: SELECTOR_DATA_CONFIRM,\n    title: getDataSelector(MODAL, ARIA_SUFFIX[ARIA_LABELLEDBY]),\n    description: getDataSelector(MODAL, ARIA_SUFFIX[ARIA_DESCRIBEDBY]),\n    group: \"\",\n    autofocus: true,\n    topLayer: true,\n    awaitAnimation: false,\n    [CONTENT]: getDataSelector(MODAL, CONTENT),\n    [BACKDROP]: getDataSelector(MODAL, BACKDROP),\n    [OPTION_BACKDROP_OUTSIDE]: null,\n    [TOGGLER]: true,\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n  };\n\n  constructor(elem, opts = {}) {\n    super({ elem, opts });\n  }\n  get transition() {\n    return this.transitions[MODAL];\n  }\n  _update() {\n    updateModule(this, OPTION_GROUP, NAME);\n    updateModule(this, OPTION_PREVENT_SCROLL);\n    updateModule(this, AUTOFOCUS);\n    updateModule(this, A11Y);\n\n    this.transitions ||= {};\n\n    let {\n      modal,\n      transitions,\n      opts: {\n        teleport: teleportOpts,\n        transitions: transitionsOpts,\n        toggler,\n        a11y,\n        escapeHide,\n      },\n      isDialog,\n      _fromHTML,\n      teleport,\n      id,\n      on,\n      off,\n    } = this;\n\n    if (teleportOpts === null && (!isDialog || _fromHTML)) {\n      teleportOpts = body;\n    }\n    this.teleport = Teleport.createOrUpdate(teleport, modal, teleportOpts, {\n      keepPlace: false,\n    })?.move(this);\n\n    for (const elemName of DOM_ELEMENTS) {\n      if (this[elemName]) {\n        transitions[elemName] = Transition.createOrUpdate(\n          transitions[elemName],\n          this[elemName],\n          transitionsOpts?.[elemName],\n          { keepPlace: elemName === CONTENT },\n        );\n      }\n    }\n\n    this.togglers = toggler === true ? getDefaultToggleSelector(id) : toggler;\n\n    if (\n      a11y &&\n      (!isDialog || (isDialog && SUPPORTS_DIALOG && !a11y.disableIfDialog))\n    ) {\n      a11y[ROLE] && setAttribute(modal, ROLE, a11y[ROLE]);\n      a11y[OPTION_ARIA_MODAL] &&\n        setAttribute(modal, ARIA_MODAL, a11y[OPTION_ARIA_MODAL]);\n      a11y[TABINDEX] && setAttribute(modal, TABINDEX, 0);\n    }\n\n    if (escapeHide) {\n      on(modal, CANCEL, (e) => e.preventDefault());\n    } else {\n      off(modal, CANCEL);\n    }\n\n    return this;\n  }\n  init() {\n    const { opts, getOptionElem, isInit, modal, id, on, emit, hide, toggle } =\n      this;\n\n    if (isInit) return;\n\n    emit(EVENT_BEFORE_INIT);\n\n    this[BACKDROP] = opts[OPTION_BACKDROP_OUTSIDE]\n      ? getOptionElem(opts[OPTION_BACKDROP_OUTSIDE])\n      : getOptionElem(opts[BACKDROP], modal);\n    this[CONTENT] = getOptionElem(opts[CONTENT], modal);\n\n    this._update();\n    this.updateAriaTargets();\n    addDismiss(this);\n\n    on(\n      modal,\n      [EVENT_CLICK, opts.rightClickHide && EVENT_RIGHT_CLICK],\n      (event) => {\n        if (event.type === EVENT_CLICK) {\n          [CANCEL, CONFIRM].forEach((name) => {\n            if (opts[name]) {\n              const trigger = closest(event.target, opts[name]);\n              trigger && emit(name, { event, trigger });\n            }\n          });\n        }\n        if (\n          this.opts.backdropHide &&\n          !this[CONTENT].contains(event.target) &&\n          !this._mousedownTarget\n        ) {\n          hide({ event });\n          emit(CANCEL, { event });\n        }\n        this._mousedownTarget = null;\n      },\n    );\n\n    on(body, EVENT_CLICK, (event) => {\n      const togglers = this.togglers;\n      const trigger = isString(togglers)\n        ? event.target.closest(togglers)\n        : closest(event.target, togglers);\n      if (trigger) {\n        event.preventDefault();\n        toggle(null, { trigger, event });\n      }\n    });\n\n    // isDialog && SUPPORTS_DIALOG && on(modal, EVENT_CLOSE, (event) => hide({ event }));\n\n    this.instances.set(id, this);\n\n    this.isInit = true;\n\n    emit(EVENT_INIT);\n\n    callInitShow(this);\n\n    return this;\n  }\n  destroy(destroyOpts) {\n    if (!this.isInit) return;\n    const { base, opts, title, description, togglers } = this;\n    const { a11y } = opts;\n    removeClass(togglers, opts[TOGGLER + CLASS_ACTIVE]);\n    removeAttr(base, [\n      a11y[(base, OPTION_ARIA_MODAL)] && ARIA_MODAL,\n      a11y[TABINDEX] && TABINDEX,\n      a11y[ROLE] && ROLE,\n      title && ARIA_LABELLEDBY,\n      description && ARIA_DESCRIBEDBY,\n    ]);\n    baseDestroy(this, destroyOpts);\n    return this;\n  }\n  cancelAnimations() {\n    return Promise.allSettled(\n      DOM_ELEMENTS.map((elemName) => this.transitions[elemName]?.cancel()),\n    );\n  }\n  updateAriaTargets() {\n    const { base, opts } = this;\n    for (const name of [ARIA_LABELLEDBY, ARIA_DESCRIBEDBY]) {\n      const suffix = ARIA_SUFFIX[name];\n      let elem = opts[suffix];\n      if (isString(elem)) {\n        elem = this.getOptionElem(elem, base);\n      }\n      if (!isElement(elem)) {\n        elem = null;\n      }\n      this[suffix] = elem;\n      if (!elem) return;\n      const id = elem\n        ? (elem.id ||= uuidGenerator(MODAL + \"-\" + suffix + \"-\"))\n        : elem;\n      setAttribute(base, name, id);\n    }\n    return this;\n  }\n  _preventScroll(s) {\n    const hasPreventScrollModals = this.shownPreventScrollModals.length;\n    if ((s && hasPreventScrollModals) || (!s && !hasPreventScrollModals)) {\n      toggleClass(body, this.opts.preventScroll.class, s);\n    }\n  }\n  async toggle(s, params) {\n    const {\n      opts,\n      isOpen,\n      emit,\n      on,\n      off,\n      isAnimating,\n      transitions,\n      isDialog,\n      modal,\n      content,\n      backdrop,\n    } = this;\n    const {\n      animated,\n      silent,\n      trigger,\n      event,\n      ignoreAutofocus,\n      ignoreConditions,\n    } = normalizeToggleParameters(params);\n\n    s = !!(s ?? !isOpen);\n\n    if (\n      !ignoreConditions &&\n      ((opts.awaitAnimation && isAnimating) || s === isOpen)\n    )\n      return;\n\n    if (isAnimating && !opts.awaitAnimation) {\n      await this.cancelAnimations();\n    }\n\n    const eventParams = { trigger, event };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    if (\n      !s &&\n      !(isFunction(opts.hideable)\n        ? await opts.hideable(this, eventParams)\n        : opts.hideable)\n    ) {\n      return emit(EVENT_HIDE_PREVENTED);\n    }\n\n    this.isOpen = s;\n\n    const backdropIsOpen = Modal.shownModals.find(\n      (modal) => modal !== this && modal[BACKDROP] === backdrop,\n    );\n\n    if (s && opts.group?.hidePrevious) {\n      const shownGroupModals = this.shownGroupModals;\n      if (shownGroupModals.length > 1) {\n        const promises = Promise.allSettled(\n          shownGroupModals.map((modal) => modal !== this && modal.hide()),\n        );\n        if (opts.group.awaitPrevious) {\n          await promises;\n        }\n      }\n    }\n\n    toggleClass(\n      getElements(callOrReturn(opts[TOGGLER], this)),\n      opts[TOGGLER + CLASS_ACTIVE],\n      s,\n    );\n\n    if (s) {\n      transitions[MODAL].toggleRemove(true);\n      transitions[CONTENT].toggleRemove(true);\n      if (isDialog && SUPPORTS_DIALOG) {\n        if (opts.topLayer) {\n          modal.showModal();\n        } else {\n          modal.show();\n        }\n      }\n      if (opts.returnFocus) {\n        this.returnFocusElem = doc.activeElement;\n      }\n    }\n\n    opts.group &&\n      this.shownGroupModals.reverse().forEach(({ modal }, i) => {\n        modal.style.setProperty(PROPERTY_MODAL_DEEP, i);\n        setAttribute(modal, DATA_MODAL_DEEP, i || null);\n      });\n\n    !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, eventParams);\n\n    for (const elemName of [MODAL, BACKDROP, CONTENT]) {\n      if (elemName === BACKDROP && backdropIsOpen) {\n        continue;\n      }\n      const transitionOpts = { allowRemove: elemName !== MODAL };\n      if (elemName === MODAL && !s) {\n        if (opts.group) {\n          transitionOpts[EVENT_HIDE] = () =>\n            modal.style.removeProperty(PROPERTY_MODAL_DEEP);\n        }\n      }\n      transitions[elemName]?.run(s, animated, transitionOpts);\n    }\n\n    this._preventScroll(s);\n\n    const promise = Promise.allSettled(\n      Object.values(transitions).flatMap(({ promises }) => promises),\n    );\n\n    if (!s && (!isDialog || !SUPPORTS_DIALOG)) {\n      opts.returnFocus &&\n        modal.contains(doc.activeElement) &&\n        focus(this.returnFocusElem);\n    }\n\n    animated && opts.awaitAnimation && (await promise);\n\n    opts.escapeHide && addEscapeHide(this, s);\n\n    if (s) {\n      !ignoreAutofocus && opts.autofocus && callAutofocus(this);\n\n      on(content, EVENT_MOUSEDOWN, (e) => {\n        this._mousedownTarget = e.target;\n      });\n    } else {\n      this._mousedownTarget = null;\n\n      off(content, EVENT_MOUSEDOWN);\n\n      if (isDialog && SUPPORTS_DIALOG) {\n        modal.close();\n      }\n      (async () => {\n        await promise;\n        transitions[MODAL].toggleRemove(false);\n        const mode = transitions[MODAL].opts[HIDDEN_MODE];\n        if (mode === ACTION_DESTROY) {\n          this.destroy({ remove: true });\n        }\n      })();\n    }\n\n    !silent && emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n    return promise;\n  }\n\n  get isDialog() {\n    return this[MODAL].tagName === \"DIALOG\";\n  }\n  get isAnimating() {\n    return DOM_ELEMENTS.some(\n      (elemName) => this.transitions[elemName]?.isAnimating,\n    );\n  }\n  get isEntering() {\n    return DOM_ELEMENTS.some(\n      (elemName) => this.transitions[elemName]?.isEntering,\n    );\n  }\n  get shownPreventScrollModals() {\n    return Modal.shownModals.filter(({ opts }) => opts.preventScroll);\n  }\n  get groupModals() {\n    return arrayFrom(this.instances.values()).filter(\n      ({ opts }) => opts.group?.name === this.opts.group?.name,\n    );\n  }\n  static get shownModals() {\n    return arrayFrom(this.instances.values()).filter(({ isOpen }) => isOpen);\n  }\n  get shownGroupModals() {\n    return this.groupModals.filter(({ isOpen, opts }) => opts.group && isOpen);\n  }\n  static updateBodyScrollbarWidth() {\n    updateBodyScrollbarWidth();\n  }\n}\n\nexport default Modal;\n","import {\n  EVENT_INIT,\n  EVENT_BEFORE_INIT,\n  EVENT_DESTROY,\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDE,\n  EVENT_HIDDEN,\n  EVENT_CLICK,\n  EVENT_KEYDOWN,\n  EVENT_FOCUS,\n  KEY_ENTER,\n  KEY_SPACE,\n  KEY_END,\n  KEY_HOME,\n  KEY_ARROW_LEFT,\n  KEY_ARROW_UP,\n  KEY_ARROW_RIGHT,\n  KEY_ARROW_DOWN,\n  ARIA_CONTROLS,\n  ARIA_MULTISELECTABLE,\n  ARIA_LABELLEDBY,\n  ARIA_HIDDEN,\n  ARIA_EXPANDED,\n  ARIA_ORIENTATION,\n  ROLE,\n  TABINDEX,\n  HIDDEN,\n  INERT,\n  DISABLED,\n  DATA_UI_PREFIX,\n  CLASS_ACTIVE,\n  ACTION_HIDE,\n  ACTION_SHOW,\n  ACTION_TOGGLE,\n  DEFAULT_OPTIONS,\n  DATA_APPEAR,\n  ID,\n  HORIZONTAL,\n  VERTICAL,\n  A11Y,\n  OPTION_ARIA_CONTROLS,\n  OPTION_ARIA_LABELLEDBY,\n  OPTION_ARIA_EXPANDED,\n  OPTION_ARIA_HIDDEN,\n  CLASS_ACTIVE_SUFFIX,\n  doc,\n} from \"./helpers/constants\";\nimport Base from \"./helpers/Base.js\";\nimport {\n  isString,\n  isElement,\n  isNumber,\n  isFunction,\n  isArray,\n  isUndefined,\n} from \"./helpers/is\";\nimport {\n  isUnfocusable,\n  callOrReturn,\n  getDataSelector,\n  checkHash,\n  without,\n  uuidGenerator,\n  normalizeToggleParameters,\n  getEventsPrefix,\n  kebabToCamel,\n  updateModule,\n  upperFirst,\n} from \"./helpers/utils\";\nimport {\n  toggleClass,\n  removeClass,\n  removeAttr,\n  next,\n  focus,\n  parents,\n  setAttribute,\n} from \"./helpers/dom\";\nimport { addDismiss } from \"./helpers/modules\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\n\nconst TABLIST = \"tablist\";\nconst TAB = \"tab\";\nconst TABPANEL = \"tabpanel\";\nconst ITEM = \"item\";\nconst ELEMS = [ITEM, TAB, TABPANEL];\nconst ROLE_SUFFIX = upperFirst(ROLE);\nconst OPTION_TAB_ROLE = TAB + ROLE_SUFFIX;\nconst OPTION_TABPANEL_ROLE = TABPANEL + ROLE_SUFFIX;\nconst OPTION_TABPANEL_TABINDEX = TABPANEL + upperFirst(TABINDEX);\nconst OPTION_ITEM_ROLE = ITEM + ROLE_SUFFIX;\nconst OPTION_ARIA_ORIENTRATION = kebabToCamel(ARIA_ORIENTATION);\nconst OPTION_ARIA_MULTISELECTABLE = kebabToCamel(ARIA_MULTISELECTABLE);\n\nconst TABLIST_SECONDARY_METHODS = [\"getTab\", \"isTab\", \"initTab\", \"initTabs\"];\n\nclass Tablist extends Base {\n  static DefaultA11y = {\n    [ROLE]: TABLIST,\n    [OPTION_TAB_ROLE]: TAB,\n    [OPTION_TABPANEL_ROLE]: TABPANEL,\n    [OPTION_ITEM_ROLE]: \"presentation\",\n    [OPTION_ARIA_ORIENTRATION]: true,\n    [OPTION_ARIA_MULTISELECTABLE]: true,\n    [OPTION_ARIA_CONTROLS]: true,\n    [OPTION_ARIA_LABELLEDBY]: true,\n    [OPTION_ARIA_EXPANDED]: true,\n    [TABINDEX]: true,\n    [OPTION_TABPANEL_TABINDEX]: true,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    eventPrefix: getEventsPrefix(TABLIST),\n    siblings: true,\n    alwaysExpanded: false,\n    multiExpand: false,\n    awaiteAnimation: false,\n    awaitePrevious: false,\n    keyboard: true,\n    arrowActivation: false,\n    hashNavigation: true,\n    rtl: false,\n    focusFilter: null,\n    horizontal: false,\n    dismiss: true,\n    [TAB]: getDataSelector(TABLIST, TAB),\n    [TABPANEL]: getDataSelector(TABLIST, TABPANEL),\n    [ITEM]: getDataSelector(TABLIST, ITEM),\n    [TAB + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [ITEM + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [TABPANEL + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    teleport: null,\n    transition: null,\n    // teleport: null,\n  };\n  static _data = {};\n  static instances = new Map();\n  static get NAME() {\n    return TABLIST;\n  }\n  constructor(elem, opts = {}) {\n    super({ opts, elem });\n  }\n  _update() {\n    const { a11y } = updateModule(this, A11Y);\n    const { tablist, tabs, lastShownTab, opts } = this;\n\n    if (a11y) {\n      a11y[ROLE] && setAttribute(tablist, ROLE, a11y[ROLE]);\n      a11y[OPTION_ARIA_MULTISELECTABLE] &&\n        setAttribute(tablist, ARIA_MULTISELECTABLE, opts.multiExpand || null);\n      a11y[OPTION_ARIA_ORIENTRATION] &&\n        setAttribute(\n          tablist,\n          ARIA_ORIENTATION,\n          opts[HORIZONTAL] ? HORIZONTAL : VERTICAL,\n        );\n    }\n\n    const shown = lastShownTab?.index ?? opts.shown;\n\n    const tabWithState = tabs.map((tabObj, i) => {\n      const { tab, tabpanel, item, teleport, transition } = tabObj;\n\n      if (a11y) {\n        a11y[OPTION_ARIA_CONTROLS] &&\n          setAttribute(tab, ARIA_CONTROLS, tabpanel.id);\n        a11y[OPTION_TAB_ROLE] && setAttribute(tab, ROLE, a11y[OPTION_TAB_ROLE]);\n        a11y[OPTION_TABPANEL_ROLE] &&\n          setAttribute(tabpanel, ROLE, a11y[OPTION_TABPANEL_ROLE]);\n        a11y[OPTION_ARIA_LABELLEDBY] &&\n          setAttribute(tabpanel, ARIA_LABELLEDBY, tab.id);\n        a11y[OPTION_ITEM_ROLE] &&\n          setAttribute(item, ROLE, a11y[OPTION_ITEM_ROLE]);\n      }\n\n      tabObj.teleport = Teleport.createOrUpdate(\n        teleport,\n        tabpanel,\n        opts.teleport,\n      )?.move(this, tabObj);\n\n      let isShown;\n      if (isFunction(shown)) {\n        isShown = shown(tabObj);\n      } else if (isArray(shown)) {\n        isShown = shown.some((val) => val === i || val === tabpanel.id);\n      } else if (shown !== null) {\n        isShown = tabpanel.id === shown || i === shown;\n      } else {\n        isShown = transition.isShown;\n      }\n\n      return [isShown, tabObj];\n    });\n    const hasSelected = tabWithState.find(([isShown]) => isShown);\n    if (opts.alwaysExpanded && !hasSelected) {\n      tabWithState[0][0] = true;\n    }\n    tabWithState.forEach(([isShown, tab]) => {\n      tab.transition.updateConfig(opts.transition);\n      tab.toggle(isShown, {\n        animated: opts.appear ?? tab.tabpanel.hasAttribute(DATA_APPEAR),\n        silent: !isShown,\n      });\n    });\n\n    return this;\n  }\n  init() {\n    const { id, instances, isInit, emit } = this;\n    if (isInit) return;\n\n    TABLIST_SECONDARY_METHODS.forEach(\n      (name) => (this[name] = this[name].bind(this)),\n    );\n\n    emit(EVENT_BEFORE_INIT);\n\n    this.tabs = [];\n    this.initTabs();\n\n    instances.set(id, this);\n\n    // this._updateTabIndex();\n\n    this._update();\n\n    this.isInit = true;\n\n    return emit(EVENT_INIT);\n  }\n\n  destroy(deleteInstance = false, cleanStyles = true) {\n    const {\n      tablist,\n      tabs,\n      uuid,\n      opts: { a11y },\n      isInit,\n      off,\n      instances,\n      id,\n      emit,\n    } = this;\n\n    if (!isInit) return;\n\n    emit(EVENT_BEFORE_DESTROY);\n\n    off(tabs);\n\n    if (a11y) {\n      removeAttr(tablist, [\n        a11y[ROLE] && ROLE,\n        a11y[OPTION_ARIA_MULTISELECTABLE] && ARIA_MULTISELECTABLE,\n        a11y[OPTION_ARIA_ORIENTRATION] && ARIA_ORIENTATION,\n      ]);\n    }\n    tablist.id.includes(uuid) && tablist.removeAttribute(ID);\n\n    tabs.forEach((tab) => tab.destroy(cleanStyles));\n\n    this.isInit = false;\n\n    if (deleteInstance) {\n      instances.delete(id);\n    }\n\n    emit(EVENT_DESTROY);\n\n    return this;\n  }\n\n  initTabs() {\n    return this.getOptionElems(this.opts[TAB], this.tablist)\n      .map((tab) => {\n        for (const parent of parents(tab, null, this.tablist)) {\n          if (this.getTab(parent)) return;\n        }\n        return this.initTab(tab);\n      })\n      .filter(Boolean);\n  }\n  initTab(tab) {\n    if (this.getTab(tab)) return;\n\n    const { tabs, tablist, opts, selected, on, off } = this;\n    const index = tabs.length;\n\n    const tabpanelId = tab.getAttribute(DATA_UI_PREFIX + TABLIST + \"-\" + TAB);\n    let tabpanel = tabpanelId && doc.getElementById(tabpanelId);\n    const item = isString(opts[ITEM])\n      ? tab.closest(opts[ITEM])\n      : callOrReturn(opts[ITEM], { tablist, tab, index });\n    if (!tabpanel) {\n      if (isFunction(opts[TABPANEL])) {\n        tabpanel = opts[TABPANEL]({ tablist, tab, index });\n      } else {\n        tabpanel = opts.siblings && next(tab, opts[TABPANEL]);\n      }\n    }\n\n    if (!tabpanel) return;\n\n    const uuid = uuidGenerator();\n    const id = (tabpanel.id ||= TABPANEL + \"-\" + uuid);\n    tab.id ||= TAB + \"-\" + uuid;\n\n    let isShown;\n    if (selected.length && !opts.multiExpand) {\n      isShown = false;\n    }\n    if (opts.hashNavigation && checkHash(id)) {\n      isShown = true;\n    }\n\n    on(tab, EVENT_FOCUS, (e) => this._onTabFocus(e));\n    on(tab, EVENT_KEYDOWN, (e) => this._onTabKeydown(e));\n    on(tab, EVENT_CLICK, (event) => {\n      event.preventDefault();\n      this.toggle(event.currentTarget, null, { event, trigger: tab });\n    });\n\n    const destroy = ({ clean = true, remove = false }) => {\n      const opts = this.opts;\n      const a11y = opts.a11y;\n      if (a11y) {\n        removeAttr(tab, [\n          a11y[OPTION_TAB_ROLE] && ROLE,\n          !isUndefined(a11y[TABINDEX]) && TABINDEX,\n          a11y[OPTION_ARIA_CONTROLS] && ARIA_CONTROLS,\n          a11y[OPTION_ARIA_EXPANDED] && ARIA_EXPANDED,\n        ]);\n        removeAttr(tabpanel, [\n          a11y[OPTION_TABPANEL_ROLE] && ROLE,\n          a11y[OPTION_TABPANEL_TABINDEX] && TABINDEX,\n          a11y[OPTION_ARIA_LABELLEDBY] && ARIA_LABELLEDBY,\n          a11y[OPTION_ARIA_HIDDEN] && ARIA_HIDDEN,\n          HIDDEN,\n          INERT,\n        ]);\n        removeAttr(item, a11y[OPTION_ITEM_ROLE] && ROLE);\n      }\n\n      off(elems);\n      this.tabs = without(this.tabs, tabIntstance);\n      if (clean) {\n        ELEMS.forEach((name) =>\n          removeClass(tabIntstance[name], opts[name + CLASS_ACTIVE_SUFFIX]),\n        );\n        tabIntstance.transition?.destroy();\n        tabIntstance.teleport?.destroy();\n      }\n      tabpanel.id.includes(uuid) && tabpanel.removeAttribute(ID);\n      tab.id.includes(uuid) && tab.removeAttribute(ID);\n\n      if (remove) {\n        elems.forEach((elem) => elem && elem.remove());\n      }\n    };\n\n    const toggleDisabled = (s = null) => {\n      const disabled = tab.toggleAttribute(DISABLED, s);\n\n      disabled && tabIntstance.hide(false);\n\n      if (this.opts.alwaysExpanded) {\n        const selected = this.selected;\n        if (\n          !selected.length ||\n          (selected.length === 1 && selected[0].isDisabled)\n        ) {\n          this.show(this.firstActiveTabIndex, false);\n        }\n      }\n\n      return !disabled;\n    };\n\n    const transition = new Transition(tabpanel, opts.transition);\n\n    const elems = [tab, item, tabpanel];\n    const tabIntstance = {\n      id,\n      uuid,\n      tab,\n      item,\n      tabpanel,\n      elems,\n      index,\n      transition,\n      destroy: destroy.bind(this),\n      toggleDisabled: toggleDisabled.bind(this),\n      isShown,\n      get isDisabled() {\n        return tab.hasAttribute(DISABLED);\n      },\n      get shownPlaceNode() {\n        return (\n          tabIntstance.teleport?.placeholder ??\n          tabIntstance.transition?.placeholder ??\n          tabpanel\n        );\n      },\n    };\n\n    [ACTION_HIDE, ACTION_SHOW, ACTION_TOGGLE].forEach(\n      (action) =>\n        (tabIntstance[action] = this[action].bind(this, tabIntstance)),\n    );\n    tabIntstance.is = this.isTab.bind(this, tabIntstance);\n\n    addDismiss(this, tabpanel, tabIntstance.hide);\n\n    tabs.push(tabIntstance);\n    return tabIntstance;\n  }\n  isTab(tab, value) {\n    let result = false;\n    if (tab === value) {\n      result = true;\n    } else if (isElement(value)) {\n      result = tab.elems.includes(value);\n    } else if (isString(value)) {\n      result = tab.elems.some((elem) => elem.matches(value));\n    } else if (isNumber(value)) {\n      result = tab.index === value;\n    }\n    return result;\n  }\n  getTab(value) {\n    return this.tabs.find((tab) => tab.is(value));\n  }\n  _onTabFocus({ currentTarget }) {\n    const tabIntstance = this.getTab(currentTarget);\n    if (!tabIntstance || !this.focusFilter(tabIntstance)) return;\n\n    this.opts.arrowActivation && !tabIntstance.isShown && tabIntstance.show();\n\n    this.currentTabIndex = tabIntstance.index;\n  }\n  _onTabKeydown(event) {\n    const tabIntstance = this.getTab(event.currentTarget);\n    const currentIndex = this.tabs.indexOf(tabIntstance);\n    const { keyboard, rtl, horizontal } = this.opts;\n    const { keyCode } = event;\n\n    if (\n      [KEY_ENTER, KEY_SPACE].includes(keyCode) &&\n      !/BUTTON|A/.test(tabIntstance.tab.nodeName)\n    )\n      return tabIntstance.toggle(null, { event, trigger: event.target });\n    if (KEY_END > keyCode || KEY_ARROW_DOWN < keyCode || !keyboard) return;\n\n    event.preventDefault();\n\n    const firstIndex = this.firstActiveTabIndex;\n    const lastIndex = this.lastActiveTabIndex;\n    const nextIndex = currentIndex + 1;\n    const prevIndex = currentIndex ? currentIndex - 1 : lastIndex;\n\n    const prevCode = horizontal ? KEY_ARROW_LEFT : KEY_ARROW_UP;\n    const nextCode = horizontal ? KEY_ARROW_RIGHT : KEY_ARROW_DOWN;\n\n    let index;\n    if (keyCode === KEY_END) {\n      index = rtl ? firstIndex : lastIndex;\n    } else if (keyCode === KEY_HOME) {\n      index = rtl ? lastIndex : firstIndex;\n    } else if (keyCode === prevCode) {\n      index = rtl ? nextIndex : prevIndex;\n    } else if (keyCode === nextCode) {\n      index = rtl ? prevIndex : nextIndex;\n    }\n    index != null && this._switchTab(index);\n  }\n  _switchTab(index) {\n    const tabs = this.tabs;\n    if (tabs[index] && !this.focusFilter(tabs[index])) {\n      this._switchTab(index > this.currentTabIndex ? index + 1 : index - 1);\n      return;\n    }\n    this.currentTabIndex =\n      index < this.firstActiveTabIndex\n        ? this.lastActiveTabIndex\n        : index >= tabs.length\n        ? this.firstActiveTabIndex\n        : index;\n\n    focus(tabs[this.currentTabIndex].tab);\n  }\n  _updateTabIndex(activeIndex) {\n    const { keyboard, a11y } = this.opts;\n    if (!keyboard) return;\n    activeIndex ??= this.selected[0]?.index ?? this.firstActiveTabIndex;\n    a11y &&\n      this.tabs.forEach(({ tab, tabpanel }, i) =>\n        setAttribute(\n          [a11y[TABINDEX] && tab, a11y[OPTION_TABPANEL_TABINDEX] && tabpanel],\n          TABINDEX,\n          i === activeIndex ? 0 : -1,\n        ),\n      );\n  }\n  focusFilter(tab) {\n    return (\n      !isUnfocusable(tab.tab) &&\n      (isFunction(this.opts.focusFilter) ? this.opts.focusFilter(tab) : true)\n    );\n  }\n  get selected() {\n    return this.tabs.filter(({ isShown }) => isShown);\n  }\n  get firstActiveTabIndex() {\n    return this.tabs.find((tab) => this.focusFilter(tab))?.index;\n  }\n  get lastActiveTabIndex() {\n    return this.tabs.findLast((tab) => this.focusFilter(tab))?.index;\n  }\n  show(elem, opts) {\n    return this.toggle(elem, true, opts);\n  }\n  hide(elem, opts) {\n    return this.toggle(elem, false, opts);\n  }\n  async toggle(elem, s, params) {\n    const { animated, silent, event, trigger } =\n      normalizeToggleParameters(params);\n    const tabIntstance = this.getTab(elem);\n\n    if (!tabIntstance) return;\n\n    const { opts, selected, emit } = this;\n    const { tab, tabpanel, isShown, transition, index } = tabIntstance;\n\n    s = !!(s ?? !isShown);\n\n    s && this._updateTabIndex(index);\n\n    if (\n      s === isShown ||\n      (opts.awaiteAnimation &&\n        transition.isAnimating &&\n        ((selected.length <= 1 && !opts.multiExpand) || opts.multiExpand)) ||\n      (isShown && opts.alwaysExpanded && !s && selected.length < 2) ||\n      (s && !this.focusFilter(tabIntstance))\n    )\n      return;\n\n    if (transition.isAnimating && !opts.awaitAnimation) {\n      await transition.cancel();\n    }\n\n    const eventParams = { event, trigger };\n\n    !silent &&\n      emit(\n        s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE,\n        tabIntstance,\n        eventParams,\n      );\n\n    tabIntstance.isShown = s;\n\n    if (!opts.multiExpand && s) {\n      for (const selectedTab of selected) {\n        if (tabIntstance !== selectedTab && selectedTab.isShown) {\n          const promise = selectedTab.hide(animated);\n          if (opts.awaitePrevious) await promise;\n        }\n      }\n    }\n\n    if (s && !tabIntstance.isShown) return;\n\n    ELEMS.forEach((elemName) =>\n      toggleClass(\n        tabIntstance[elemName],\n        opts[elemName + CLASS_ACTIVE_SUFFIX],\n        s,\n      ),\n    );\n\n    const a11y = opts.a11y;\n    if (a11y) {\n      a11y[OPTION_ARIA_EXPANDED] && setAttribute(tab, ARIA_EXPANDED, s);\n      a11y[OPTION_ARIA_HIDDEN] && setAttribute(tabpanel, ARIA_HIDDEN, !s);\n    }\n\n    const promise = transition.run(s, animated, {\n      [s ? EVENT_SHOW : EVENT_HIDE]: () =>\n        !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, tabIntstance, eventParams),\n      [EVENT_DESTROY]: () =>\n        tabIntstance.destroy({ remove: true, destroyTransition: false }),\n    });\n    animated && opts.awaiteAnimation && (await promise);\n\n    if (s) {\n      this.lastShownTab = tabIntstance;\n      this.currentTabIndex ??= index;\n    }\n\n    !silent && emit(s ? EVENT_SHOWN : EVENT_HIDDEN, tabIntstance, eventParams);\n\n    return s ? tabIntstance : null;\n  }\n\n  static show(elem, params) {\n    return this.toggle(elem, true, params);\n  }\n  static hide(elem, params) {\n    return this.toggle(elem, false, params);\n  }\n  static toggle(elem, s, params) {\n    for (const tablist of this.instances.values()) {\n      if (tablist.getTab(elem)) {\n        tablist.toggle(elem, s, params);\n        break;\n      }\n    }\n  }\n}\n\nexport default Tablist;\n","import { nextAll } from \"./index.js\";\nexport default (elem, selector) => nextAll(elem, selector)[0];\n","export default (value) => value === undefined;\n","import returnArray from \"./returnArray\";\nexport default (source, ...values) =>\n  returnArray(source).filter((elem) => !values.includes(elem));\n","import {\n  UI_PREFIX,\n  PROGRESS,\n  EVENT_MOUSELEAVE,\n  EVENT_MOUSEENTER,\n  EVENT_FOCUSIN,\n  EVENT_FOCUSOUT,\n  EVENT_PAUSE,\n  EVENT_RESUME,\n  EVENT_RESET,\n  ACTION_PAUSE,\n  ACTION_RESUME,\n  ACTION_RESET,\n  ACTION_TOGGLE,\n  EVENT_VISIBILITY_CHANGE,\n  doc,\n} from \"./constants\";\nimport { callOrReturn, getOption, mergeDeep, getDataSelector } from \"./utils\";\nimport { EventHandler } from \"./EventHandler\";\nimport { isNumber } from \"./is\";\n\nclass Autoaction {\n  static Default = {\n    progressElem: getDataSelector(PROGRESS),\n    duration: 4000,\n    demicial: 4,\n    durationUpdate: false,\n    pauseOnMouse: true,\n    resetOnMouse: true,\n    pauseOnFocus: true,\n    resetOnFocus: true,\n    visibilityControl: false,\n    cssVariable: UI_PREFIX + PROGRESS,\n  };\n  constructor(elem, action, opts) {\n    const Default = this.constructor.Default;\n    opts = isNumber(opts)\n      ? { ...Default, duration: opts }\n      : mergeDeep(Default, opts);\n    const { on, off, emit } = new EventHandler();\n    Object.assign(this, { elem, action, on, off, emit, opts });\n    [\n      \"checkTime\",\n      ACTION_PAUSE,\n      ACTION_RESUME,\n      ACTION_RESET,\n      ACTION_TOGGLE,\n    ].forEach((action) => (this[action] = this[action].bind(this)));\n\n    this.progressElem = getOption(false, opts.progressElem, elem);\n\n    if (opts.visibilityControl) {\n      on(doc, EVENT_VISIBILITY_CHANGE, () => this.toggle(!doc.hidden));\n    }\n  }\n  toggleInterections(s) {\n    const { opts, elem, on, off, resume, pause, reset } = this;\n    const { pauseOnMouse, resetOnMouse, pauseOnFocus, resetOnFocus } = opts;\n\n    if (!pauseOnMouse && !resetOnMouse && !pauseOnFocus && !resetOnFocus)\n      return;\n\n    if (s) {\n      reset();\n      let interectedMouse, interectedFocus;\n      if (pauseOnFocus || resetOnFocus) {\n        on(elem, [EVENT_FOCUSIN, EVENT_FOCUSOUT], ({ type }) => {\n          interectedFocus = type === EVENT_FOCUSIN;\n          if (interectedFocus) {\n            resetOnFocus && reset();\n            pauseOnFocus && pause();\n          } else if (!interectedMouse) {\n            pauseOnFocus && resume();\n          }\n        });\n      }\n      if (pauseOnMouse || resetOnMouse) {\n        on(elem, [EVENT_MOUSEENTER, EVENT_MOUSELEAVE], ({ type }) => {\n          interectedMouse = type === EVENT_MOUSEENTER;\n          if (interectedMouse) {\n            resetOnMouse && reset();\n            pauseOnMouse && pause();\n          } else if (!interectedFocus) {\n            pauseOnMouse && resume();\n          }\n        });\n      }\n    } else {\n      off();\n    }\n    return this;\n  }\n  checkTime() {\n    const { opts, elem, progressElem, paused, _prevProgress } = this;\n    if (paused) return;\n    const current = performance.now();\n    this.timeCurrent = Math.round(current - this.timeBegin);\n    const time = opts.duration - this.timeCurrent;\n    const progress = Math.max(time / opts.duration, 0).toFixed(opts.demicial);\n    this._prevProgress = progress;\n    if (progress && progress === _prevProgress) {\n      return requestAnimationFrame(this.checkTime);\n    }\n\n    if (opts.cssVariable) {\n      progressElem?.style.setProperty(\"--\" + opts.cssVariable, progress);\n    }\n\n    callOrReturn(opts.durationUpdate, elem, { time, progress });\n    if (progress <= 0) {\n      this.action();\n    } else {\n      requestAnimationFrame(this.checkTime);\n    }\n  }\n  toggle(s = this.paused) {\n    return s ? this.resume() : this.pause();\n  }\n  pause() {\n    this.paused = true;\n    this.emit(EVENT_PAUSE);\n    return this;\n  }\n  resume() {\n    this.paused = false;\n    this.timeBegin = performance.now() - this.timeCurrent;\n    this.checkTime();\n    this.emit(EVENT_RESUME);\n    return this;\n  }\n  reset() {\n    this.paused = false;\n    this.timeBegin = performance.now();\n    this.checkTime();\n    this.emit(EVENT_RESET);\n    return this;\n  }\n  destroy() {\n    this.paused = true;\n    this.off();\n  }\n  static createOrUpdate(autoaction, elem, action, opts) {\n    return autoaction\n      ? autoaction.update(elem, action, opts)\n      : opts !== false\n      ? new Autoaction(elem, action, opts)\n      : null;\n  }\n}\n\nexport default Autoaction;\n","import {\n  EVENT_INIT,\n  EVENT_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDE,\n  EVENT_HIDDEN,\n  body,\n  DEFAULT_OPTIONS,\n  DEFAULT,\n  ACTION_DESTROY,\n  ROLE,\n  ARIA_LIVE,\n  ARIA_ATOMIC,\n  TABINDEX,\n  A11Y,\n  OPTION_ARIA_LIVE,\n  OPTION_ARIA_ATOMIC,\n} from \"./helpers/constants\";\nimport { isArray, isObject } from \"./helpers/is\";\nimport { fragment, inDOM, setAttribute } from \"./helpers/dom\";\nimport {\n  normalizeToggleParameters,\n  arrayFrom,\n  objectToAttributes,\n  getEventsPrefix,\n  updateModule,\n} from \"./helpers/utils\";\nimport { addDismiss, baseDestroy, callInitShow } from \"./helpers/modules\";\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Autoaction from \"./helpers/Autoaction.js\";\n\nconst TOAST = \"toast\";\n\nconst positions = {};\nconst wrappers = new Map();\nclass Toast extends ToggleMixin(Base, TOAST) {\n  static DefaultContainerA11y = {\n    containerRole: \"region\",\n    containerTabindex: -1,\n  };\n  static DefaultA11y = {\n    [OPTION_ARIA_LIVE]: \"off\",\n    [OPTION_ARIA_ATOMIC]: true,\n    [TABINDEX]: 0,\n    [ROLE]: \"status\",\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    eventPrefix: getEventsPrefix(TOAST),\n    root: null,\n    container: null,\n    appear: true,\n    transition: null,\n    template: null,\n    dismiss: true,\n    limit: false,\n    limitAnimateEnter: true,\n    limitAnimateLeave: true,\n    autohide: false,\n    namespace: DEFAULT,\n  };\n  static containerName = TOAST + \"s\";\n  constructor(elem, opts) {\n    if (isObject(elem)) {\n      opts = elem;\n      elem = null;\n    }\n    super({ elem, opts });\n  }\n  _update() {\n    const { opts, base, autohide, hide } = this;\n    if (!opts.root && inDOM(base)) {\n      this.root = base.parentElement;\n    } else {\n      this.root = this.getOptionElem(opts.root || body, base);\n    }\n    this.transition = new Transition(base, opts.transition, {\n      hiddenMode: ACTION_DESTROY,\n    });\n    this.autohide = Autoaction.createOrUpdate(\n      autohide,\n      base,\n      hide,\n      opts.autohide,\n    );\n\n    const { a11y } = updateModule(this, A11Y);\n\n    a11y[OPTION_ARIA_LIVE] &&\n      setAttribute(base, ARIA_LIVE, a11y[OPTION_ARIA_LIVE]);\n    a11y[OPTION_ARIA_ATOMIC] && setAttribute(base, ARIA_ATOMIC, true);\n    a11y[TABINDEX] && setAttribute(base, TABINDEX, 0);\n    a11y[ROLE] && setAttribute(base, ROLE, a11y[ROLE]);\n    return this;\n  }\n  destroy(opts) {\n    if (!this.isInit) return;\n    baseDestroy(this, { remove: true, ...opts });\n    return this;\n  }\n  init() {\n    if (this.isInit) return;\n\n    this._update();\n\n    this.instances.set(this.id, this);\n\n    addDismiss(this);\n\n    this.isInit = true;\n\n    this.emit(EVENT_INIT);\n\n    callInitShow(this);\n\n    return this;\n  }\n  async toggle(s, params) {\n    const {\n      transition,\n      opts: {\n        limit,\n        limitAnimateLeave,\n        limitAnimateEnter,\n        position,\n        namespace,\n      },\n      autohide,\n      base,\n      root,\n      instances,\n      constructor,\n      emit,\n      destroy,\n    } = this;\n    const { animated, silent, event, trigger } =\n      normalizeToggleParameters(params);\n\n    if (animated && transition.isAnimating) return;\n\n    s ??= !transition.isShown;\n\n    let preventAnimation;\n\n    if (s) {\n      if (limit) {\n        const nots = arrayFrom(instances.values()).filter(\n          (instance) =>\n            instance !== this &&\n            instance.opts.position === position &&\n            instance.root === root,\n        );\n        for (let i = 0; i < nots.length; i++) {\n          if (i >= limit - 1) {\n            nots[i - (limit - 1)]?.hide(limitAnimateLeave);\n            if (!limitAnimateEnter) {\n              preventAnimation = true;\n            }\n          }\n        }\n      }\n      if (root) {\n        let to = root;\n        if (position) {\n          const wrapper = (to = constructor.getWrapper({\n            position,\n            root,\n            namespace,\n          }));\n          if (wrapper && wrapper.parentElement !== root) {\n            root.append(wrapper);\n          }\n        }\n        to.append(base);\n      }\n    }\n\n    const eventParams = { event, trigger };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    autohide && autohide.toggleInterections(s);\n\n    const promise = transition.run(s, animated && !preventAnimation, {\n      [s ? EVENT_SHOW : EVENT_HIDE]: () =>\n        !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, eventParams),\n      [EVENT_DESTROY]: () =>\n        destroy({ remove: true, destroyTransition: false }),\n    });\n    animated && (await promise);\n\n    const rootWrappers = wrappers.get(root);\n    const wrapper =\n      rootWrappers &&\n      [...rootWrappers].find(\n        (w) => w.position === position && w.namespace === namespace,\n      )?.wrapper;\n\n    if (!s && wrapper && !wrapper.children.length) {\n      if (rootWrappers) {\n        const w = [...rootWrappers].find((w) => w.wrapper === wrapper);\n        w && rootWrappers.delete(w);\n      }\n      wrapper.remove();\n    }\n\n    !silent && emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n    return this;\n  }\n\n  static getWrapper({ position, root = body, namespace = DEFAULT }) {\n    let rootWrappers = wrappers.get(root);\n    if (!rootWrappers) {\n      rootWrappers = new Set();\n      wrappers.set(root, rootWrappers);\n    } else {\n      const wrapper = [...rootWrappers].find(\n        (w) => w.position === position && w.namespace === namespace,\n      );\n      if (wrapper) return wrapper.wrapper;\n    }\n    const a11y = this.DefaultContainerA11y;\n    const attributes = objectToAttributes({\n      role: a11y.containerRole,\n      tabindex: a11y.containerTabindex,\n    });\n    const wrapper = fragment(\n      this.Default.container({ position, namespace, attributes }),\n    );\n\n    rootWrappers.add({ wrapper, namespace, position, root });\n    return wrapper;\n  }\n  static addPosition(position, namespace = DEFAULT) {\n    positions[namespace] ||= {};\n    if (isArray(position)) {\n      position.forEach((p) => this.addPosition(p, namespace));\n    } else if (isObject(position)) {\n      positions[namespace][position.name] = position;\n    }\n  }\n}\n\nexport default Toast;\n","export default (obj) =>\n  Object.entries(obj)\n    .map(([name, value]) => `${name}=\"${value}\"`)\n    .join(\" \");\n","import {\n  EVENT_BEFORE_INIT,\n  EVENT_INIT,\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDDEN,\n  CLASS,\n  HOVER,\n  FOCUS,\n  ACTION_REMOVE,\n  TOP,\n  ANCHOR,\n  TARGET,\n  UI_PREFIX,\n  ARIA_DESCRIBEDBY,\n  DATA_UI_PREFIX,\n  DEFAULT_FLOATING_OPTIONS,\n  DEFAULT_OPTIONS,\n  OPTION_ARIA_DESCRIBEDBY,\n  A11Y,\n  ROLE,\n  TITLE,\n  CONTENT,\n  TOOLTIP,\n  body,\n  CLASS_ACTIVE_SUFFIX,\n} from \"./helpers/constants\";\n\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport { getElement, setAttribute, toggleClass } from \"./helpers/dom\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\nimport { isObject } from \"./helpers/is\";\nimport {\n  normalizeToggleParameters,\n  updateModule,\n  getEventsPrefix,\n  getClassActive,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  toggleOnInterection,\n  floatingTransition,\n  callInitShow,\n} from \"./helpers/modules\";\n\nconst UI_TOOLTIP = UI_PREFIX + TOOLTIP;\n\nclass Tooltip extends ToggleMixin(Base, TOOLTIP) {\n  static DefaultA11y = {\n    [ROLE]: TOOLTIP,\n    [OPTION_ARIA_DESCRIBEDBY]: true,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    ...DEFAULT_FLOATING_OPTIONS,\n    eventPrefix: getEventsPrefix(TOOLTIP),\n    placement: TOP,\n    template: (content) =>\n      `<div class=\"${UI_TOOLTIP}\"><div class=\"${UI_TOOLTIP}-arrow\" data-${UI_TOOLTIP}-arrow></div><div class=\"${UI_TOOLTIP}-content\">${content}</div></div>`,\n    interactive: false,\n    removeTitle: true,\n    [ANCHOR + CLASS_ACTIVE_SUFFIX]: getClassActive(TOOLTIP),\n    trigger: HOVER + \" \" + FOCUS,\n    content: null,\n  };\n\n  static get BASE_NODE_NAME() {\n    return ANCHOR;\n  }\n  constructor(elem, opts = {}) {\n    if (isObject(elem)) {\n      opts = elem;\n      elem = null;\n    }\n    super({ opts, elem });\n  }\n  _update() {\n    const { tooltip, opts, transition, teleport, base } = this;\n    this.teleport = Teleport.createOrUpdate(\n      teleport,\n      tooltip,\n      opts.teleport ?? (opts.absolute ? base.parentNode : body),\n    );\n    this.transition = Transition.createOrUpdate(\n      transition,\n      tooltip,\n      opts.transition,\n      { hiddenMode: ACTION_REMOVE, keepPlace: false },\n    );\n    updateModule(this, A11Y);\n    setAttribute(tooltip, opts.a11y[ROLE]);\n  }\n  destroy(destroyOpts) {\n    const { isInit, anchor, id, _cache, emit } = this;\n    if (!isInit) return;\n    emit(EVENT_BEFORE_DESTROY);\n    setAttribute(anchor, ARIA_DESCRIBEDBY, (val) =>\n      val === id + \"-\" + TARGET ? _cache[OPTION_ARIA_DESCRIBEDBY] : val,\n    );\n    if (_cache[TITLE]) {\n      anchor[TITLE] = _cache[TITLE];\n    }\n    return baseDestroy(this, destroyOpts);\n  }\n  init() {\n    const { opts, anchor, id, isInit, instances, emit } = this;\n\n    if (isInit) return;\n\n    emit(EVENT_BEFORE_INIT);\n\n    this._cache = { [TITLE]: anchor[TITLE] };\n\n    const target = (this.tooltip = getElement(\n      opts.template(\n        opts[CONTENT] ??\n          anchor.getAttribute(DATA_UI_PREFIX + TOOLTIP + \"-\" + CONTENT) ??\n          anchor[TITLE],\n        this,\n      ),\n    ));\n    target.id ||= id + \"-\" + TARGET;\n\n    anchor.removeAttribute(TITLE);\n    toggleClass(\n      target,\n      anchor.getAttribute(DATA_UI_PREFIX + TOOLTIP + \"-\" + CLASS),\n      true,\n    );\n\n    this._update();\n\n    instances.set(id, this);\n\n    toggleOnInterection({ anchor, target, instance: this });\n\n    addDismiss(this, target);\n\n    this.isInit = true;\n\n    emit(EVENT_INIT);\n\n    callInitShow(this, target);\n\n    return this;\n  }\n\n  async toggle(s, params) {\n    const {\n      transition,\n      anchor,\n      id,\n      opts,\n      emit,\n      teleport,\n      _cache,\n      isEntering,\n      isAnimating,\n    } = this;\n    const awaitAnimation = opts.awaitAnimation;\n    const { animated, trigger, silent, event, ignoreConditions } =\n      normalizeToggleParameters(params);\n\n    s ??= !isEntering;\n\n    if (\n      !ignoreConditions &&\n      ((awaitAnimation && isAnimating) || s === isEntering)\n    )\n      return;\n\n    if (isAnimating && !awaitAnimation) {\n      await transition.cancel();\n    }\n\n    const eventParams = { event, trigger };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    if (opts.a11y[OPTION_ARIA_DESCRIBEDBY]) {\n      setAttribute(\n        anchor,\n        ARIA_DESCRIBEDBY,\n        s\n          ? (value) => {\n              value && (_cache[OPTION_ARIA_DESCRIBEDBY] = value);\n              return id + \"-\" + TARGET;\n            }\n          : _cache[OPTION_ARIA_DESCRIBEDBY] ?? null,\n      );\n    }\n\n    toggleClass(anchor, opts[ANCHOR + CLASS_ACTIVE_SUFFIX], s);\n\n    s && teleport?.move(this);\n\n    const promise = floatingTransition(this, {\n      s,\n      animated,\n      silent,\n      eventParams,\n    });\n\n    animated && awaitAnimation && (await promise);\n\n    !silent && emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n    return this;\n  }\n}\n\nexport default Tooltip;\n","import {\n  EVENT_INIT,\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDDEN,\n  CLASS_ACTIVE,\n  ARIA_CONTROLS,\n  ARIA_EXPANDED,\n  ACTION_REMOVE,\n  POPOVER,\n  CLICK,\n  DEFAULT_AUTOFOCUS,\n  DEFAULT_FLOATING_OPTIONS,\n  DEFAULT_OPTIONS,\n  FOCUSABLE_ELEMENTS_SELECTOR,\n  AUTOFOCUS,\n  A11Y,\n  DATA_UI_PREFIX,\n  OPTION_ARIA_CONTROLS,\n  OPTION_ARIA_EXPANDED,\n  MODE,\n  body,\n  doc,\n  CLASS_ACTIVE_SUFFIX,\n  TOGGLER,\n} from \"./helpers/constants\";\n\nimport { toggleClass, removeClass, setAttribute, focus } from \"./helpers/dom\";\nimport {\n  normalizeToggleParameters,\n  getDefaultToggleSelector,\n  updateModule,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  callAutofocus,\n  toggleOnInterection,\n  floatingTransition,\n  callInitShow,\n} from \"./helpers/modules\";\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\n\nclass Popover extends ToggleMixin(Base, POPOVER) {\n  static DefaultA11y = {\n    [OPTION_ARIA_CONTROLS]: true,\n    [OPTION_ARIA_EXPANDED]: true,\n  };\n  static DefaultAutofocus = {\n    elem: DEFAULT_AUTOFOCUS,\n    required: true,\n    focusableElements: FOCUSABLE_ELEMENTS_SELECTOR,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    ...DEFAULT_FLOATING_OPTIONS,\n    topLayer: true,\n    returnFocus: true,\n    mode: false,\n    dismiss: true,\n    autofocus: true,\n    trigger: CLICK,\n    [TOGGLER]: null,\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n  };\n\n  constructor(elem, opts = {}) {\n    super({ opts, elem });\n  }\n  init() {\n    if (this.isInit) return;\n    this._update();\n\n    const { toggler, id, instances, popover, emit } = this;\n\n    instances.set(id, this);\n\n    toggleOnInterection({ anchor: toggler, target: popover, instance: this });\n    addDismiss(this, popover);\n\n    this.isInit = true;\n\n    emit(EVENT_INIT);\n\n    callInitShow(this);\n\n    return this;\n  }\n  _update() {\n    const { base, opts, transition, teleport } = this;\n\n    updateModule(this, AUTOFOCUS);\n    updateModule(this, A11Y);\n\n    this.teleport = Teleport.createOrUpdate(\n      teleport,\n      base,\n      opts.teleport ?? (opts.absolute ? base.parentNode : body),\n    );\n    this.transition = Transition.createOrUpdate(\n      transition,\n      base,\n      opts.transition,\n      { hiddenMode: ACTION_REMOVE, keepPlace: false },\n    );\n\n    this.updateToggler();\n\n    opts.mode = base.getAttribute(DATA_UI_PREFIX + MODE) ?? opts.mode;\n  }\n  updateToggler() {\n    const { opts, id, getOptionElem } = this;\n    const toggler = (this.toggler = getOptionElem(\n      opts.toggler ?? getDefaultToggleSelector(id),\n    ));\n    if (!toggler) return;\n    opts.a11y[OPTION_ARIA_CONTROLS] && setAttribute(toggler, ARIA_CONTROLS, id);\n    return this;\n  }\n  destroy(opts) {\n    if (!this.isInit) return;\n    this.emit(EVENT_BEFORE_DESTROY);\n    removeClass(this[TOGGLER], opts[TOGGLER + CLASS_ACTIVE_SUFFIX]);\n    return baseDestroy(this, opts);\n  }\n\n  async toggle(s, params) {\n    const {\n      transition,\n      isEntering,\n      isAnimating,\n      toggler,\n      popover,\n      opts,\n      emit,\n      teleport,\n    } = this;\n    const { awaitAnimation, a11y, returnFocus, autofocus } = opts;\n    const { animated, silent, event, ignoreAutofocus, ignoreConditions } =\n      normalizeToggleParameters(params);\n\n    s ??= !isEntering;\n\n    if (\n      !ignoreConditions &&\n      ((awaitAnimation && isAnimating) || s === isEntering)\n    )\n      return;\n\n    if (isAnimating && !awaitAnimation) {\n      await Promise.allSettled([transition.cancel()]);\n    }\n\n    s && teleport?.move(this);\n\n    const eventParams = { event };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    a11y[OPTION_ARIA_EXPANDED] && toggler.setAttribute(ARIA_EXPANDED, !!s);\n    toggleClass(toggler, opts[TOGGLER + CLASS_ACTIVE_SUFFIX], s);\n\n    const promise = floatingTransition(this, {\n      s,\n      animated,\n      silent,\n      eventParams,\n    });\n\n    !s && returnFocus && popover.contains(doc.activeElement) && focus(toggler);\n\n    animated && awaitAnimation && (await promise);\n\n    s && !ignoreAutofocus && autofocus && callAutofocus(this);\n\n    !silent && emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n    return this;\n  }\n}\n\nexport default Popover;\n"],"names":["cache","kebabToCamel","str","replace","match","toUpperCase","upperFirst","slice","isFunction","value","UI","UI_PREFIX","VAR_UI_PREFIX","DATA_PREFIX","DATA_UI_PREFIX","ACTIVE","CLASS_ACTIVE","DEFAULT","NAME","MODE","PX","NONE","ID","WIDTH","HEIGHT","TOP","LEFT","RIGHT","BOTTOM","CENTER","START","END","DOWN","TITLE","HORIZONTAL","ABSOLUTE","TRANSITION","CLASS","STYLE","ROLE","ROOT","CONFIRM","CANCEL","BEFORE","AFTER","MOUSE","CLICK","HOVER","FOCUS","SCROLL","HIDE","HIDDEN","SHOW","SHOWN","APPEAR","TARGET","AVAILABLE","AVAILABLE_WIDTH","AVAILABLE_HEIGHT","ANCHOR","MODAL","CONTENT","BACKDROP","POPOVER","TOOLTIP","TOGGLER","DROPDOWN","ARROW","PROGRESS","DISMISS","DIALOG","FLIP","SHRINK","STICKY","PLACEMENT","PADDING","OFFSET","BOUNDARY_OFFSET","CLIP_PATH","ARROW_OFFSET","ARROW_PADDING","TRUE","doc","document","body","ENTER","LEAVE","BEFORE_ENTER","ENTER_ACTIVE","ENTER_FROM","ENTER_TO","AFTER_ENTER","BEFORE_LEAVE","LEAVE_ACTIVE","LEAVE_FROM","LEAVE_TO","AFTER_LEAVE","HIDDEN_MODE","DURATION","ACTION_INIT","ACTION_DESTROY","ACTION_TOGGLE","ACTION_SHOW","ACTION_HIDE","ACTION_REMOVE","ACTION_UPDATE","ACTION_PAUSE","ACTION_RESUME","ACTION_RESET","ACTION_ON","ACTION_OFF","ACTION_EMIT","ACTION_ONCE","INERT","AUTOFOCUS","TABINDEX","DISABLED","FLOATING_DATA_ATTRIBUTE","DATA_APPEAR","EVENT_INIT","EVENT_BEFORE_INIT","EVENT_DESTROY","EVENT_BEFORE_DESTROY","EVENT_BEFORE_SHOW","EVENT_SHOW","EVENT_SHOWN","EVENT_BEFORE_HIDE","EVENT_HIDE","EVENT_HIDDEN","EVENT_PAUSE","EVENT_RESUME","EVENT_RESET","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","EVENT_MOUSEDOWN","EVENT_CHANGE","EVENT_CLICK","EVENT_KEYDOWN","EVENT_FOCUS","EVENT_FOCUSIN","EVENT_FOCUSOUT","EVENT_ACTION_OUTSIDE","EVENT_SCROLL","ARIA","ARIA_CONTROLS","ARIA_EXPANDED","ARIA_HIDDEN","ARIA_MULTISELECTABLE","ARIA_LABELLEDBY","ARIA_DESCRIBEDBY","ARIA_ORIENTATION","ARIA_MODAL","ARIA_LIVE","ARIA_ATOMIC","KEY_ENTER","KEY_SPACE","KEY_END","KEY_HOME","KEY_ARROW_LEFT","KEY_ARROW_UP","KEY_ARROW_RIGHT","KEY_ARROW_DOWN","A11Y","OPTION_BACKDROP_OUTSIDE","OPTION_APPEAR","OPTION_KEEP_PLACE","OPTION_PREVENT_SCROLL","OPTION_POSITION","OPTION_ARIA_LABELLEDBY","OPTION_ARIA_DESCRIBEDBY","OPTION_ARIA_EXPANDED","OPTION_ARIA_CONTROLS","OPTION_ARIA_HIDDEN","OPTION_ARIA_MODAL","OPTION_ARIA_LIVE","OPTION_ARIA_ATOMIC","CLASS_ACTIVE_SUFFIX","OPTIONS_BOOLEAN","DEFAULT_OPTIONS","data","on","eventDispatch","eventBubble","DEFAULT_FLOATING_OPTIONS","transition","teleport","awaitAnimation","placement","absolute","offset","padding","delay","boundaryOffset","shrink","flip","sticky","escapeHide","outsideHide","arrow","height","width","SELECTOR_DISABLED","SELECTOR_INERT","SELECTOR_DATA_CONFIRM","SELECTOR_DATA_CANCEL","DEFAULT_AUTOFOCUS","FOCUSABLE_ELEMENTS_SELECTOR","SELECTOR_ROOT","SUPPORTS_DIALOG","window","HTMLDialogElement","MIRROR","x","y","isArray","Array","isElement","getElementsByClassName","isHTML","RegExp","prototype","test","bind","isIterable","Symbol","iterator","isString","isNumber","isObject","constructor","Object","arrayFrom","from","arrayUnique","array","length","Set","callOrReturn","camelToKebab","toLowerCase","checkHash","id","location","hash","substring","createElement","type","props","content","elem","class","entries","forEach","name","classes","toggleClass","addClass","addStyle","setAttribute","item","append","createInset","input","returnArray","top","right","bottom","left","getDataSelector","values","join","getOption","multiply","option","root","params","this","fragment","getElementById","min","max","Math","isOverflowElement","overflow","overflowX","overflowY","display","getComputedStyle","UNFOCUSABLE_SELECTORS","isUnfocusable","matches","mergeDeep","objects","result","object","filter","Boolean","key","undefined","normalizeToggleParameters","animated","resizeObserver","ResizeObserver","borderBoxSize","target","blockSize","inlineSize","__resizeCallback__","strToArray","separator","split","toMs","time","num","parseFloat","unit","uuidGenerator","prefix","random","toString","updateOptsByData","opts","dataset","names","optionName","attributeName","hasAttribute","includes","JSON","parse","getEventsPrefix","getClassActive","getDefaultToggleSelector","DEFAULT_PREFIX","updateModule","property","defaultValue","style","setProperty","closest","selectors","getElements","find","t","contains","dir","selector","until","utilIsFn","map","el","elems","is","push","flat","each","fn","isFn","i","list","focus","preventScroll","html","findSelectors","children","DOMParser","parseFromString","querySelectorAll","getElement","context","findSelf","trim","unshift","inDOM","nextAll","parents","removeAttr","removeAttribute","removeClass","getAttribute","s","cls","classList","EventHandler","eventsSet","_id","getNamespaces","eventFullName","event","namespace","events","deligate","_handler","_opts","capture","e","detail","handler","once","offId","isSelector","deligateTarget","addEventListener","add","args","newOpts","optsPosition","getOptsObj","arguments","removeSets","sets","set","removeEventListener","delete","off","emit","dispatchEvent","CustomEvent","Breakpoints","static","breakpoints","_onResize","sort","a","b","mql","media","mq","matchMedia","instances","checkBreakpoints","ignoreConditions","breakpoint","currentData","newBreakpoint","onUpdate","destroy","Base","Map","BASE_NODE_NAME","Default","_data","allInstances","baseElemName","datasetValue","isDataObject","dataName","dataValue","template","_fromTemplate","_fromHTML","querySelector","baseOpts","uuid","eventHandler","getOptionElem","getOptionElems","action","_initBreakpoints","init","isInit","_update","eventName","base","eventPrefix","any","bubbles","update","instance","get","getOrCreate","ToggleMixin","isAnimating","isEntering","isShown","initialPlaceNode","placeholder","async","toggle","show","hide","HIDDEN_CLASS","DATASET_DURATION","DATASET_DURATION_ENTER","DATASET_DURATION_LEAVE","OPTION_SHOWN_CLASS","OPTION_HIDDEN_CLASS","Transition","css","variablePrefix","defaultOpts","updateConfig","promises","toggleRemove","setFinishClass","defaultConfig","datasetData","duration","durationEnter","durationLeave","enter","leave","toggleVariables","offsetWidth","offsetHeight","rect","prop","removeProperty","toggleAnimationClasses","setClasses","setFinishClasses","removeClasses","mode","animations","styles","hasStyle","hasClass","state","getPromises","promisesEvent","promisesAnimation","Promise","resolve","getAnimations","allSettled","finished","promisesDuration","isNaN","setTimeout","cancel","animation","getAwaitPromises","replaceWith","parent","createComment","parentElement","remove","toggleAttribute","shown","hidden","allowRemove","TELEPORT","TELEPORT_DATA_ATTRIBUTE","TELEPORT_DATA_ATTRIBUTES","Teleport","to","move","toParameters","position","keepPlace","before","insertAdjacentElement","reset","addDismiss","_dismiss","preventDefault","stopPropagation","trigger","addEscapeHide","keyCode","stop","callAutofocus","autofocus","activeElement","focusElem","isDialog","tagName","required","focusableElements","baseDestroy","keepInstance","destroyTransition","destroyTeleport","autohide","floating","transitions","toggleOnInterection","anchor","triggerClick","triggerHover","triggerFocus","entered","d","clearTimeout","_hoverTimer","CLIP_PATH_PROPERTY","CSS","supports","valuesToArray","registerProperty","PREFIX","syntax","inherits","head","appendChild","Floating","assign","recalculate","anchorScrollParents","targetStyles","anchorStyles","minHeight","minWidth","getPropertyValue","v","polygonValues","valueEnd","splice","wrapper","createWrapper","wrapperComputedStyle","wrapperStyle","computedValues","arrowPadding","arrowOffset","fromEntries","next","arrowRect","getBoundingClientRect","anchorRect","targetRect","size","arrowData","updatePosition","toJSON","offsetLeft","offsetTop","viewRect","innerWidth","innerHeight","baseM","baseS","hor","dirS","minRect","useFlipM","useFlipS","calculate","m","isStart","isEnd","isCenter","isMainDir","sumPadding","mirrorSize","mirrorDirS","anchorSpace","awailableSizesOffset","awailableSizes","currentSize","mo","so","staticSo","shift","transformOrigin","arrowPosition","getPosition","transform","observe","box","observeResize","interactive","topLayer","attributes","zIndex","margin","background","maxWidth","maxHeight","willChange","pointerEvents","showModal","unobserve","close","floatingTransition","silent","eventParams","toggler","transitionParams","parentNode","promise","run","activeElems","addOutsideHide","callInitShow","hashNavigation","appear","COLLAPSE","OPTION_TOGGLER_ROLE","Collapse","dismiss","super","createOrUpdate","updateTriggers","destroyOpts","a11y","togglers","otherTogglers","flatMap","replaceWord","word","w","concat","ignoreAutofocus","Dropdown","itemClickHide","items","dropdown","_onKeydown","shiftKey","horizontal","togglerHorizontal","arrowActivated","focusableElems","updateToggler","hiddenMode","isControl","textContent","startsWith","lastIndex","currentIndex","findIndex","nextIndex","prevIndex","prevCode","nextCode","click","DOM_ELEMENTS","CLASS_PREVENT_SCROLL","PROPERTY_MODAL_DEEP","DATA_MODAL_DEEP","PROPERTY_ROOT_SCROLLBAR_WIDTH","ARIA_SUFFIX","Modal","awaitPrevious","hidePrevious","disableIfDialog","backdropHide","rightClickHide","returnFocus","hideable","confirm","title","description","group","modal","teleportOpts","transitionsOpts","elemName","updateAriaTargets","_mousedownTarget","cancelAnimations","suffix","_preventScroll","hasPreventScrollModals","shownPreventScrollModals","isOpen","backdrop","backdropIsOpen","shownModals","shownGroupModals","returnFocusElem","reverse","transitionOpts","some","groupModals","documentElement","clientWidth","TABLIST","TAB","TABPANEL","ITEM","ELEMS","ROLE_SUFFIX","OPTION_TAB_ROLE","OPTION_TABPANEL_ROLE","OPTION_TABPANEL_TABINDEX","OPTION_ITEM_ROLE","OPTION_ARIA_ORIENTRATION","OPTION_ARIA_MULTISELECTABLE","TABLIST_SECONDARY_METHODS","Tablist","siblings","alwaysExpanded","multiExpand","awaiteAnimation","awaitePrevious","keyboard","arrowActivation","rtl","focusFilter","tablist","tabs","lastShownTab","index","tabWithState","tabObj","tab","tabpanel","val","hasSelected","initTabs","deleteInstance","cleanStyles","getTab","initTab","selected","tabpanelId","_onTabFocus","_onTabKeydown","currentTarget","tabIntstance","clean","source","without","toggleDisabled","disabled","isDisabled","firstActiveTabIndex","shownPlaceNode","isTab","currentTabIndex","indexOf","nodeName","firstIndex","lastActiveTabIndex","_switchTab","_updateTabIndex","activeIndex","findLast","selectedTab","Autoaction","progressElem","demicial","durationUpdate","pauseOnMouse","resetOnMouse","pauseOnFocus","resetOnFocus","visibilityControl","cssVariable","toggleInterections","resume","pause","interectedMouse","interectedFocus","checkTime","paused","_prevProgress","current","performance","now","timeCurrent","round","timeBegin","progress","toFixed","requestAnimationFrame","autoaction","TOAST","positions","wrappers","Toast","containerRole","containerTabindex","container","limit","limitAnimateEnter","limitAnimateLeave","preventAnimation","nots","getWrapper","rootWrappers","DefaultContainerA11y","obj","role","tabindex","p","addPosition","UI_TOOLTIP","Tooltip","removeTitle","tooltip","_cache","Popover","popover"],"mappings":"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"}