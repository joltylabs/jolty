{"version":3,"file":"jolty.esm.min.js","sources":["../src/helpers/utils/kebabToCamel.js","../src/helpers/utils/upperFirst.js","../src/helpers/constants/index.js","../src/helpers/is/isArray.js","../src/helpers/is/isElement.js","../src/helpers/is/isFunction.js","../src/helpers/is/isHTML.js","../src/helpers/is/isIterable.js","../src/helpers/is/isNumber.js","../src/helpers/is/isObject.js","../src/helpers/is/isString.js","../src/helpers/is/isDialog.js","../src/helpers/utils/arrayFrom.js","../src/helpers/utils/arrayUnique.js","../src/helpers/utils/callOrReturn.js","../src/helpers/utils/camelToKebab.js","../src/helpers/utils/checkHash.js","../src/helpers/utils/createElement.js","../src/helpers/dom/addClass.js","../src/helpers/utils/floating/createInset.js","../src/helpers/utils/getDataSelector.js","../src/helpers/utils/getOption.js","../src/helpers/utils/getOptionElem.js","../src/helpers/utils/getOptionElems.js","../src/helpers/utils/floating/getPosition.js","../src/helpers/utils/isOverflowElement.js","../src/helpers/utils/isUnfocusable.js","../src/helpers/utils/mergeDeep.js","../src/helpers/utils/normalizeToggleParameters.js","../src/helpers/utils/observeResize.js","../src/helpers/utils/replaceWord.js","../src/helpers/utils/returnArray.js","../src/helpers/utils/strToArray.js","../src/helpers/utils/toMs.js","../src/helpers/utils/uuidGenerator.js","../src/helpers/utils/updateOptsByData.js","../src/helpers/utils/getEventsPrefix.js","../src/helpers/utils/getClassActive.js","../src/helpers/utils/getDefaultToggleSelector.js","../src/helpers/utils/updateModule.js","../src/helpers/utils/floating/ResetFloatingCssVariables.js","../src/helpers/utils/valuesToArray.js","../src/helpers/utils/isShown.js","../src/helpers/utils/toggleHideModeState.js","../src/helpers/dom/addStyle.js","../src/helpers/dom/closest.js","../src/helpers/dom/dir.js","../src/helpers/dom/each.js","../src/helpers/dom/filter.js","../src/helpers/dom/focus.js","../src/helpers/dom/fragment.js","../src/helpers/dom/getElement.js","../src/helpers/dom/getElements.js","../src/helpers/dom/inDOM.js","../src/helpers/dom/is.js","../src/helpers/dom/map.js","../src/helpers/dom/nextAll.js","../src/helpers/dom/parents.js","../src/helpers/dom/removeAttribute.js","../src/helpers/dom/removeClass.js","../src/helpers/dom/setAttribute.js","../src/helpers/dom/toggleClass.js","../src/helpers/dom/getBoundingClientRect.js","../src/helpers/dom/getPropertyValue.js","../src/helpers/EventHandler.js","../src/helpers/Breakpoints.js","../src/helpers/Base.js","../src/helpers/ToggleMixin.js","../src/helpers/Transition.js","../src/helpers/Teleport.js","../src/helpers/modules/addDismiss.js","../src/helpers/modules/addEscapeHide.js","../src/helpers/modules/callAutofocus.js","../src/helpers/modules/baseDestroy.js","../src/helpers/modules/toggleOnInterection.js","../src/helpers/Floating.js","../src/helpers/utils/floating/collectCssVariables.js","../src/helpers/modules/floatingTransition.js","../src/helpers/modules/callShowInit.js","../src/helpers/modules/awaitPromise.js","../src/helpers/modules/FocusGuards.js","../src/Collapse.js","../src/Dropdown.js","../src/Dialog.js","../src/Tablist.js","../src/helpers/dom/next.js","../src/helpers/utils/without.js","../src/helpers/Autoaction.js","../src/Toast.js","../src/Tooltip.js","../src/Popover.js"],"sourcesContent":["const cache = {};\nexport default (str = \"\") =>\n  cache[str] ||\n  (cache[str] = str.replace(/-./g, (match) => match[1].toUpperCase()));\n","const cache = {};\nexport default (str = \"\") =>\n  cache[str] || (cache[str] = str[0].toUpperCase() + str.slice(1));\n","import kebabToCamel from \"../utils/kebabToCamel\";\nimport upperFirst from \"../utils/upperFirst\";\n\nexport const UI = \"ui\";\nexport const UI_PREFIX = UI + \"-\";\nexport const UI_EVENT_PREFIX = \".\" + UI;\nexport const VAR_UI_PREFIX = \"--\" + UI_PREFIX;\nexport const DATA_PREFIX = \"data-\";\nexport const DATA_UI_PREFIX = DATA_PREFIX + UI_PREFIX;\nexport const ACTIVE = \"active\";\nexport const CLASS_ACTIVE = UI_PREFIX + ACTIVE;\n\nexport const DEFAULT = \"default\";\nexport const NAME = \"name\";\nexport const MODE = \"mode\";\n\nexport const PX = \"px\";\nexport const NONE = \"none\";\nexport const ID = \"id\";\n\nexport const WIDTH = \"width\";\nexport const HEIGHT = \"height\";\nexport const TOP = \"top\";\nexport const LEFT = \"left\";\nexport const RIGHT = \"right\";\nexport const BOTTOM = \"bottom\";\nexport const CENTER = \"center\";\nexport const START = \"start\";\nexport const END = \"end\";\nexport const UP = \"up\";\nexport const DOWN = \"down\";\nexport const IN = \"in\";\nexport const OUT = \"out\";\nexport const MOVE = \"move\";\nexport const TITLE = \"title\";\n\nexport const HORIZONTAL = \"horizontal\";\nexport const VERTICAL = \"vertical\";\nexport const ABSOLUTE = \"absolute\";\nexport const FIXED = \"fixed\";\nexport const TRANSITION = \"transition\";\n\nexport const DIV = \"div\";\nexport const BUTTON = \"button\";\nexport const WINDOW = \"window\";\nexport const DOCUMENT = \"document\";\nexport const CLASS = \"class\";\nexport const STYLE = \"style\";\nexport const KEY = \"key\";\nexport const ROLE = \"role\";\nexport const ROOT = \"root\";\nexport const CONFIRM = \"confirm\";\nexport const CANCEL = \"cancel\";\n\nexport const BEFORE = \"before\";\nexport const AFTER = \"after\";\n\nexport const MOUSE = \"mouse\";\n\nexport const CLICK = \"click\";\nexport const HOVER = \"hover\";\nexport const FOCUS = \"focus\";\nexport const SCROLL = \"scroll\";\n\nexport const HIDE = \"hide\";\nexport const HIDDEN = \"hidden\";\nexport const SHOW = \"show\";\nexport const SHOWN = \"shown\";\nexport const APPEAR = \"appear\";\n\nexport const TARGET = \"target\";\nexport const AVAILABLE = \"awailable\";\nexport const AVAILABLE_WIDTH = AVAILABLE + \"-\" + WIDTH;\nexport const AVAILABLE_HEIGHT = AVAILABLE + \"-\" + HEIGHT;\nexport const ANCHOR = \"anchor\";\nexport const ANCHOR_WIDTH = ANCHOR + \"-\" + WIDTH;\nexport const ANCHOR_HEIGHT = ANCHOR + \"-\" + HEIGHT;\n\nexport const MODAL = \"modal\";\nexport const CONTENT = \"content\";\nexport const BACKDROP = \"backdrop\";\nexport const POPOVER = \"popover\";\nexport const TOOLTIP = \"tooltip\";\nexport const TOGGLER = \"toggler\";\nexport const TRIGGER = \"trigger\";\nexport const DELAY = \"delay\";\nexport const DROPDOWN = \"dropdown\";\nexport const ARROW = \"arrow\";\nexport const PROGRESS = \"progress\";\nexport const DISMISS = \"dismiss\";\nexport const FLOATING = \"floating\";\nexport const DIALOG = \"dialog\";\n\nexport const FLIP = \"flip\";\nexport const SHRINK = \"shrink\";\nexport const STICKY = \"sticky\";\nexport const PLACEMENT = \"placement\";\nexport const PADDING = \"padding\";\nexport const OFFSET = \"offset\";\nexport const BOUNDARY_OFFSET = \"boundary-\" + OFFSET;\nexport const WEBKIT_PREFIX = \"-webkit-\";\nexport const CLIP_PATH = \"clip-path\";\nexport const ARROW_OFFSET = ARROW + \"-\" + OFFSET;\nexport const ARROW_PADDING = ARROW + \"-\" + PADDING;\nexport const TRUE = \"true\";\nexport const FALSE = \"false\";\nexport const TOP_LAYER = \"top-layer\";\n\nexport const doc = document;\nexport const body = doc.body;\n\nexport const ENTER = \"enter\";\nexport const LEAVE = \"leave\";\nexport const BEFORE_ENTER = BEFORE + upperFirst(ENTER);\nexport const ENTER_ACTIVE = ENTER + upperFirst(ACTIVE);\nexport const ENTER_FROM = ENTER + \"From\";\nexport const ENTER_TO = ENTER + \"To\";\nexport const AFTER_ENTER = AFTER + upperFirst(ENTER);\nexport const BEFORE_LEAVE = BEFORE + upperFirst(LEAVE);\nexport const LEAVE_ACTIVE = LEAVE + upperFirst(ACTIVE);\nexport const LEAVE_FROM = LEAVE + \"From\";\nexport const LEAVE_TO = LEAVE + \"To\";\nexport const AFTER_LEAVE = AFTER + upperFirst(LEAVE);\nexport const HIDE_MODE = HIDE + upperFirst(MODE);\nexport const DURATION = \"duration\";\nexport const DURATION_ENTER = DURATION + upperFirst(ENTER);\nexport const DURATION_LEAVE = DURATION + upperFirst(LEAVE);\n\nexport const ACTION_INIT = \"init\";\nexport const ACTION_DESTROY = \"destroy\";\nexport const ACTION_TOGGLE = \"toggle\";\nexport const ACTION_SHOW = SHOW;\nexport const ACTION_HIDE = HIDE;\nexport const ACTION_ADD = \"add\";\nexport const ACTION_REMOVE = \"remove\";\nexport const ACTION_UPDATE = \"update\";\nexport const ACTION_PAUSE = \"pause\";\nexport const ACTION_RESUME = \"resume\";\nexport const ACTION_RESET = \"reset\";\nexport const ACTION_ON = \"on\";\nexport const ACTION_OFF = \"off\";\nexport const ACTION_EMIT = \"emit\";\nexport const ACTION_ONCE = \"once\";\nexport const ACTION_PREVENT = \"prevent\";\n\nexport const INERT = \"inert\";\nexport const AUTOFOCUS = \"autofocus\";\nexport const TABINDEX = \"tabindex\";\nexport const DISABLED = \"disabled\";\nexport const AUTO = \"auto\";\nexport const POPOVER_DATA_ATTRIBUTE = DATA_UI_PREFIX + POPOVER + \"-wrapper\";\nexport const FLOATING_DATA_ATTRIBUTE = DATA_UI_PREFIX + FLOATING;\nexport const DATA_PREVENT_INERT = DATA_UI_PREFIX + ACTION_PREVENT + \"-\" + INERT;\nexport const DATA_APPEAR = DATA_UI_PREFIX + APPEAR;\nexport const POPOVER_API_MODE_MANUAL = \"manual\";\n\nexport const PLACEHOLDER = \"placeholder\";\n\nexport const EVENT_INIT = ACTION_INIT;\nexport const EVENT_BEFORE_INIT = BEFORE + upperFirst(EVENT_INIT);\nexport const EVENT_DESTROY = ACTION_DESTROY;\nexport const EVENT_BEFORE_DESTROY = BEFORE + upperFirst(EVENT_DESTROY);\nexport const EVENT_BEFORE_SHOW = BEFORE + upperFirst(SHOW);\nexport const EVENT_SHOW = SHOW;\nexport const EVENT_SHOWN = SHOWN;\nexport const EVENT_BEFORE_HIDE = BEFORE + upperFirst(HIDE);\nexport const EVENT_HIDE = HIDE;\nexport const EVENT_HIDDEN = HIDDEN;\nexport const EVENT_PAUSE = ACTION_PAUSE;\nexport const EVENT_RESUME = ACTION_RESUME;\nexport const EVENT_RESET = ACTION_RESET;\nexport const EVENT_MOUSEENTER = MOUSE + ENTER;\nexport const EVENT_MOUSELEAVE = MOUSE + LEAVE;\nexport const EVENT_MOUSEMOVE = MOUSE + MOVE;\nexport const EVENT_MOUSEDOWN = MOUSE + DOWN;\nexport const EVENT_MOUSEUP = MOUSE + UP;\nexport const EVENT_CHANGE = \"change\";\nexport const EVENT_BREAKPOINT = \"breakpoint\";\nexport const EVENT_CLOSE = \"close\";\nexport const EVENT_CLICK = CLICK;\nexport const EVENT_KEYDOWN = KEY + DOWN;\nexport const EVENT_KEYUP = KEY + UP;\nexport const EVENT_FOCUS = FOCUS;\nexport const EVENT_FOCUSIN = FOCUS + IN;\nexport const EVENT_FOCUSOUT = FOCUS + OUT;\nexport const EVENT_RIGHT_CLICK = \"contextmenu\";\nexport const EVENT_VISIBILITY_CHANGE = \"visibilitychange\";\nexport const EVENT_HIDE_PREVENTED = \"hidePrevented\";\nexport const EVENT_ACTION_OUTSIDE = `${EVENT_CLICK}.outside ${EVENT_KEYUP}.outside`;\nexport const EVENT_SCROLL = SCROLL;\nexport const EVENT_RESIZE = \"resize\";\nexport const EVENT_DISABLED = DISABLED;\nexport const EVENT_ENABLED = \"enabled\";\n\nexport const ARIA = \"aria\";\nexport const ARIA_CONTROLS = ARIA + \"-controls\";\nexport const ARIA_EXPANDED = ARIA + \"-expanded\";\nexport const ARIA_SELECTED = ARIA + \"-selected\";\nexport const ARIA_HIDDEN = ARIA + \"-\" + HIDDEN;\nexport const ARIA_MULTISELECTABLE = ARIA + \"-multiselectable\";\nexport const ARIA_LABELLEDBY = ARIA + \"-labelledby\";\nexport const ARIA_DESCRIBEDBY = ARIA + \"-describedby\";\nexport const ARIA_ORIENTATION = ARIA + \"-orientation\";\nexport const ARIA_MODAL = ARIA + \"-\" + MODAL;\nexport const ARIA_LIVE = ARIA + \"-live\";\nexport const ARIA_ATOMIC = ARIA + \"-atomic\";\n\nexport const KEY_ENTER = 13;\nexport const KEY_ESC = 27;\nexport const KEY_SPACE = 32;\nexport const KEY_END = 35;\nexport const KEY_HOME = 36;\nexport const KEY_TAB = 9;\nexport const KEY_ARROW_LEFT = 37;\nexport const KEY_ARROW_UP = 38;\nexport const KEY_ARROW_RIGHT = 39;\nexport const KEY_ARROW_DOWN = 40;\n\nexport const A11Y = \"a11y\";\nexport const OPTION_GROUP = \"group\";\nexport const OPTION_KEEP_PLACE = \"keepPlace\";\nexport const OPTION_PREVENT_SCROLL = \"preventScroll\";\nexport const OPTION_POSITION = \"position\";\nexport const OPTION_TO = \"to\";\nexport const OPTION_ARIA_LABELLEDBY = kebabToCamel(ARIA_LABELLEDBY);\nexport const OPTION_ARIA_DESCRIBEDBY = kebabToCamel(ARIA_DESCRIBEDBY);\nexport const OPTION_ARIA_EXPANDED = kebabToCamel(ARIA_EXPANDED);\nexport const OPTION_ARIA_SELECTED = kebabToCamel(ARIA_SELECTED);\nexport const OPTION_ARIA_CONTROLS = kebabToCamel(ARIA_CONTROLS);\nexport const OPTION_ARIA_HIDDEN = kebabToCamel(ARIA_HIDDEN);\nexport const OPTION_ARIA_LIVE = kebabToCamel(ARIA_LIVE);\nexport const OPTION_ARIA_ATOMIC = kebabToCamel(ARIA_ATOMIC);\nexport const OPTION_TOP_LAYER = \"topLayer\";\nexport const CLASS_ACTIVE_SUFFIX = \"ClassActive\";\nexport const ROLE_SUFFIX = upperFirst(ROLE);\n\nexport const HIDDEN_CLASS = UI_PREFIX + HIDDEN;\n\nexport const TRANSITION_REMOVE_MODE = { [HIDE_MODE]: ACTION_REMOVE };\nexport const DEFAULT_OPTIONS = {\n  [ACTION_INIT]: true,\n  [ACTION_DESTROY]: false,\n  data: \"\",\n  on: null,\n  [APPEAR]: null,\n  eventDispatch: true,\n  eventBubble: true,\n  shown: null,\n  a11y: true,\n  hideMode: HIDDEN,\n  [OPTION_KEEP_PLACE]: true,\n};\nexport const DEFAULT_TOP_LAYER_OPTIONS = {\n  moveModal: true,\n  movePopover: true,\n};\nexport const DEFAULT_FLOATING_OPTIONS = {\n  awaitAnimation: false,\n  placement: BOTTOM,\n  offset: 0,\n  padding: 0,\n  delay: 200,\n  boundaryOffset: 0,\n  shrink: false,\n  flip: true,\n  sticky: false,\n  escapeHide: true,\n  outsideHide: true,\n  mode: POPOVER,\n  focusTrap: false,\n  topLayer: true,\n  popoverApi: true,\n  safeModal: true,\n  floatingClass: \"\",\n  shown: false,\n  arrow: {\n    height: null,\n    width: null,\n    offset: 0,\n    padding: 0,\n  },\n};\n\nexport const SELECTOR_AUTOFOCUS = `[${AUTOFOCUS}]`;\nexport const SELECTOR_DISABLED = `[${DISABLED}]`;\nexport const SELECTOR_INERT = `[${INERT}]`;\n\nexport const SELECTOR_ROOT = \":\" + ROOT;\n\nexport const MIRROR = {\n  [TOP]: BOTTOM,\n  [BOTTOM]: TOP,\n  [LEFT]: RIGHT,\n  [RIGHT]: LEFT,\n  [START]: END,\n  [END]: START,\n  [WIDTH]: HEIGHT,\n  [HEIGHT]: WIDTH,\n  x: \"y\",\n  y: \"x\",\n};\n\nexport const CLIP_PATH_PROPERTY = CSS.supports(CLIP_PATH + \":\" + NONE)\n  ? CLIP_PATH\n  : WEBKIT_PREFIX + CLIP_PATH;\n\nexport const POPOVER_API_SUPPORTED =\n  HTMLElement.prototype.hasOwnProperty(POPOVER);\n\nexport const FOCUSABLE_ELEMENTS_SELECTOR = `:is(:is(a,area)[href],:is(select,textarea,button,input:not([type=\"hidden\"])):not(disabled),details:not(:has(>summary)),iframe,:is(audio,video)[controls],[contenteditable],[tabindex]):not([inert],[inert] *,[tabindex^=\"-\"],[${DATA_UI_PREFIX}focus-guard])`;\n","export default Array.isArray;\n","export default (value) => value && !!value.getElementsByClassName;\n","export default (value) => typeof value === \"function\";\n","export default RegExp.prototype.test.bind(/(<([^>]+)>)/i);\n","import { isString } from \"./index.js\";\nexport default (value) => value && !!value[Symbol.iterator] && !isString(value);\n","export default (value) => typeof value === \"number\";\n","export default (value) => value && value.constructor === Object;\n","export default (value) => typeof value === \"string\";\n","export default (elem) => elem?.tagName === \"DIALOG\";\n","export default Array.from;\n","import arrayFrom from \"./arrayFrom\";\nexport default (array) =>\n  array.length > 1 ? arrayFrom(new Set(array)) : array;\n","import { isFunction } from \"../is\";\nexport default (value, ...data) => (isFunction(value) ? value(...data) : value);\n","const cache = {};\nexport default (str = \"\") =>\n  cache[str] ||\n  (cache[str] = str.replace(/([a-z])([A-Z])/g, \"$1-$2\").toLowerCase());\n","export default (id) => window.location.hash.substring(1) === id;\n","import { isString } from \"../is\";\nimport { addClass, addStyle, setAttribute } from \"../dom\";\nimport { CLASS, STYLE, DIV, doc } from \"../constants\";\nimport camelToKebab from \"./camelToKebab\";\nexport default (type = DIV, props, ...content) => {\n  const elem = doc.createElement(type);\n  if (props) {\n    if (isString(props)) {\n      props = { class: props };\n    }\n    Object.entries(props).forEach(([name, value]) => {\n      if (name === CLASS) {\n        addClass(elem, value);\n      } else if (name === STYLE) {\n        if (isString(value)) {\n          elem.style = value;\n        } else {\n          addStyle(elem, value);\n        }\n      } else {\n        setAttribute(elem, camelToKebab(name), value);\n      }\n    });\n  }\n  content.forEach((item) => item && elem.append(item));\n  return elem;\n};\n","import { toggleClass } from \"./index.js\";\nexport default (elem, classes) => toggleClass(elem, classes, true);\n","import { isArray, isObject, isNumber } from \"../../is/index.js\";\nexport default (input, returnArray) => {\n  let top = 0,\n    right = 0,\n    bottom = 0,\n    left = 0;\n  if (isNumber(input)) {\n    top = right = bottom = left = input;\n  } else if (isArray(input)) {\n    if (input.length === 1) {\n      top = right = bottom = left = input[0];\n    } else if (input.length === 2) {\n      top = bottom = input[0];\n      right = left = input[1];\n    } else if (input.length === 3) {\n      top = input[0];\n      right = left = input[1];\n      bottom = input[2];\n    } else {\n      top = input[0];\n      right = input[1];\n      bottom = input[2];\n      left = input[3];\n    }\n  } else if (isObject(input)) {\n    top = input.top || 0;\n    right = input.right || 0;\n    bottom = input.bottom || 0;\n    left = input.left || 0;\n  }\n  if (returnArray) {\n    return [top, right, bottom, left];\n  } else {\n    return { top, right, bottom, left };\n  }\n};\n","import { DATA_UI_PREFIX } from \"../constants\";\nexport default (...values) => `[${DATA_UI_PREFIX + values.join(\"-\")}]`;\n","import { returnArray, callOrReturn } from \"./index.js\";\nimport { isString } from \"../is\";\nimport { doc } from \"../constants\";\n\nexport default function (multiply, instance, option, root = doc, ...params) {\n  if (!option) return;\n  option = callOrReturn(option, instance, ...params);\n  if (isString(option)) {\n    option = root[multiply ? \"querySelectorAll\" : \"querySelector\"](option);\n  }\n  return multiply ? returnArray(option).filter(Boolean) : option;\n}\n","import getOption from \"./getOption.js\";\nexport default (...params) => getOption(false, ...params);\n","import getOption from \"./getOption.js\";\nexport default (...params) => getOption(true, ...params);\n","import {\n  WIDTH,\n  HEIGHT,\n  TOP,\n  LEFT,\n  RIGHT,\n  BOTTOM,\n  AVAILABLE_WIDTH,\n  AVAILABLE_HEIGHT,\n  START,\n  CENTER,\n  END,\n  MIRROR,\n} from \"../../constants/index.js\";\nimport { isArray } from \"../../is/index.js\";\nimport { createInset } from \"../index.js\";\n\nconst { min, max } = Math;\n\nexport default function ({\n  anchorRect,\n  targetRect,\n  arrow,\n  placement,\n  inTopLayer,\n  boundaryOffset = 0,\n  offset = 0,\n  padding = 0,\n  shrink = false,\n  flip = false,\n  sticky = false,\n  minWidth = 0,\n  minHeight = 0,\n}) {\n  boundaryOffset = createInset(boundaryOffset);\n\n  const viewRect = visualViewport;\n\n  flip = isArray(flip) ? flip : [flip];\n  flip[1] ??= flip[0];\n\n  padding = isArray(padding) ? padding : [padding];\n  padding[1] ??= padding[0];\n\n  if (!inTopLayer) {\n    shrink = false;\n    flip = false;\n    sticky = false;\n  }\n\n  const [baseM, baseS = CENTER] = placement.split(\"-\");\n  const hor = baseM === LEFT || baseM === RIGHT;\n\n  const size = hor ? WIDTH : HEIGHT;\n  const dir = hor ? LEFT : TOP;\n  const dirS = hor ? TOP : LEFT;\n\n  const minRect = { [WIDTH]: minWidth, [HEIGHT]: minHeight };\n\n  let useFlipM = null;\n  let useFlipS = null;\n\n  function calculate() {\n    const m = (useFlipM && MIRROR[baseM]) || baseM;\n    const s = (useFlipS && MIRROR[baseS]) || baseS;\n\n    const isStart = s === START;\n    const isEnd = s === END;\n    const isCenter = s === CENTER;\n    const isMainDir = m === dir;\n    const sumPadding = padding[0] + padding[1];\n    const mirrorSize = MIRROR[size];\n    const mirrorDirS = MIRROR[dirS];\n\n    const anchorSpace = {\n      [TOP]: anchorRect[TOP],\n      [LEFT]: anchorRect[LEFT],\n      [RIGHT]: viewRect[WIDTH] - anchorRect[LEFT] - anchorRect[WIDTH],\n      [BOTTOM]: viewRect[HEIGHT] - anchorRect[TOP] - anchorRect[HEIGHT],\n    };\n\n    anchorSpace[m] -= offset + boundaryOffset[m];\n    anchorSpace[MIRROR[m]] -= boundaryOffset[dirS] + boundaryOffset[mirrorDirS];\n\n    let awailableSizesOffset;\n    if (sticky) {\n      awailableSizesOffset = viewRect[mirrorSize] - sumPadding;\n    } else {\n      awailableSizesOffset = viewRect[mirrorSize] - anchorRect[mirrorSize] / 2;\n      if (isStart) {\n        awailableSizesOffset =\n          anchorSpace[mirrorDirS] + anchorRect[mirrorSize] - sumPadding;\n      } else if (isEnd) {\n        awailableSizesOffset =\n          anchorSpace[dirS] + anchorRect[mirrorSize] - sumPadding;\n      }\n    }\n\n    const awailableSizes = {\n      [size]: max(minRect[size], anchorSpace[m]),\n      [mirrorSize]: max(minRect[mirrorSize], awailableSizesOffset),\n    };\n\n    const currentSize = {\n      [size]: shrink\n        ? min(targetRect[size], awailableSizes[size])\n        : targetRect[size],\n      [mirrorSize]: shrink\n        ? min(targetRect[mirrorSize], awailableSizes[mirrorSize])\n        : targetRect[mirrorSize],\n    };\n\n    if ((flip[0] || flip[1]) && useFlipM === null && useFlipS === null) {\n      if (\n        flip[0] &&\n        targetRect[size] > anchorSpace[m] &&\n        anchorSpace[m] < anchorSpace[MIRROR[m]]\n      ) {\n        useFlipM = true;\n      }\n      if (\n        flip[1] &&\n        anchorSpace[mirrorDirS] <\n          targetRect[mirrorSize] -\n            anchorRect[mirrorSize] +\n            padding[0] +\n            boundaryOffset[mirrorDirS]\n      ) {\n        useFlipS = true;\n      }\n      if (useFlipM || useFlipS) {\n        return calculate();\n      }\n    }\n\n    let mo;\n    if (isMainDir) {\n      mo = anchorRect[dir] - currentSize[size] - offset;\n    } else {\n      mo = anchorRect[MIRROR[dir]] + offset;\n    }\n\n    let so;\n    if (isStart) {\n      so = anchorRect[dirS] + padding[0];\n    } else if (isCenter) {\n      so =\n        anchorRect[dirS] -\n        (currentSize[mirrorSize] - anchorRect[mirrorSize]) / 2;\n    } else {\n      so = anchorRect[mirrorDirS] - currentSize[mirrorSize] - padding[1];\n    }\n\n    const staticSo = so;\n    if (sticky) {\n      if (so < boundaryOffset[dirS]) {\n        if (!isStart) {\n          so = boundaryOffset[dirS];\n          if (anchorRect[dirS] < boundaryOffset[dirS] - padding[0]) {\n            so = anchorRect[dirS] + padding[0];\n          }\n        }\n      } else if (\n        so + currentSize[mirrorSize] + boundaryOffset[mirrorDirS] >\n        viewRect[mirrorSize]\n      ) {\n        if (!isEnd) {\n          so -=\n            so +\n            currentSize[mirrorSize] -\n            viewRect[mirrorSize] +\n            boundaryOffset[mirrorDirS];\n          if (\n            anchorSpace[mirrorDirS] <\n            -padding[1] + boundaryOffset[mirrorDirS]\n          ) {\n            so -=\n              anchorSpace[mirrorDirS] + padding[1] - boundaryOffset[mirrorDirS];\n          }\n        }\n      }\n    }\n\n    const shift = staticSo - so;\n\n    let arrowPosition = {};\n    if (arrow) {\n      // eslint-disable-next-line prefer-const\n      let { padding = 0, offset = 0 } = arrow;\n      padding = isArray(padding) ? padding : [padding];\n      padding[1] ??= padding[0];\n\n      let so;\n      if (isStart) {\n        so = padding[0];\n      } else if (isCenter) {\n        so = currentSize[mirrorSize] / 2 - arrow[mirrorSize] / 2;\n      } else {\n        so = currentSize[mirrorSize] - padding[1] - arrow[mirrorSize];\n      }\n\n      so += shift + max(0, -currentSize[mirrorSize] / 2);\n\n      let mo = -arrow[mirrorSize] / 2 + (isMainDir ? -offset : offset);\n      if (isMainDir) {\n        mo += currentSize[size];\n      }\n      arrowPosition = hor ? [mo, so] : [so, mo];\n    }\n\n    let transformOrigin;\n    if (arrow) {\n      transformOrigin = arrowPosition;\n    } else {\n      const mo = isStart\n        ? padding[0]\n        : isEnd\n        ? currentSize[mirrorSize] - padding[1]\n        : currentSize[MIRROR[size]] / 2;\n      const so = isMainDir ? currentSize[size] : 0;\n      transformOrigin = hor ? [so, mo] : [mo, so];\n    }\n\n    return {\n      [dir]: mo,\n      [dirS]: so,\n      [AVAILABLE_WIDTH]: awailableSizes[WIDTH],\n      [AVAILABLE_HEIGHT]: awailableSizes[HEIGHT],\n      arrow: arrowPosition,\n      placement: useFlipM ? MIRROR[placement] : placement,\n      transformOrigin,\n    };\n  }\n  return calculate();\n}\n","export default (elem) => {\n  const { overflow, overflowX, overflowY, display } = getComputedStyle(elem);\n  return (\n    !/inline|contents/.test(display) &&\n    /auto|hidden|scroll|overlay|clip/.test(overflow + overflowY + overflowX)\n  );\n};\n","import { SELECTOR_DISABLED, SELECTOR_INERT } from \"../constants\";\nconst UNFOCUSABLE_SELECTORS = `${SELECTOR_DISABLED},${SELECTOR_INERT}`;\nexport default (elem) => elem.matches(UNFOCUSABLE_SELECTORS);\n","import { isArray, isObject } from \"../is\";\nexport default function mergeDeep(...objects) {\n  const result = {};\n  for (const object of objects.filter(Boolean)) {\n    for (const [key, value] of Object.entries(object)) {\n      if (isObject(result[key])) {\n        result[key] = isObject(value) ? mergeDeep(result[key], value) : value;\n      } else if (isArray(result[key])) {\n        result[key] = isArray(value) ? [...result[key], ...value] : value;\n      } else if (value !== undefined) {\n        result[key] = value;\n      }\n    }\n  }\n  return result;\n}\n","import { isObject } from \"../is\";\nexport default (animated = true) =>\n  isObject(animated) ? { animated: true, ...animated } : { animated };\n","const resizeObserver = new ResizeObserver((entries) => {\n  for (const { borderBoxSize, target } of entries) {\n    const { blockSize, inlineSize } = borderBoxSize[0];\n    target.__resizeCallback__(inlineSize, blockSize);\n  }\n});\nfunction observeResize(target, fn) {\n  target.__resizeCallback__ = fn;\n  resizeObserver.observe(target, { box: \"border-box\" });\n}\nexport { resizeObserver, observeResize };\n","export default (str, word) =>\n  str\n    .split(\" \")\n    .filter((w) => w !== word)\n    .join(\" \");\n","import arrayFrom from \"./arrayFrom\";\nimport { isIterable } from \"../is\";\nexport default (elem) =>\n  elem !== undefined ? (isIterable(elem) ? arrayFrom(elem) : [elem]) : [];\n","import { isArray } from \"../is\";\nexport default (str = \"\", separator = \" \") =>\n  str ? (isArray(str) ? str : str.split(separator)).filter(Boolean) : [];\n","export default (time) => {\n  if (!time) return;\n  let num = parseFloat(time);\n  let unit = time.match(/m?s/);\n  if (unit) {\n    unit = unit[0];\n  }\n  if (unit === \"s\") {\n    num *= 1000;\n  }\n  return num;\n};\n","export default (prefix = \"\") =>\n  prefix + Math.random().toString(36).substring(2, 12);\n","import {\n  UI,\n  APPEAR,\n  OPTION_KEEP_PLACE,\n  OPTION_TOP_LAYER,\n  OPTION_PREVENT_SCROLL,\n  MODAL,\n  TRUE,\n  FALSE,\n} from \"../constants\";\nimport { isArray } from \"../is\";\nimport { upperFirst } from \"../utils\";\nexport const OPTIONS_BOOLEAN = [\n  APPEAR,\n  OPTION_KEEP_PLACE,\n  OPTION_TOP_LAYER,\n  OPTION_PREVENT_SCROLL,\n  MODAL,\n];\nexport default (opts, { dataset }, names) => {\n  names.forEach((name) => {\n    let optionName = name;\n    let attributeName = name;\n    if (isArray(name)) {\n      optionName = name[0];\n      attributeName = name[1];\n    }\n    let value = dataset[UI + upperFirst(attributeName)];\n    const hasAttribute = value !== undefined;\n    if (hasAttribute) {\n      if (OPTIONS_BOOLEAN.includes(optionName)) {\n        value =\n          value === \"\" || value === TRUE\n            ? true\n            : value === FALSE\n            ? false\n            : undefined;\n      } else if (value && value[0] === \"{\") {\n        value = JSON.parse(value);\n      }\n\n      if (value !== undefined) {\n        opts[optionName] = value;\n      }\n    }\n  });\n  return opts;\n};\n","import { UI_PREFIX } from \"../constants\";\nexport default (name) => UI_PREFIX + name + \":\";\n","import { UI_PREFIX, ACTIVE } from \"../constants\";\nexport default (name) => UI_PREFIX + (name ? name + \"-\" : \"\") + ACTIVE;\n","import { DATA_UI_PREFIX, ACTION_TOGGLE } from \"../constants\";\nexport default (id, multiply) =>\n  `[${DATA_UI_PREFIX + ACTION_TOGGLE}${\n    multiply ? \"~\" : \"\"\n  }=\"${id}\"],[href=\"#${id}\"]`;\n","import { DEFAULT } from \"../constants\";\nimport { isObject, isString } from \"../is\";\nimport { upperFirst } from \"./index\";\nconst DEFAULT_PREFIX = upperFirst(DEFAULT);\nexport default ({ opts, constructor }, name, property = false, defaults) => {\n  const defaultValue = constructor[DEFAULT_PREFIX + upperFirst(name)];\n  let value = opts[name];\n  if (defaults && value && isString(value)) {\n    value = defaults[value];\n  }\n  if (isObject(value)) {\n    opts[name] = { ...defaultValue, ...value };\n  } else if (value) {\n    opts[name] = { ...defaultValue };\n    if (property) {\n      opts[name][property] = value;\n    }\n  }\n  return opts;\n};\n","import {\n  ARROW_OFFSET,\n  ARROW_PADDING,\n  BOUNDARY_OFFSET,\n  doc,\n  DROPDOWN,\n  FLIP,\n  OFFSET,\n  PADDING,\n  PLACEMENT,\n  POPOVER,\n  SHRINK,\n  STICKY,\n  STYLE,\n  TOOLTIP,\n  VAR_UI_PREFIX,\n} from \"../../constants/index.js\";\nimport { createElement } from \"../index.js\";\n\nconst registerProperty = CSS.registerProperty;\n\nexport default () => {\n  let css = \"\";\n  [TOOLTIP, DROPDOWN, POPOVER].forEach((name) => {\n    const PREFIX = VAR_UI_PREFIX + name + \"-\";\n    [\n      STICKY,\n      FLIP,\n      SHRINK,\n      PLACEMENT,\n      PADDING,\n      OFFSET,\n      BOUNDARY_OFFSET,\n      ARROW_OFFSET,\n      ARROW_PADDING,\n    ].forEach((prop) => {\n      if (registerProperty) {\n        registerProperty({\n          name: PREFIX + prop,\n          syntax: \"*\",\n          inherits: false,\n        });\n      } else {\n        css += PREFIX + prop + \":;\";\n      }\n    });\n  });\n\n  if (!registerProperty) {\n    doc.head.appendChild(createElement(STYLE, false, `*{${css}}`));\n  }\n};\n","export default ({ value }) => value.trim().split(\" \").map(parseFloat);\n","import { ACTION_REMOVE, CLASS, HIDDEN_CLASS } from \"../constants/index.js\";\nimport { inDOM } from \"../dom/index.js\";\n\nexport default (elem, hideMode) => {\n  return hideMode === ACTION_REMOVE\n    ? inDOM(elem)\n    : hideMode === CLASS\n    ? !elem.classList.contains(HIDDEN_CLASS)\n    : !elem.hasAttribute(hideMode);\n};\n","import {\n  ACTION_DESTROY,\n  ACTION_REMOVE,\n  CLASS,\n  doc,\n  FLOATING_DATA_ATTRIBUTE,\n  HIDE_MODE,\n  OPTION_KEEP_PLACE,\n  PLACEHOLDER,\n  UI_PREFIX,\n} from \"../constants/index.js\";\n\nexport default (s, instance, opts = instance.opts) => {\n  const base = instance.base;\n  const mode = opts[HIDE_MODE];\n  if (mode === ACTION_REMOVE) {\n    if (s) {\n      if (opts[OPTION_KEEP_PLACE]) {\n        instance[PLACEHOLDER]?.replaceWith(base);\n        instance[PLACEHOLDER] = null;\n      } else {\n        instance._parent?.append(base);\n      }\n    } else {\n      if (opts[OPTION_KEEP_PLACE]) {\n        base.replaceWith(\n          (instance[PLACEHOLDER] ||= doc.createComment(\n            UI_PREFIX + PLACEHOLDER + \":\" + base.id,\n          )),\n        );\n      } else {\n        const parent = base.parentElement;\n        if (parent) {\n          instance._parent = parent.hasAttribute(FLOATING_DATA_ATTRIBUTE)\n            ? parent.parentElement\n            : parent;\n          base.remove();\n        }\n      }\n    }\n  } else if (mode !== ACTION_DESTROY && mode !== CLASS) {\n    base.toggleAttribute(mode, !s);\n  }\n};\n","import { isIterable, isObject } from \"../is\";\nimport { camelToKebab } from \"../utils\";\nexport default function addStyle(elem, name, value) {\n  if (isIterable(elem)) {\n    elem.forEach((elem) => addStyle(elem, name, value));\n  } else {\n    if (isObject(name)) {\n      for (const key in name) addStyle(elem, key, name[key]);\n    } else {\n      elem.style.setProperty(camelToKebab(name), value);\n    }\n  }\n}\n","import { getElements } from \"./index.js\";\nexport default (elem, selectors) =>\n  getElements(selectors).find((t) => t === elem || t.contains(elem));\n","import { isFunction } from \"../is\";\nimport { filter, map, is } from \"./index.js\";\n\nexport default (elem, property, selector, until) => {\n  const utilIsFn = isFunction(until);\n  return map(elem, (el) => {\n    const elems = [];\n    while (el) {\n      el = el[property];\n      if (el) {\n        if (until && (utilIsFn ? until(el) : is(el, until))) break;\n        elems.push(el);\n      }\n    }\n    return filter(elems, selector);\n  }).flat();\n};\n","import { getElements } from \"./index.js\";\nexport default (elems, fn) => {\n  elems = getElements(elems);\n  elems.forEach(fn);\n  return elems;\n};\n","import { isFunction } from \"../is\";\nimport { is } from \"../dom\";\nimport { arrayFrom } from \"../utils\";\n\nexport default (elems, selector) => {\n  const isFn = isFunction(selector);\n  elems = arrayFrom(elems);\n  return selector\n    ? elems.filter((elem, i, list) =>\n        isFn ? selector(elem, i, list) : is(elem, selector),\n      )\n    : elems;\n};\n","export default (elem, opts = { preventScroll: true }) =>\n  elem && elem.focus(opts);\n","import { isString } from \"../is\";\nimport { arrayFrom } from \"../utils\";\nexport default (html, findSelectors) => {\n  let children = html;\n  if (isString(html)) {\n    const parser = new DOMParser();\n    const doc = parser.parseFromString(html, \"text/html\");\n    if (findSelectors) {\n      return arrayFrom(doc.querySelectorAll(findSelectors));\n    }\n    children = doc.body.children;\n  }\n  return children\n    ? children.length > 1\n      ? arrayFrom(children)\n      : children[0]\n    : \"\";\n};\n","import { getElements } from \"./index.js\";\nexport default (selector, context, findSelf) =>\n  getElements(selector, context, findSelf)[0];\n","import { isElement, isString, isIterable, isHTML } from \"../is\";\nimport { arrayUnique, returnArray, arrayFrom } from \"../utils\";\nimport { getElement, is } from \"../dom\";\nimport { WINDOW, DOCUMENT, doc } from \"../constants\";\nimport { fragment } from \"./index.js\";\n\nexport default function getElements(selector, context = doc, findSelf = false) {\n  if (isElement(selector)) {\n    return [selector];\n  }\n  let result = selector;\n  if (isString(context)) {\n    context = getElement(context);\n  }\n  if (!isElement(context) || !selector) return [];\n  if (isString(selector)) {\n    selector = selector.trim();\n    if (selector === DOCUMENT) {\n      result = doc;\n    } else if (selector === WINDOW) {\n      result = window;\n    } else if (isHTML(selector)) {\n      result = fragment(selector);\n    } else {\n      result = context.querySelectorAll(selector);\n    }\n  } else if (isIterable(selector)) {\n    result = arrayFrom(selector, (item) => getElements(item, context)).flat();\n  }\n\n  result = returnArray(result);\n\n  if (findSelf && is(context, selector)) {\n    result.unshift(context);\n  }\n  return arrayUnique(result).filter(Boolean);\n}\n","import { body } from \"../constants\";\nexport default (elem) => elem && body.contains(elem);\n","import { isString, isIterable, isFunction } from \"../is\";\nimport { arrayFrom } from \"../utils\";\nexport default (elem, selector) =>\n  elem === selector\n    ? true\n    : isString(selector)\n    ? elem.matches(selector)\n    : isIterable(selector)\n    ? arrayFrom(selector).includes(elem)\n    : isFunction(selector) && selector(elem);\n","import { getElements } from \"./index.js\";\nexport default (elems, fn) => getElements(elems).map(fn);\n","import { dir } from \"./index.js\";\nexport default (elem, selector, until) =>\n  dir(elem, \"nextElementSibling\", selector, until);\n","import { dir } from \"./index.js\";\nexport default (elem, selector, until) =>\n  dir(elem, \"parentElement\", selector, until);\n","import { isIterable } from \"../is\";\nimport { strToArray } from \"../utils\";\nexport default (elem, names) => {\n  names = strToArray(names);\n  if (isIterable(elem)) {\n    elem.forEach((elem) =>\n      names.forEach((name) => elem && elem.removeAttribute(name)),\n    );\n  } else {\n    names.forEach((name) => elem && elem.removeAttribute(name));\n  }\n};\n","import { toggleClass } from \"./index.js\";\nexport default (elem, classes) => toggleClass(elem, classes, false);\n","import { isFunction, isArray } from \"../is\";\nexport default function setAttribute(elem, name, value) {\n  if (!elem) return;\n  if (isArray(elem)) {\n    return elem.forEach((elem) => setAttribute(elem, name, value));\n  }\n  if (isFunction(value)) {\n    value = value(elem.getAttribute(name));\n  }\n  if (value === null) {\n    elem.removeAttribute(name);\n  } else if (value !== undefined) {\n    elem.setAttribute(name, value);\n  }\n}\n","import { isElement, isIterable, isArray } from \"../is\";\nimport { strToArray } from \"../utils\";\nimport { ACTION_ADD, ACTION_REMOVE } from \"../constants\";\n\nexport default function toggleClass(elem, classes, s) {\n  if (isArray(classes)) {\n    classes = classes.filter(Boolean).join(\" \");\n  }\n  const cls = strToArray(classes);\n  if (isElement(elem)) {\n    s ??= !elem.classList.contains(cls[0]);\n    elem.classList[s ? ACTION_ADD : ACTION_REMOVE](...cls);\n  } else if (isIterable(elem)) {\n    elem.forEach((el) => toggleClass(el, cls, s));\n  }\n}\n","export default (elem) => elem.getBoundingClientRect().toJSON();\n","export default (style, name) => style.getPropertyValue(name).trim();\n","import { ACTION_ON, ACTION_OFF, ACTION_EMIT, ACTION_ONCE } from \"./constants\";\nimport { isString, isObject } from \"./is\";\nimport { closest, each } from \"./dom\";\nimport { strToArray, arrayFrom } from \"./utils\";\n\nconst getOptsObj = (args, newOpts) => {\n  args = arrayFrom(args);\n  const optsPosition = isString(args[2]) ? 4 : 3;\n  let opts = args[optsPosition];\n  opts = isObject(opts) ? opts : { capture: !!opts };\n  args[optsPosition] = { ...opts, ...newOpts };\n  return args;\n};\n\nclass EventHandler {\n  constructor() {\n    this.eventsSet = new Set();\n    for (const name of [ACTION_ON, ACTION_OFF, ACTION_EMIT, ACTION_ONCE]) {\n      this[name] = this[name].bind(this);\n    }\n    this._id = 0;\n  }\n  getNamespaces(eventFullName) {\n    let [event, ...namespace] = eventFullName.split(/\\.(?![^([]*[\\]])/);\n    namespace = namespace?.join(\".\");\n    event = event.replace(/[[\\]']+/g, \"\");\n    return { eventFullName, event, namespace };\n  }\n  on(elems, events, ...params) {\n    let [_handler, _opts] = params;\n    let deligate;\n\n    if (isString(_handler)) {\n      [deligate, _handler, _opts] = params;\n    }\n    if (!isObject(_opts)) {\n      _opts = { capture: !!_opts };\n    }\n\n    _handler = ((fn) => (e) => {\n      fn(e, e.detail);\n    })(_handler);\n\n    elems = each(elems, (elem) => {\n      events = isString(events)\n        ? strToArray(events)\n        : isObject(events)\n        ? [events]\n        : events;\n      events.forEach((eventFullName) => {\n        const id = this._id++;\n        const opts = { ..._opts };\n        let handler = _handler;\n\n        const { event, namespace } = isString(eventFullName)\n          ? this.getNamespaces(eventFullName)\n          : eventFullName;\n\n        if (opts.once) {\n          handler = ((fn) => (e) => {\n            this.offId(id);\n            fn(e);\n          })(handler);\n        }\n        opts.once = false;\n\n        if (deligate) {\n          const isSelector = isString(deligate);\n          handler = ((fn) => (e) => {\n            e.deligateTarget = isSelector\n              ? e.target.closest(deligate)\n              : closest(e.target, deligate);\n            if (e.deligateTarget) {\n              fn(e);\n            }\n          })(handler);\n        }\n\n        elem.addEventListener(event, handler, opts);\n        this.eventsSet.add({\n          id,\n          elem,\n          eventFullName,\n          event,\n          namespace,\n          handler,\n          opts,\n        });\n      });\n    });\n    return elems;\n  }\n  once() {\n    return this.on(...getOptsObj(arguments, { once: true }));\n  }\n  offId(id) {\n    this.removeSets([arrayFrom(this.eventsSet).find((s) => s.id === id)]);\n  }\n  removeSets(sets, opts) {\n    sets.forEach((set) => {\n      if (!set) return;\n      set.elem.removeEventListener(set.event, set.handler, opts);\n      this.eventsSet.delete(set);\n    });\n  }\n  off(elems, events, handler, opts) {\n    const eventsSet = this.eventsSet;\n    if (!arguments.length) {\n      this.removeSets(eventsSet, opts);\n    } else {\n      return each(elems, (elem) => {\n        if (events) {\n          strToArray(events).forEach((eventFullName) => {\n            const { event, namespace } = this.getNamespaces(eventFullName);\n            const sets = arrayFrom(eventsSet).filter(\n              (set) =>\n                set.elem === elem &&\n                (!namespace || set.namespace === namespace) &&\n                (!event || set.event === event) &&\n                (!handler || set.handler === handler),\n            );\n\n            this.removeSets(sets, opts);\n          });\n        } else {\n          this.removeSets(\n            [...eventsSet].filter((e) => e.elem === elem),\n            opts,\n          );\n        }\n      });\n    }\n  }\n  emit(elems, events, opts) {\n    each(elems, (elem) => {\n      strToArray(events).forEach((event) => {\n        elem.dispatchEvent(new CustomEvent(event, opts));\n      });\n    });\n  }\n}\n\nexport { EventHandler };\n","import { PX, EVENT_CHANGE } from \"./constants\";\nimport { mergeDeep } from \"./utils\";\n\nclass Breakpoints {\n  static mql = {};\n  static instances = new Set();\n  constructor(breakpoints, opts) {\n    const unit = opts.unit ?? PX;\n    this._onResize = this._onResize.bind(this);\n    breakpoints = Object.entries(breakpoints).sort((a, b) => a[0] - b[0]);\n    this.mql = breakpoints.map(([width, data], i) => {\n      width = +width;\n      const media = !i\n        ? `not all and (min-width:${breakpoints[i + 1][0]}${unit})`\n        : `(min-width:${width}${unit})`;\n      const mq = (this.constructor.mql[width] ||= window.matchMedia(media));\n      mq.addEventListener(EVENT_CHANGE, this._onResize);\n      return { mq, width, data };\n    });\n    this.breakpoints = breakpoints;\n    this.opts = opts;\n    this._onResize();\n    this.constructor.instances.add(this);\n  }\n  _onResize(e) {\n    if (!e || e.matches) {\n      this.checkBreakpoints();\n    }\n  }\n  checkBreakpoints(ignoreConditions) {\n    const { opts, breakpoint, mql } = this;\n    let currentData, newBreakpoint;\n    for (const { width, data, mq } of mql) {\n      if (width && !mq.matches) break;\n      newBreakpoint = [data, width];\n      currentData = mergeDeep(currentData ?? data, data);\n    }\n    if (ignoreConditions || !breakpoint || breakpoint[1] !== newBreakpoint[1]) {\n      this.breakpoint = newBreakpoint;\n      opts.onUpdate && opts.onUpdate(newBreakpoint, currentData);\n    }\n\n    return this.breakpoint;\n  }\n  destroy() {\n    this.mql.forEach(({ mq }) =>\n      mq.removeEventListener(EVENT_CHANGE, this._onResize),\n    );\n    this.constructor.instances.delete(this);\n  }\n}\n\nexport default Breakpoints;\n","import {\n  DATA_UI_PREFIX,\n  EVENT_BREAKPOINT,\n  ACTION_TOGGLE,\n  ACTION_SHOW,\n  ACTION_HIDE,\n  ACTION_INIT,\n  ACTION_DESTROY,\n  ACTION_UPDATE,\n  ACTION_ON,\n  ACTION_OFF,\n  ACTION_EMIT,\n  ACTION_ONCE,\n  doc,\n  POPOVER_API_SUPPORTED,\n  UI_PREFIX,\n  POPOVER,\n} from \"./constants\";\nimport { isArray, isFunction, isHTML, isObject, isString } from \"./is\";\nimport { getElement, fragment } from \"./dom\";\nimport {\n  mergeDeep,\n  uuidGenerator,\n  callOrReturn,\n  getDataSelector,\n  arrayFrom,\n} from \"./utils\";\nimport { EventHandler } from \"./EventHandler\";\nimport Breakpoints from \"./Breakpoints\";\n\nif (!POPOVER_API_SUPPORTED) {\n  document.documentElement.classList.add(UI_PREFIX + \"no-\" + POPOVER);\n}\n\nfunction getDataValue(_data, dataName, elem) {\n  const value = callOrReturn(_data[dataName], elem);\n  if (!isObject(value)) return {};\n  return _data[value.data]\n    ? { ...getDataValue(_data, value.data, elem), ...value }\n    : value;\n}\n\nclass Base {\n  static allInstances = new Map();\n  static components = {};\n  constructor(elem, opts) {\n    if (isFunction(opts)) {\n      opts = opts(elem);\n    }\n    opts ??= {};\n    const { NAME, BASE_NODE_NAME, Default, _data, _templates, allInstances } =\n      this.constructor;\n\n    Base.components[NAME] = this.constructor;\n\n    const baseElemName = BASE_NODE_NAME ?? NAME;\n\n    let dataName = opts.data;\n    let datasetValue, isDataObject;\n\n    if (elem == null) {\n      opts = mergeDeep(Default, getDataValue(_data, dataName, elem), opts);\n      elem = isString(opts.template)\n        ? callOrReturn(_templates[opts.template], opts)\n        : opts.template(opts);\n      this._fromTemplate = true;\n    } else if (elem) {\n      if (isHTML(elem)) {\n        elem = fragment(elem);\n        this._fromHTML = true;\n      } else if (isString(elem)) {\n        elem = doc.querySelector(elem);\n      }\n      datasetValue = elem.getAttribute(DATA_UI_PREFIX + NAME)?.trim() || \"\";\n      isDataObject = datasetValue[0] === \"{\";\n      dataName ||= !isDataObject && datasetValue;\n\n      datasetValue = isDataObject ? JSON.parse(datasetValue) : {};\n\n      if (dataName && !_data[dataName]) return;\n\n      opts = mergeDeep(\n        Default,\n        getDataValue(_data, dataName, elem),\n        datasetValue,\n        opts,\n      );\n    }\n    elem = getElement(elem);\n\n    if (!elem) return;\n\n    this[baseElemName] = elem;\n\n    this.baseOpts = this.opts = opts;\n\n    this.id = elem.id ||= this.uuid = uuidGenerator(UI_PREFIX + NAME + \"-\");\n    const eventHandler = new EventHandler();\n    [ACTION_ON, ACTION_OFF, ACTION_ONCE].forEach((name) => {\n      this[name] = (...params) => {\n        eventHandler[name](...params);\n        return this;\n      };\n    });\n\n    [\n      ACTION_TOGGLE,\n      ACTION_SHOW,\n      ACTION_HIDE,\n      ACTION_INIT,\n      ACTION_DESTROY,\n      ACTION_UPDATE,\n      ACTION_EMIT,\n    ].forEach((action) => (this[action] = this[action]?.bind(this)));\n\n    if (this.baseOpts.breakpoints) {\n      this._initBreakpoints();\n    } else {\n      this.init();\n    }\n\n    allInstances.set(this.id, this);\n\n    return this;\n  }\n  _initBreakpoints() {\n    this.breakpoints = new Breakpoints(\n      { 0: this.baseOpts, ...this.baseOpts.breakpoints },\n      {\n        onUpdate: (breakpoint, opts) => {\n          this.emit(EVENT_BREAKPOINT, breakpoint, this.breakpoint);\n          this.opts = breakpoint[1]\n            ? mergeDeep(opts, breakpoint[0])\n            : { ...opts };\n          delete this.opts.breakpoints;\n          if (opts.destroy) {\n            this.destroy();\n          } else if (this.isInit) {\n            this._update?.();\n          } else {\n            this.init();\n          }\n          this.breakpoint = breakpoint;\n        },\n      },\n    );\n  }\n  emit(eventName, ...detail) {\n    const { opts, base } = this;\n    const { on, eventDispatch, eventBubble, eventPrefix } = opts;\n    detail = [this, ...detail];\n    if (on) {\n      on[eventName] && on[eventName](...detail);\n      on.any && on.any(eventName, ...detail);\n    }\n\n    if (\n      isArray(eventDispatch) ? eventDispatch.includes(eventName) : eventDispatch\n    ) {\n      const bubbles =\n        (isArray(eventBubble) && eventBubble.includes(eventName)) ||\n        !!eventBubble;\n      base.dispatchEvent(\n        new CustomEvent(eventPrefix + eventName, { detail, bubbles }),\n      );\n    }\n    return this;\n  }\n  update(opts) {\n    if (opts) {\n      this.baseOpts = mergeDeep(this.baseOpts, opts);\n      if (this.breakpoints || this.baseOpts.breakpoints) {\n        this.breakpoints?.destroy();\n        this.breakpoints = false;\n        this._initBreakpoints();\n      } else {\n        this._update?.();\n      }\n    }\n    return this;\n  }\n  get base() {\n    return this[this.constructor.BASE_NODE_NAME ?? this.constructor.NAME];\n  }\n  get instances() {\n    return this.constructor.instances;\n  }\n  get Default() {\n    return this.constructor.Default;\n  }\n  static get(elem) {\n    if (elem === undefined) return [...this.instances.values()];\n    for (const [id, instance] of this.instances) {\n      if ([id, instance.base].includes(elem)) {\n        return instance;\n      }\n    }\n  }\n  static getOrCreate(elem, opts) {\n    return this.get(elem, opts) || new this(elem, opts);\n  }\n  static initAll(root = doc) {\n    return arrayFrom(root.querySelectorAll(getDataSelector(this.NAME))).map(\n      (elem) => this.getOrCreate(elem),\n    );\n  }\n  static updateDefault(opts) {\n    return mergeDeep(this.Default, opts);\n  }\n  static data(name, opts) {\n    if (!opts) {\n      opts = name;\n      name = \"\";\n    }\n    if (!opts) return this._data[name];\n    this._data[name] = opts;\n    return this;\n  }\n  static dispatchTopLayer(type) {\n    const Toast = this.components.toast;\n    if (Toast) {\n      Toast.forceTopLayer(type);\n    }\n  }\n}\nexport default Base;\n","export default (Base, NAME) =>\n  class extends Base {\n    static _data = {};\n    static instances = new Map();\n    static get NAME() {\n      return NAME;\n    }\n    get isAnimating() {\n      return this.transition.isAnimating;\n    }\n    get initialPlaceNode() {\n      return (\n        this.teleport?.placeholder ?? this.transition?.placeholder ?? this.base\n      );\n    }\n    hide(opts) {\n      return this.toggle(false, opts);\n    }\n    show(opts) {\n      return this.toggle(true, opts);\n    }\n    static toggle(id, s, opts) {\n      return this.instances.get(id)?.toggle(s, opts);\n    }\n    static show(id, opts) {\n      return this.instances.get(id)?.show(opts);\n    }\n    static hide(id, opts) {\n      return this.instances.get(id)?.hide(opts);\n    }\n  };\n","import {\n  UI,\n  UI_PREFIX,\n  VAR_UI_PREFIX,\n  HIDDEN,\n  SHOWN,\n  WIDTH,\n  HEIGHT,\n  CLASS,\n  PX,\n  ACTION_DESTROY,\n  ACTION_ADD,\n  ACTION_REMOVE,\n  NONE,\n  FLOATING_DATA_ATTRIBUTE,\n  OPTION_KEEP_PLACE,\n  BEFORE_ENTER,\n  ENTER,\n  ENTER_ACTIVE,\n  ENTER_FROM,\n  ENTER_TO,\n  AFTER_ENTER,\n  BEFORE_LEAVE,\n  LEAVE,\n  LEAVE_ACTIVE,\n  LEAVE_FROM,\n  LEAVE_TO,\n  AFTER_LEAVE,\n  HIDE_MODE,\n  DURATION,\n  TRANSITION,\n  NAME,\n  HIDDEN_CLASS,\n} from \"./constants\";\nimport { toggleClass, removeClass } from \"./dom\";\nimport { isString, isFunction, isObject } from \"./is\";\nimport {\n  toMs,\n  camelToKebab,\n  updateOptsByData,\n  upperFirst,\n  isShown,\n  toggleHideModeState,\n} from \"./utils\";\n\n// const SHOWN_CLASS = UI_PREFIX + SHOWN;\nconst DATASET_DURATION = UI + upperFirst(DURATION);\nconst DATASET_DURATION_ENTER = DATASET_DURATION + upperFirst(ENTER);\nconst DATASET_DURATION_LEAVE = DATASET_DURATION + upperFirst(LEAVE);\nconst OPTION_SHOWN_CLASS = SHOWN + upperFirst(CLASS);\nconst OPTION_HIDDEN_CLASS = HIDDEN + upperFirst(CLASS);\n\nexport default class Transition {\n  static Default = {\n    name: UI,\n    css: true,\n    cssVariables: false,\n    [HIDE_MODE]: HIDDEN,\n    [OPTION_HIDDEN_CLASS]: \"\",\n    [OPTION_SHOWN_CLASS]: \"\",\n    [ENTER]: null,\n    [BEFORE_ENTER]: null,\n    [ENTER_ACTIVE]: null,\n    [ENTER_FROM]: null,\n    [ENTER_TO]: null,\n    [AFTER_ENTER]: null,\n    [BEFORE_LEAVE]: null,\n    [LEAVE_ACTIVE]: null,\n    [AFTER_LEAVE]: null,\n    [DURATION]: null,\n    [OPTION_KEEP_PLACE]: true,\n  };\n  constructor(base, opts = {}, defaultOpts) {\n    this.base = base;\n    this.updateConfig(opts, defaultOpts);\n    this.promises = [];\n    if (this.opts[HIDE_MODE] === ACTION_REMOVE && base[HIDDEN]) {\n      toggleHideModeState(false, this, this.opts);\n      base[HIDDEN] = false;\n    } else {\n      this.setFinishClass();\n    }\n    this.isInit = true;\n  }\n  updateConfig(opts, defaultOpts = {}) {\n    const base = this.base;\n    const defaultConfig = Transition.Default;\n    const dataset = base.dataset;\n\n    const datasetData = {};\n\n    const duration = dataset[DATASET_DURATION];\n    const durationEnter = dataset[DATASET_DURATION_ENTER];\n    const durationLeave = dataset[DATASET_DURATION_LEAVE];\n    if (duration || durationEnter || durationLeave) {\n      datasetData.duration =\n        durationEnter || durationLeave\n          ? {\n              enter: toMs(durationEnter ?? duration),\n              leave: toMs(durationLeave ?? duration),\n            }\n          : toMs(duration);\n    }\n\n    opts = isString(opts) ? { name: opts } : opts;\n    opts = { ...defaultConfig, ...defaultOpts, ...opts, ...datasetData };\n\n    this.opts = updateOptsByData(opts, base, [\n      HIDE_MODE,\n      OPTION_HIDDEN_CLASS,\n      OPTION_SHOWN_CLASS,\n      ENTER_ACTIVE,\n      ENTER_FROM,\n      ENTER_TO,\n      LEAVE_ACTIVE,\n      LEAVE_FROM,\n      LEAVE_TO,\n      [NAME, TRANSITION + \"Name\"],\n    ]);\n\n    this.teleport = opts.teleport;\n\n    if (opts[HIDE_MODE] !== CLASS) {\n      removeClass(base, HIDDEN_CLASS);\n    }\n\n    return this;\n  }\n  toggleVariables(s) {\n    const { offsetWidth, offsetHeight, style } = this.base;\n    const rect = [offsetWidth, offsetHeight];\n    [WIDTH, HEIGHT].forEach((name, i) => {\n      const prop = VAR_UI_PREFIX + TRANSITION + \"-\" + name;\n      if (s) {\n        style.setProperty(prop, rect[i] + PX);\n      } else {\n        style.removeProperty(prop);\n      }\n    });\n  }\n\n  toggleAnimationClasses(s) {\n    this.base.style.transition = NONE;\n    this.setClasses([s ? ENTER_FROM : LEAVE_FROM]);\n    this.base.offsetWidth;\n    this.base.style.transition = \"\";\n    this.setClasses([s ? ENTER_ACTIVE : LEAVE_ACTIVE, s ? ENTER_TO : LEAVE_TO]);\n    return this;\n  }\n  setFinishClasses(s) {\n    this.removeClasses(s);\n    this.promises.length = 0;\n  }\n  removeClasses() {\n    this.setClasses(null);\n  }\n\n  setClasses(animations) {\n    const { base, opts } = this;\n    const classes = [\"\", \"\"];\n    const styles = [{}, {}];\n    let hasStyle = false;\n    let hasClass = false;\n    [\n      ENTER_ACTIVE,\n      ENTER_FROM,\n      ENTER_TO,\n      LEAVE_ACTIVE,\n      LEAVE_FROM,\n      LEAVE_TO,\n    ].forEach((state) => {\n      const s = animations?.includes(state) | 0;\n      if (isObject(opts[state])) {\n        hasStyle = true;\n        styles[s] = { ...styles[s], ...opts[state] };\n      } else {\n        hasClass = true;\n        classes[s] +=\n          (opts[state] ??\n            (opts.name ? opts.name + \"-\" + camelToKebab(state) : \"\")) + \" \";\n      }\n    });\n    if (hasClass) {\n      classes.forEach((classes, s) =>\n        base.classList[s ? ACTION_ADD : ACTION_REMOVE](\n          ...classes.split(\" \").filter(Boolean),\n        ),\n      );\n    }\n    if (hasStyle) {\n      styles.forEach((styles, s) => {\n        Object.entries(styles).forEach(([name, value]) => {\n          if (name[0] !== \"-\") {\n            name = camelToKebab(name);\n          }\n          if (s) {\n            base.style.setProperty(name, value);\n          } else {\n            base.style.removeProperty(name);\n          }\n        });\n      });\n    }\n  }\n  collectPromises(s) {\n    const { base, promises, opts } = this;\n    const state = s ? ENTER : LEAVE;\n    const duration = opts.duration?.[state] ?? opts.duration;\n\n    promises.length = 0;\n    let promisesEvent, promisesAnimation;\n    if (isFunction(opts[state])) {\n      promisesEvent = new Promise((resolve) => opts[state](base, resolve));\n    }\n    let animations;\n    if (opts.css) {\n      animations = base.getAnimations();\n      promisesAnimation =\n        animations.length &&\n        Promise.allSettled(animations.map(({ finished }) => finished));\n    }\n\n    if (!duration && !promisesEvent && !promisesAnimation) return promises;\n\n    const promisesDuration =\n      !isNaN(duration) && duration != null\n        ? new Promise((resolve) => setTimeout(resolve, duration))\n        : null;\n\n    promisesDuration && promises.push(promisesDuration);\n    promisesEvent && promises.push(promisesEvent);\n    promisesAnimation && promises.push(promisesAnimation);\n\n    this.animations = animations;\n\n    return promises;\n  }\n  get isAnimating() {\n    return !!this.promises.length;\n  }\n  cancel() {\n    this.animations?.forEach((animation) => animation.cancel());\n    return Promise.allSettled([this.getAwaitPromise()]);\n  }\n  getAwaitPromise() {\n    return Promise.allSettled(this.promises);\n  }\n\n  setFinishClass(s) {\n    const { base, opts } = this;\n\n    s ??= isShown(base);\n\n    if (opts[HIDE_MODE] === CLASS) {\n      toggleClass(base, HIDDEN_CLASS, !s);\n    }\n    opts[OPTION_HIDDEN_CLASS] &&\n      toggleClass(base, opts[OPTION_HIDDEN_CLASS], !s);\n    opts[OPTION_SHOWN_CLASS] && toggleClass(base, opts[OPTION_SHOWN_CLASS], s);\n  }\n  async run(\n    s,\n    animated = true,\n    { show, hide, shown, hidden, destroy, allowRemove = true } = {},\n  ) {\n    const { base, opts } = this;\n    if (!base) return;\n\n    opts[s ? BEFORE_ENTER : BEFORE_LEAVE]?.(base);\n\n    const toggle = (s) => {\n      allowRemove && toggleHideModeState(s, this, opts);\n      this.setFinishClass(s);\n      if (!s && opts[HIDE_MODE] === ACTION_DESTROY) {\n        this.destroy();\n        destroy?.(base);\n      }\n    };\n\n    if (s) {\n      toggle(s);\n      show?.(base);\n    } else {\n      hide?.(base);\n    }\n\n    if (animated) {\n      if (opts.css) {\n        opts.cssVariables && this.toggleVariables(true);\n        this.toggleAnimationClasses(s);\n      }\n\n      this.collectPromises(s);\n      if (this.promises.length) {\n        await this.getAwaitPromise();\n      }\n      if (opts.css) {\n        opts.cssVariables && this.toggleVariables(false);\n        this.setFinishClasses(s);\n      }\n    }\n\n    if (s) {\n      shown?.(base);\n    } else {\n      hidden?.(base);\n      toggle(s);\n    }\n\n    opts[s ? AFTER_ENTER : AFTER_LEAVE]?.(base);\n  }\n  destroy() {\n    this.removeClasses();\n    this.placeholder?.replaceWith(this.base);\n    this.isInit = false;\n  }\n  static createOrUpdate(transition, base, opts, defaultOpts) {\n    return transition\n      ? transition.update(opts, defaultOpts)\n      : new Transition(base, opts, defaultOpts);\n  }\n}\n","import {\n  UI_PREFIX,\n  OPTION_TO,\n  OPTION_POSITION,\n  OPTION_KEEP_PLACE,\n  doc,\n} from \"./constants\";\nimport { isString, isObject } from \"./is\";\nimport {\n  mergeDeep,\n  callOrReturn,\n  updateOptsByData,\n  upperFirst,\n  kebabToCamel,\n} from \"./utils\";\nconst TELEPORT = \"teleport\";\nconst TELEPORT_DATA_ATTRIBUTE = kebabToCamel(UI_PREFIX + TELEPORT);\nconst TELEPORT_DATA_ATTRIBUTES = [\n  [OPTION_TO, TELEPORT],\n  [OPTION_POSITION, TELEPORT + upperFirst(OPTION_POSITION)],\n  [OPTION_KEEP_PLACE, TELEPORT + upperFirst(OPTION_KEEP_PLACE)],\n];\n\nclass Teleport {\n  static Default = {\n    [OPTION_TO]: false,\n    [OPTION_POSITION]: \"beforeend\",\n    [OPTION_KEEP_PLACE]: true,\n    enableAttributes: true,\n  };\n  constructor(elem, opts = {}, defaultOpts) {\n    this.elem = elem;\n    this.update(opts, defaultOpts);\n  }\n  update(opts, defaultOpts = {}) {\n    const dataset = this.elem.dataset;\n    const defaultConfig = this.constructor.Default;\n    if (opts === false && !dataset[TELEPORT_DATA_ATTRIBUTE]) {\n      return this.destroy();\n    }\n    opts = isObject(opts) ? opts : { to: opts };\n    opts = mergeDeep(defaultConfig, defaultOpts, opts);\n\n    if (opts.enableAttributes) {\n      this.opts = updateOptsByData(opts, this.elem, TELEPORT_DATA_ATTRIBUTES);\n    } else {\n      this.opts = opts;\n    }\n\n    return this;\n  }\n  move(...toParameters) {\n    const { opts, elem } = this;\n    const { position, keepPlace } = opts;\n    let to = callOrReturn(opts.to, ...toParameters);\n    to = isString(to) ? doc.querySelector(to) : to;\n\n    if (!to) return;\n    this.placeholder ||= keepPlace\n      ? doc.createComment(UI_PREFIX + TELEPORT + \":\" + elem.id)\n      : null;\n    if (this.placeholder) {\n      elem.before(this.placeholder);\n    }\n    to.insertAdjacentElement(position, elem);\n    return this;\n  }\n  destroy() {\n    this.reset();\n  }\n  reset() {\n    this.placeholder?.replaceWith(this.elem);\n    this.placeholder = null;\n    return this;\n  }\n  static createOrUpdate(teleport, elem, opts, defaultOpts) {\n    return teleport\n      ? teleport.update(opts, defaultOpts)\n      : opts !== false ||\n        (opts.enableAttributes && elem.dataset[TELEPORT_DATA_ATTRIBUTE])\n      ? new Teleport(elem, opts, defaultOpts)\n      : null;\n  }\n}\nexport default Teleport;\n","import { DATA_UI_PREFIX, DISMISS, EVENT_CLICK } from \"../constants\";\nimport { isString } from \"../is\";\nconst eventName = EVENT_CLICK + \".\" + DISMISS;\nexport default function (\n  instance,\n  elem = instance.base,\n  action = instance.hide,\n) {\n  if (instance._dismiss) {\n    instance.off(elem, eventName);\n  }\n  if (instance.opts[DISMISS]) {\n    instance.on(\n      elem,\n      eventName,\n      isString(instance.opts[DISMISS])\n        ? instance.opts[DISMISS]\n        : `[${DATA_UI_PREFIX + DISMISS}=\"\"],[${DATA_UI_PREFIX + DISMISS}=\"${\n            instance.constructor.NAME\n          }\"]`,\n      (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        action({ event, trigger: event.deligateTarget });\n      },\n    );\n    instance._dismiss = true;\n  }\n}\n","import { EVENT_KEYDOWN, KEY_ESC, CANCEL } from \"../constants\";\nconst eventName = EVENT_KEYDOWN + \".escapeHide\";\n\nexport default function (instance, s, elem = instance.base) {\n  if (s) {\n    instance.on(elem, eventName, (event) => {\n      if (event.keyCode === KEY_ESC) {\n        (instance.opts.escapeHide.stop ?? true) && event.stopPropagation();\n        instance.hide({ event });\n        instance.emit(CANCEL, { event });\n      }\n    });\n  } else {\n    instance.off(elem, eventName);\n  }\n}\n","import {\n  FOCUSABLE_ELEMENTS_SELECTOR,\n  doc,\n  AUTOFOCUS,\n  DATA_UI_PREFIX,\n} from \"../constants\";\nimport { getOptionElem } from \"../utils/index.js\";\nimport { isDialog } from \"../is/index.js\";\nimport { focus } from \"../dom/index.js\";\n\nexport default (instance, elem = instance.base) => {\n  const autofocus = instance.opts.autofocus;\n  let focusElem = getOptionElem(\n    instance,\n    autofocus === true\n      ? `[${AUTOFOCUS}],[${DATA_UI_PREFIX + AUTOFOCUS}=\"\"],[${\n          DATA_UI_PREFIX + AUTOFOCUS\n        }=\"${instance.constructor.NAME}\"]`\n      : autofocus,\n    elem,\n  );\n\n  focusElem ||= elem.contains(doc.activeElement) && doc.activeElement;\n\n  if (!focusElem && instance.opts.focusTrap && !isDialog(elem)) {\n    focusElem = elem.querySelector(FOCUSABLE_ELEMENTS_SELECTOR) ?? elem;\n  }\n\n  focus(focusElem);\n};\n","import { EVENT_DESTROY, ID, MODAL } from \"../constants\";\n\nexport default (\n  instance,\n  {\n    remove = false,\n    keepInstance = false,\n    destroyTransition = true,\n    destroyTeleport = true,\n  } = {},\n) => {\n  const {\n    base,\n    off,\n    emit,\n    autohide,\n    transition,\n    floating,\n    teleport,\n    id,\n    uuid,\n    instances,\n    breakpoints,\n  } = instance;\n\n  if (autohide) {\n    autohide.destroy();\n    instance.autohide = null;\n  }\n  if (floating) {\n    floating.destroy();\n    instance.floating = null;\n  }\n  if (destroyTransition && transition) {\n    transition.destroy();\n    if (instance.constructor.NAME === MODAL) {\n      instance.transitions = null;\n    } else {\n      instance.transition = null;\n    }\n  }\n  if (destroyTeleport && teleport) {\n    teleport.destroy();\n    instance.teleport = null;\n  }\n\n  off();\n\n  if (!keepInstance) {\n    base.id.includes(uuid) && base.removeAttribute(ID);\n    breakpoints?.destroy();\n    instances.delete(id);\n  }\n  if (remove) {\n    base.remove();\n  }\n\n  emit(EVENT_DESTROY);\n  instance.isInit = false;\n  return instance;\n};\n","import {\n  HOVER,\n  FOCUS,\n  CLICK,\n  EVENT_CLICK,\n  EVENT_MOUSEENTER,\n  EVENT_MOUSELEAVE,\n  EVENT_FOCUSOUT,\n  EVENT_FOCUSIN,\n  EVENT_MOUSEDOWN,\n} from \"../constants\";\nimport { isArray } from \"../is\";\n\nexport default ({\n  toggler,\n  target,\n  instance,\n  trigger,\n  action = instance.toggle,\n  delay,\n}) => {\n  const { opts, on } = instance;\n  trigger ??= opts.trigger;\n  delay ??= opts.delay;\n\n  if (!trigger) return;\n\n  const triggerClick = trigger.includes(CLICK);\n  const triggerHover = trigger.includes(HOVER);\n  const triggerFocus = trigger.includes(FOCUS);\n  const events = [];\n  let isMouseDown = false;\n  if (triggerHover || triggerFocus) {\n    delay = isArray(delay) ? delay : [delay, delay];\n  }\n  if (triggerClick) {\n    on(toggler, EVENT_CLICK, (event) =>\n      action(null, { event, trigger: toggler }),\n    );\n  }\n  if (triggerHover) {\n    events.push(EVENT_MOUSEENTER, EVENT_MOUSELEAVE);\n  }\n  if (triggerFocus) {\n    events.push(EVENT_FOCUSIN, EVENT_FOCUSOUT);\n    on(toggler, EVENT_MOUSEDOWN, () => {\n      isMouseDown = true;\n      clearTimeout(instance._hoverTimer);\n      requestAnimationFrame(() => (isMouseDown = false));\n    });\n  }\n  if (triggerHover || triggerFocus) {\n    on([toggler, target], events, (event) => {\n      const { type } = event;\n      const isFocus = type === EVENT_FOCUSIN || type === EVENT_FOCUSOUT;\n      if (\n        (type === EVENT_FOCUSIN && isMouseDown) ||\n        (type === EVENT_FOCUSOUT && triggerHover && target.matches(\":\" + HOVER))\n      ) {\n        return;\n      }\n\n      const entered =\n        (triggerHover && type === EVENT_MOUSEENTER) ||\n        (triggerFocus && type === EVENT_FOCUSIN);\n      const d = isFocus ? 0 : delay[entered ? 0 : 1];\n      clearTimeout(instance._hoverTimer);\n      if (d) {\n        instance._hoverTimer = setTimeout(\n          () => action(entered, { trigger: toggler, event }),\n          d,\n        );\n      } else {\n        action(entered, { event, trigger: event.target });\n      }\n    });\n  }\n};\n","import {\n  VAR_UI_PREFIX,\n  NONE,\n  WIDTH,\n  HEIGHT,\n  ANCHOR,\n  TOP,\n  LEFT,\n  PX,\n  DIV,\n  AVAILABLE_WIDTH,\n  AVAILABLE_HEIGHT,\n  body,\n  EVENT_SCROLL,\n  EVENT_RESIZE,\n  FLOATING_DATA_ATTRIBUTE,\n  DATA_UI_PREFIX,\n  INERT,\n  DIALOG,\n  ABSOLUTE,\n  CANCEL,\n  FLIP,\n  SHRINK,\n  STICKY,\n  PLACEMENT,\n  PADDING,\n  OFFSET,\n  ARROW,\n  TRUE,\n  POPOVER,\n  MODAL,\n  MODE,\n  POPOVER_API_SUPPORTED,\n  TOP_LAYER,\n  FIXED,\n  EVENT_KEYDOWN,\n  FOCUSABLE_ELEMENTS_SELECTOR,\n  KEY_TAB,\n  POPOVER_API_MODE_MANUAL,\n  UI_EVENT_PREFIX,\n  FALSE,\n  FLOATING,\n  CLASS,\n  CENTER,\n  AUTO,\n  CONTENT,\n} from \"./constants\";\nimport {\n  createElement,\n  getPosition,\n  returnArray,\n  isOverflowElement,\n  observeResize,\n  resizeObserver,\n  ResetFloatingCssVariables,\n  collectCssVariables,\n} from \"./utils\";\nimport { EventHandler } from \"./EventHandler\";\nimport {\n  getBoundingClientRect,\n  getPropertyValue,\n  parents,\n  setAttribute,\n  focus,\n} from \"./dom\";\nimport { FocusGuards } from \"./modules/index.js\";\nimport { isDialog } from \"./is/index.js\";\n\nResetFloatingCssVariables();\n\nexport default class Floating {\n  constructor({\n    target,\n    anchor,\n    arrow,\n    opts,\n    name = \"\",\n    base,\n    onTopLayer,\n    defaultTopLayerOpts,\n    hide,\n    teleport,\n  }) {\n    const { on, off } = new EventHandler();\n\n    Object.assign(this, {\n      target,\n      anchor,\n      arrow,\n      opts,\n      name,\n      on,\n      off,\n      base,\n      onTopLayer,\n      defaultTopLayerOpts,\n      hide,\n      teleport,\n    });\n  }\n  init() {\n    const { target, anchor, arrow, opts, name, base, on, defaultTopLayerOpts } =\n      this;\n    const PREFIX = VAR_UI_PREFIX + name + \"-\";\n\n    const anchorScrollParents = parents(anchor, isOverflowElement);\n    const anchorStyles = getComputedStyle(anchor);\n    const targetStyles = getComputedStyle(target);\n\n    let [flip, sticky, shrink, placement, mode, topLayer] = [\n      STICKY,\n      FLIP,\n      SHRINK,\n      PLACEMENT,\n      MODE,\n      TOP_LAYER,\n    ].map(\n      (name) =>\n        getPropertyValue(anchorStyles, PREFIX + name) ||\n        getPropertyValue(targetStyles, PREFIX + name),\n    );\n\n    flip = flip\n      ? flip.split(\" \").map((v) => v === TRUE)\n      : returnArray(opts[FLIP]);\n\n    sticky = sticky ? sticky === TRUE : opts[STICKY];\n    shrink = shrink ? shrink === TRUE : opts[SHRINK];\n\n    if (topLayer !== FALSE) {\n      this.topLayer = topLayer = opts[TOP_LAYER] || defaultTopLayerOpts;\n    } else {\n      this.topLayer = topLayer = false;\n    }\n\n    this[PLACEMENT] = placement =\n      base.getAttribute(DATA_UI_PREFIX + name + \"-\" + PLACEMENT) ||\n      placement ||\n      opts[PLACEMENT];\n\n    this[CLASS] =\n      base.getAttribute(DATA_UI_PREFIX + name + \"-\" + FLOATING + \"-\" + CLASS) ??\n      opts.floatingClass;\n\n    this[MODE] = mode =\n      base.getAttribute(DATA_UI_PREFIX + name + \"-\" + MODE) ||\n      mode ||\n      opts[MODE];\n\n    const modeIsModal = mode.startsWith(MODAL);\n\n    const usePopoverApi =\n      topLayer && !modeIsModal && opts.popoverApi && POPOVER_API_SUPPORTED;\n\n    const inTopLayer =\n      (topLayer && (!opts.popoverApi || POPOVER_API_SUPPORTED)) || modeIsModal;\n\n    const moveToRoot =\n      topLayer &&\n      (!modeIsModal || topLayer.moveModal) &&\n      (!usePopoverApi || topLayer.movePopover);\n\n    const useFocusGuards =\n      (opts.focusTrap && !modeIsModal) || (usePopoverApi && moveToRoot);\n\n    const wrapper = this.createWrapper(mode, moveToRoot, usePopoverApi);\n\n    if (moveToRoot && !modeIsModal && !opts.focusTrap) {\n      on(anchor, EVENT_KEYDOWN, (e) => {\n        if (e.keyCode === KEY_TAB && !e.shiftKey) {\n          const focusElem = target.querySelector(FOCUSABLE_ELEMENTS_SELECTOR);\n          if (focusElem) {\n            e.preventDefault();\n            focus(focusElem);\n          }\n        }\n      });\n    }\n\n    if (mode === MODAL || mode === DIALOG) {\n      this._toggleApi(useFocusGuards);\n      return this;\n    }\n\n    const wrapperStyle = wrapper.style;\n\n    const {\n      padding,\n      offset = opts.offset,\n      boundaryOffset = opts.boundaryOffset,\n      arrowPadding,\n      arrowOffset,\n      wrapperComputedStyle,\n    } = collectCssVariables(anchorStyles, targetStyles, wrapper, PREFIX);\n\n    let anchorRect = getBoundingClientRect(anchor);\n\n    const targetRect = {};\n    [WIDTH, HEIGHT].forEach((size) => {\n      targetRect[size] = parseFloat(wrapperComputedStyle[size]);\n      wrapperStyle.setProperty(PREFIX + size, targetRect[size] + PX);\n      wrapperStyle.setProperty(\n        PREFIX + ANCHOR + \"-\" + size,\n        anchorRect[size] + PX,\n      );\n    });\n\n    let arrowData;\n    if (arrow) {\n      arrowData = { [WIDTH]: arrow.offsetWidth, [HEIGHT]: arrow.offsetHeight };\n      arrowData[PADDING] = arrowPadding ?? opts[ARROW]?.padding ?? 0;\n      arrowData[OFFSET] = arrowOffset ?? opts[ARROW]?.offset ?? 0;\n    }\n\n    const params = {\n      anchorRect,\n      targetRect,\n      arrow: arrowData,\n      placement,\n      inTopLayer,\n      flip,\n      sticky,\n      shrink,\n      offset,\n      boundaryOffset,\n      padding,\n      minHeight: parseFloat(targetStyles.minHeight) || 0,\n      minWidth: parseFloat(targetStyles.minWidth) || 0,\n    };\n\n    let prevTop = 0;\n    let pendingUpdate = false;\n    const updatePosition = () => {\n      if (pendingUpdate) return;\n      pendingUpdate = true;\n\n      anchorRect = getBoundingClientRect(anchor);\n\n      if (!inTopLayer) {\n        anchorRect.left = anchorRect.x = anchor.offsetLeft;\n        anchorRect.top = anchorRect.y = anchor.offsetTop;\n        anchorRect.right = anchor.offsetLeft + anchorRect.width;\n        anchorRect.bottom = anchor.offsetTop + anchorRect.height;\n      }\n\n      const position = getPosition({ ...params, anchorRect });\n\n      if (inTopLayer) {\n        position.top += window.scrollY;\n        position.left += window.scrollX;\n      }\n\n      if (prevTop && Math.abs(prevTop - position.top) > 50) {\n        prevTop = position.top;\n        requestAnimationFrame(() => {\n          pendingUpdate = false;\n        });\n        return updatePosition();\n      }\n      prevTop = position.top;\n\n      setAttribute(\n        wrapper,\n        DATA_UI_PREFIX + \"current-\" + PLACEMENT,\n        position[PLACEMENT],\n      );\n\n      if (shrink) {\n        [AVAILABLE_WIDTH, AVAILABLE_HEIGHT].forEach((name) =>\n          wrapperStyle.setProperty(PREFIX + name, position[name] + PX),\n        );\n      }\n\n      if (arrow) {\n        [LEFT, TOP].forEach((dir, i) =>\n          wrapperStyle.setProperty(\n            PREFIX + ARROW + \"-\" + dir,\n            position.arrow[i] + PX,\n          ),\n        );\n      }\n      wrapperStyle.setProperty(\n        PREFIX + \"transform-origin\",\n        `${position.transformOrigin[0]}px ${position.transformOrigin[1]}px`,\n      );\n\n      wrapperStyle.translate = `${position.left}px ${position.top}px 0`;\n\n      requestAnimationFrame(() => {\n        pendingUpdate = false;\n      });\n    };\n\n    observeResize(target, (width, height) => {\n      targetRect[WIDTH] = width;\n      targetRect[HEIGHT] = height;\n      updatePosition();\n    });\n\n    updatePosition();\n\n    this._toggleApi(useFocusGuards);\n\n    on(anchorScrollParents, EVENT_SCROLL, updatePosition, {\n      passive: true,\n    });\n    on(visualViewport, [EVENT_SCROLL, EVENT_RESIZE], updatePosition, {\n      passive: true,\n    });\n    on(window, EVENT_SCROLL, updatePosition, {\n      passive: true,\n    });\n    this.updatePosition = updatePosition.bind(this);\n    return this;\n  }\n\n  _toggleApi(useFocusGuards) {\n    const { wrapper, opts, mode, topLayer, anchor, target, onTopLayer } = this;\n    const wrapperIsDialog = isDialog(wrapper);\n    const isModal =\n      mode.startsWith(MODAL) && (!opts.safeModal || POPOVER_API_SUPPORTED);\n    const isPopover = topLayer && POPOVER_API_SUPPORTED && wrapper.popover;\n\n    if (wrapperIsDialog) {\n      if (isModal) {\n        if (wrapper.open) wrapper.close();\n        wrapper.showModal();\n        onTopLayer?.(MODAL);\n      } else {\n        if (isPopover) {\n          wrapper.showPopover();\n          wrapper.open = true;\n          onTopLayer?.(POPOVER);\n        } else {\n          wrapper.show();\n        }\n      }\n      this.on(wrapper, CANCEL + UI_EVENT_PREFIX, (e) => e.preventDefault());\n    } else if (isPopover) {\n      wrapper.showPopover();\n      onTopLayer?.(POPOVER);\n    }\n\n    if (useFocusGuards) {\n      this.focusGuards = new FocusGuards(target, {\n        focusAfterAnchor: !opts.focusTrap,\n        anchor,\n        topLayer,\n        strategy: ABSOLUTE,\n        onFocusOut: () => {\n          if (wrapperIsDialog) {\n            this.hide?.();\n          }\n        },\n      });\n    }\n  }\n\n  createWrapper(mode, moveToRoot, usePopoverApi) {\n    const { target, name, anchor, opts } = this;\n\n    const style = {\n      zIndex: 999,\n      margin: 0,\n      padding: 0,\n      background: NONE,\n      maxWidth: NONE,\n      maxHeight: NONE,\n      overflow: \"unset\",\n      pointerEvents: NONE,\n      display: \"flex\",\n      justifyContent: CENTER,\n      alignItems: CENTER,\n    };\n\n    if (mode === MODAL || mode === DIALOG) {\n      style.position = FIXED;\n      style.inset = 0;\n      style.height = style.width = AUTO;\n    } else {\n      style.position = ABSOLUTE;\n      style.inset = AUTO;\n      style.left = 0;\n      style.top = 0;\n      style.height = style.width = \"fit-\" + CONTENT;\n      style.willChange = \"transform\";\n      style.minWidth = \"max-\" + CONTENT;\n    }\n\n    const attributes = {\n      style,\n      class: this.class,\n      [FLOATING_DATA_ATTRIBUTE]: name,\n      [DATA_UI_PREFIX + \"current-mode\"]: mode,\n    };\n\n    if (usePopoverApi) {\n      attributes[POPOVER] = POPOVER_API_MODE_MANUAL;\n    }\n\n    if (opts.interactive !== undefined && !opts.interactive) {\n      attributes[INERT] = \"\";\n      attributes.style.pointerEvents = NONE;\n    } else {\n      target.style.pointerEvents = AUTO;\n    }\n\n    const wrapper = (this.wrapper = createElement(\n      mode.startsWith(MODAL) || mode.startsWith(DIALOG) ? DIALOG : DIV,\n      attributes,\n    ));\n\n    if (this.teleport) {\n      this.teleport.opts.to = wrapper;\n      this.teleport.move();\n    }\n\n    if (moveToRoot) {\n      body.append(wrapper);\n    } else {\n      anchor.after(wrapper);\n    }\n\n    return wrapper;\n  }\n  destroy() {\n    this.off();\n    resizeObserver.unobserve(this.target);\n    this.wrapper.close?.();\n    if (this.wrapper.popover && POPOVER_API_SUPPORTED) {\n      this.wrapper.hidePopover();\n    }\n    this.focusGuards?.destroy();\n    this.wrapper.remove();\n    this.teleport.reset();\n  }\n}\n","import {\n  ARROW_OFFSET,\n  ARROW_PADDING,\n  BOUNDARY_OFFSET,\n  CLIP_PATH_PROPERTY,\n  OFFSET,\n  PADDING,\n} from \"../../constants/index.js\";\nimport { createInset, kebabToCamel, valuesToArray } from \"../index.js\";\nimport { getPropertyValue } from \"../../dom/index.js\";\n\nexport default (anchorStyles, targetStyles, wrapper, PREFIX) => {\n  const valuesNames = [\n    PADDING,\n    OFFSET,\n    BOUNDARY_OFFSET,\n    ARROW_OFFSET,\n    ARROW_PADDING,\n  ];\n  const values = valuesNames\n    .map((name) => {\n      let value =\n        getPropertyValue(anchorStyles, PREFIX + name) ||\n        getPropertyValue(targetStyles, PREFIX + name);\n      if (!value) return;\n      value = value.split(\" \");\n      if (name === BOUNDARY_OFFSET) {\n        value = createInset(value, true);\n      } else {\n        value[1] ??= value[0];\n      }\n      return { name, value };\n    })\n    .filter(Boolean);\n\n  const polygonValues = values\n    .map(({ name, value }) => {\n      if (name === BOUNDARY_OFFSET) {\n        const valueEnd = value.splice(2).join(\" \");\n        value = value.join(\" \");\n        return [value, valueEnd].join(\",\");\n      }\n      return value.join(\" \");\n    })\n    .join(\",\");\n\n  wrapper.style.setProperty(CLIP_PATH_PROPERTY, `polygon(${polygonValues})`);\n\n  const wrapperComputedStyle = getComputedStyle(wrapper);\n\n  const computedValues = wrapperComputedStyle[CLIP_PATH_PROPERTY].slice(8, -1)\n    .split(\",\")\n    .values();\n\n  const result = { wrapperComputedStyle };\n\n  if (values.length) {\n    values.forEach(({ name }) => {\n      let value = valuesToArray(computedValues.next());\n      if (name === BOUNDARY_OFFSET) {\n        value = [...value, ...valuesToArray(computedValues.next())];\n      } else if (name === OFFSET || name === ARROW_OFFSET) {\n        value = value[0];\n      }\n      result[kebabToCamel(name)] = value;\n    });\n  }\n\n  if (values.length) {\n    wrapper.style.removeProperty(CLIP_PATH_PROPERTY);\n  }\n\n  return result;\n};\n","import {\n  EVENT_SHOW,\n  EVENT_HIDE,\n  ARROW,\n  doc,\n  EVENT_SHOWN,\n  EVENT_HIDDEN,\n  FLOATING,\n  EVENT_ACTION_OUTSIDE,\n} from \"../constants\";\nimport { getDataSelector } from \"../utils\";\nimport { addEscapeHide, callAutofocus } from \"../modules\";\nimport Floating from \"../Floating.js\";\nimport { closest, focus } from \"../dom/index.js\";\n\nexport default (instance, { s, animated, silent, eventParams }) => {\n  const { transition, base, opts, toggler, emit, constructor, teleport } =\n    instance;\n  const name = constructor.NAME;\n  const target = instance[name];\n  const anchor = toggler ?? base;\n  const transitionParams = {};\n  transition.parent = null;\n\n  if (!silent && !s) {\n    emit(EVENT_HIDE, eventParams);\n  }\n\n  if (s) {\n    transitionParams[EVENT_SHOW] = () => {\n      const arrow = target.querySelector(getDataSelector(name, ARROW));\n\n      instance[FLOATING] = new Floating({\n        teleport,\n        base,\n        anchor,\n        target,\n        arrow,\n        opts,\n        hide: instance.hide,\n        defaultTopLayerOpts: instance.constructor.DefaultTopLayer,\n        name,\n        onTopLayer(type) {\n          constructor.dispatchTopLayer(type);\n        },\n      }).init();\n      if (!silent) {\n        emit(EVENT_SHOW, eventParams);\n      }\n    };\n  }\n\n  !s && instance[FLOATING]?.wrapper.close?.();\n\n  const promise = transition.run(s, animated, transitionParams);\n\n  if (opts.outsideHide && s) {\n    instance.on(doc, EVENT_ACTION_OUTSIDE, (event) => {\n      !closest(event.target, [toggler ?? base, target]) &&\n        instance.hide({ event });\n    });\n  } else {\n    instance.off(doc, EVENT_ACTION_OUTSIDE);\n  }\n\n  if (s) {\n    opts.escapeHide && addEscapeHide(instance, s, doc);\n    opts.autofocus && callAutofocus(instance);\n  } else {\n    !s && target.contains(doc.activeElement) && focus(toggler);\n  }\n\n  (async () => {\n    emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n    if (s) return;\n    if (animated) {\n      await promise;\n    }\n    if (transition.placeholder) {\n      instance[FLOATING].wrapper.replaceWith(transition.placeholder);\n    }\n    instance[FLOATING]?.destroy();\n    instance[FLOATING] = null;\n  })();\n\n  return promise;\n};\n","import {\n  ACTION_REMOVE,\n  DATA_APPEAR,\n  EVENT_INIT,\n  HIDDEN,\n  HIDE_MODE,\n} from \"../constants\";\nimport {\n  callOrReturn,\n  checkHash,\n  isShown,\n  toggleHideModeState,\n} from \"../utils\";\n\nexport default (instance, target = instance.base, stateElem = target) => {\n  const { opts, show, id } = instance;\n\n  instance.instances.set(id, instance);\n  instance.isInit = true;\n  instance.emit(EVENT_INIT);\n\n  if (opts[HIDE_MODE] === ACTION_REMOVE && target[HIDDEN]) {\n    toggleHideModeState(false, instance, opts);\n    target[HIDDEN] = false;\n  }\n\n  const shown =\n    callOrReturn(\n      (opts.hashNavigation && checkHash(id)) || opts.shown,\n      instance,\n    ) ?? isShown(stateElem, opts.hideMode);\n\n  shown &&\n    show({\n      animated: opts.appear ?? target.hasAttribute(DATA_APPEAR),\n      ignoreConditions: true,\n      ignoreAutofocus: true,\n    });\n\n  return instance;\n};\n","export default async (promise, callback) => {\n  await promise;\n  callback();\n};\n","import { createElement } from \"../utils/index.js\";\nimport {\n  AFTER,\n  BEFORE,\n  DATA_UI_PREFIX,\n  FIXED,\n  FOCUS,\n  FOCUSABLE_ELEMENTS_SELECTOR,\n  TABINDEX,\n} from \"../constants/index.js\";\n\nimport { focus } from \"../dom/index.js\";\n\nconst FOCUS_GUARD = FOCUS + \"-guard\";\n\nexport default class FocusGuards {\n  constructor(target, opts = {}) {\n    this.target = target;\n    this.opts = opts;\n    this.init();\n  }\n  init() {\n    const { target, opts } = this;\n\n    this.onFocus = (e) => {\n      let returnElem = opts.anchor;\n      let focusFirst = false;\n      const isGuardBefore =\n        e.target.getAttribute(DATA_UI_PREFIX + FOCUS_GUARD) === BEFORE;\n\n      if (opts.focusAfterAnchor && returnElem) {\n        if (!isGuardBefore) {\n          const globalReturnElems = [\n            ...document.querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR),\n          ];\n          returnElem =\n            globalReturnElems[\n              globalReturnElems.findIndex((el) => el === returnElem) + 1\n            ];\n        }\n        opts.onFocusOut?.();\n        return focus(returnElem);\n      }\n\n      if (e.relatedTarget === returnElem) {\n        focusFirst = true;\n      }\n      const returnElems = target.querySelectorAll(FOCUSABLE_ELEMENTS_SELECTOR);\n      if (!focusFirst && isGuardBefore) {\n        returnElem = returnElems[returnElems.length - 1];\n      } else {\n        returnElem = returnElems[0];\n      }\n      focus(returnElem);\n    };\n\n    this.focusGuards = [BEFORE, AFTER].map((methodName) => {\n      const focusGuard = createElement(\"span\", {\n        [TABINDEX]: 0,\n        [DATA_UI_PREFIX + FOCUS_GUARD]: methodName,\n        style: `outline:none;opacity:0;position:${\n          opts.strategy ?? FIXED\n        };pointer-events:none;`,\n      });\n      target[methodName](focusGuard);\n      focusGuard.addEventListener(FOCUS, this.onFocus);\n      return focusGuard;\n    });\n  }\n  destroy() {\n    this.focusGuards.forEach((focusGuard) => {\n      focusGuard.remove();\n      focusGuard.removeEventListener(FOCUS, this.onFocus);\n    });\n  }\n}\n\n// export default function (elem) {\n//   return [BEFORE, AFTER].map((methodName) => {\n//     const focusGuard = createElement(\"span\", {\n//       [TABINDEX]: 0,\n//       [DATA_UI_PREFIX + \"focus-guard\"]: \"\",\n//       style: \"outline:none;opacity:0;position:fixed;pointer-events:none;\",\n//     });\n//     elem[methodName](focusGuard);\n//     return focusGuard;\n//   });\n// }\n","import {\n  ROLE,\n  BUTTON,\n  ARIA_CONTROLS,\n  ARIA_EXPANDED,\n  DEFAULT_OPTIONS,\n  EVENT_BEFORE_INIT,\n  EVENT_BEFORE_DESTROY,\n  EVENT_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDE,\n  EVENT_HIDDEN,\n  EVENT_CLICK,\n  CLASS_ACTIVE,\n  CLASS_ACTIVE_SUFFIX,\n  TOGGLER,\n  HIDE_MODE,\n  OPTION_KEEP_PLACE,\n} from \"./helpers/constants\";\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\nimport { removeAttribute, setAttribute, toggleClass } from \"./helpers/dom\";\nimport {\n  normalizeToggleParameters,\n  replaceWord,\n  arrayUnique,\n  arrayFrom,\n  getEventsPrefix,\n  getOptionElems,\n  getDefaultToggleSelector,\n  updateOptsByData,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  callShowInit,\n  awaitPromise,\n} from \"./helpers/modules\";\n\nconst COLLAPSE = \"collapse\";\n\nclass Collapse extends ToggleMixin(Base, COLLAPSE) {\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    eventPrefix: getEventsPrefix(COLLAPSE),\n    hashNavigation: true,\n    dismiss: true,\n    [TOGGLER]: ({ id }) => getDefaultToggleSelector(id, true),\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [COLLAPSE + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n  };\n\n  constructor(elem, opts) {\n    super(elem, opts);\n  }\n  _update() {\n    this.opts = updateOptsByData(this.opts, this.base, [\n      HIDE_MODE,\n      OPTION_KEEP_PLACE,\n    ]);\n\n    const { base, opts, transition, teleport } = this;\n\n    addDismiss(this);\n\n    this.teleport = Teleport.createOrUpdate(\n      teleport,\n      base,\n      opts.teleport,\n    )?.move(this);\n\n    this.transition = Transition.createOrUpdate(\n      transition,\n      base,\n      { hideMode: opts.hideMode, ...opts.transition },\n      { cssVariables: true },\n    );\n\n    this.updateTriggers();\n\n    return this;\n  }\n  destroy(destroyOpts) {\n    // eslint-disable-next-line prefer-const\n    let { opts, togglers } = this;\n\n    if (!this.isInit) return;\n\n    this.emit(EVENT_BEFORE_DESTROY);\n\n    if (opts.a11y) {\n      const otherTogglers = arrayFrom(this.instances.values())\n        .filter((item) => item !== this)\n        .flatMap((item) => item.togglers.filter((t) => togglers.includes(t)));\n      if (otherTogglers.length) {\n        togglers = togglers.filter((toggler) => {\n          if (!otherTogglers.includes(toggler)) {\n            return true;\n          } else {\n            setAttribute(toggler, ARIA_CONTROLS, (v) =>\n              replaceWord(v, this.id),\n            );\n          }\n        });\n      }\n    }\n\n    opts.a11y &&\n      removeAttribute(togglers, [ARIA_CONTROLS, ARIA_EXPANDED, ROLE]);\n\n    baseDestroy(this, destroyOpts);\n\n    return this;\n  }\n\n  init() {\n    if (this.isInit) return;\n\n    this.emit(EVENT_BEFORE_INIT);\n\n    this._update();\n\n    return callShowInit(this);\n  }\n  updateTriggers() {\n    const { opts, id } = this;\n\n    return (this.togglers = getOptionElems(this, opts[TOGGLER]).map(\n      (toggler) => {\n        if (!this.togglers?.includes(toggler)) {\n          if (opts.a11y) {\n            setAttribute(toggler, ARIA_CONTROLS, (v) =>\n              v ? arrayUnique(v.split(\" \").concat(id)).join(\" \") : id,\n            );\n            if (toggler.tagName !== BUTTON.toLowerCase()) {\n              setAttribute(toggler, ROLE, BUTTON);\n            }\n          }\n          toggleClass(\n            toggler,\n            opts[TOGGLER + CLASS_ACTIVE_SUFFIX],\n            !!this.isShown,\n          );\n          this.on(toggler, EVENT_CLICK, (event) => {\n            event.preventDefault();\n            this.toggle(null, { trigger: toggler, event });\n          });\n        }\n        return toggler;\n      },\n    ));\n  }\n  async toggle(s, params) {\n    const { base, transition, togglers, opts, emit, isShown, isAnimating } =\n      this;\n    const { awaitAnimation, a11y } = opts;\n    const { animated, silent, trigger, event, ignoreConditions } =\n      normalizeToggleParameters(params);\n\n    s ??= !isShown;\n\n    if (!ignoreConditions && ((awaitAnimation && isAnimating) || s === isShown))\n      return;\n\n    this.isShown = s;\n\n    if (isAnimating && !awaitAnimation) {\n      await transition?.cancel();\n    }\n\n    const eventParams = { trigger, event };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    const promise = transition.run(s, animated, {\n      [s ? EVENT_SHOW : EVENT_HIDE]: () =>\n        !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, eventParams),\n      [EVENT_DESTROY]: () =>\n        this.destroy({ remove: true, destroyTransition: false }),\n    });\n\n    a11y && setAttribute(togglers, ARIA_EXPANDED, !!s);\n    toggleClass(togglers, opts[TOGGLER + CLASS_ACTIVE_SUFFIX], s);\n    toggleClass(base, opts[COLLAPSE + CLASS_ACTIVE_SUFFIX], s);\n\n    awaitPromise(promise, () =>\n      emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams),\n    );\n\n    animated && awaitAnimation && (await promise);\n\n    return this;\n  }\n}\n\nexport default Collapse;\n","import {\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_BEFORE_HIDE,\n  EVENT_CLICK,\n  EVENT_KEYDOWN,\n  CLASS_ACTIVE,\n  ARIA_CONTROLS,\n  DROPDOWN,\n  CLICK,\n  KEY_ENTER,\n  KEY_SPACE,\n  KEY_END,\n  KEY_HOME,\n  KEY_ARROW_LEFT,\n  KEY_ARROW_UP,\n  KEY_ARROW_RIGHT,\n  KEY_ARROW_DOWN,\n  DEFAULT_FLOATING_OPTIONS,\n  DEFAULT_OPTIONS,\n  ARIA_EXPANDED,\n  KEY_TAB,\n  TOGGLER,\n  CLASS_ACTIVE_SUFFIX,\n  doc,\n  DEFAULT_TOP_LAYER_OPTIONS,\n  OPTION_TOP_LAYER,\n  HIDE_MODE,\n} from \"./helpers/constants\";\n\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport {\n  toggleClass,\n  removeClass,\n  removeAttribute,\n  setAttribute,\n  closest,\n} from \"./helpers/dom\";\nimport Transition from \"./helpers/Transition.js\";\nimport {\n  normalizeToggleParameters,\n  isUnfocusable,\n  getDataSelector,\n  getDefaultToggleSelector,\n  getOptionElems,\n  getOptionElem,\n  updateModule,\n  getEventsPrefix,\n  updateOptsByData,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  toggleOnInterection,\n  floatingTransition,\n  callShowInit,\n} from \"./helpers/modules\";\nimport Teleport from \"./helpers/Teleport.js\";\n\nclass Dropdown extends ToggleMixin(Base, DROPDOWN) {\n  static DefaultTopLayer = {\n    ...DEFAULT_TOP_LAYER_OPTIONS,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    ...DEFAULT_FLOATING_OPTIONS,\n    eventPrefix: getEventsPrefix(DROPDOWN),\n    itemClickHide: true,\n    mode: false,\n    autofocus: true,\n    items: getDataSelector(DROPDOWN + \"-item\"),\n    trigger: CLICK,\n    [TOGGLER]: null,\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [DROPDOWN + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n  };\n\n  constructor(elem, opts) {\n    super(elem, opts);\n  }\n  init() {\n    if (this.isInit) return;\n    this._update();\n\n    const { toggler, base, show, on } = this;\n\n    on(base, EVENT_KEYDOWN, this._onKeydown.bind(this));\n    on(toggler, EVENT_KEYDOWN, async (event) => {\n      const { keyCode } = event;\n\n      const arrowActivated =\n        KEY_ARROW_UP === keyCode || KEY_ARROW_DOWN === keyCode;\n      if (arrowActivated) {\n        event.preventDefault();\n      }\n      if (arrowActivated) {\n        if (!this.isShown) {\n          await show({ event, trigger: toggler });\n        }\n      }\n      if (arrowActivated) {\n        if (this.isAnimating && !this.isShown) return;\n        this.focusableElems[0]?.focus();\n      }\n    });\n\n    toggleOnInterection({\n      toggler,\n      target: base,\n      instance: this,\n    });\n\n    addDismiss(this, base);\n\n    this.teleport = new Teleport(\n      base,\n      {},\n      {\n        disableAttributes: true,\n      },\n    );\n\n    return callShowInit(this, base);\n  }\n  _update() {\n    this.opts = updateOptsByData(this.opts, this.base, [HIDE_MODE]);\n    updateModule(this, OPTION_TOP_LAYER);\n    const { base, opts, transition, on, off, hide } = this;\n\n    this.transition = Transition.createOrUpdate(\n      transition,\n      base,\n      opts.transition,\n      { keepPlace: false },\n    );\n\n    this.updateToggler();\n\n    if (opts.itemClickHide) {\n      on(base, EVENT_CLICK, (event) => {\n        const trigger = closest(event.target, this.focusableElems);\n        trigger && hide({ event, trigger });\n      });\n    } else {\n      off(base, EVENT_CLICK);\n    }\n  }\n  updateToggler() {\n    const { opts, id } = this;\n    const toggler = (this.toggler = getOptionElem(\n      this,\n      opts.toggler ?? getDefaultToggleSelector(id),\n    ));\n\n    if (!toggler) return;\n    opts.a11y && setAttribute(toggler, ARIA_CONTROLS, id);\n    return this;\n  }\n  get focusableElems() {\n    return getOptionElems(this, this.opts.items, this.dropdown).filter(\n      (elem) => !isUnfocusable(elem),\n    );\n  }\n  _onKeydown(event) {\n    const { keyCode } = event;\n    const isControl = [\n      KEY_ENTER,\n      KEY_SPACE,\n      KEY_END,\n      KEY_HOME,\n      KEY_ARROW_LEFT,\n      KEY_ARROW_UP,\n      KEY_ARROW_RIGHT,\n      KEY_ARROW_DOWN,\n    ].includes(keyCode);\n    const { focusableElems, hide, opts } = this;\n\n    if (!isControl && keyCode !== KEY_TAB) {\n      focusableElems\n        .find((elem) => elem.textContent.toLowerCase().startsWith(event.key))\n        ?.focus();\n      return;\n    }\n\n    const rtl = false;\n    const firstIndex = 0;\n    const lastIndex = focusableElems.length - 1;\n    const currentIndex = focusableElems.findIndex(\n      (elem) => elem === doc.activeElement,\n    );\n\n    const nextIndex = currentIndex + 1 > lastIndex ? 0 : currentIndex + 1;\n    const prevIndex = currentIndex ? currentIndex - 1 : lastIndex;\n\n    const prevCode = opts.horizontal ? KEY_ARROW_LEFT : KEY_ARROW_UP;\n    const nextCode = opts.horizontal ? KEY_ARROW_RIGHT : KEY_ARROW_DOWN;\n\n    if (isControl) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n\n    switch (event.keyCode) {\n      case KEY_ENTER:\n      case KEY_SPACE:\n        focusableElems[currentIndex].click();\n        hide({ event, trigger: event.target });\n        break;\n      case KEY_END:\n        focusableElems[rtl ? firstIndex : lastIndex].focus();\n        break;\n      case KEY_HOME:\n        focusableElems[rtl ? lastIndex : firstIndex].focus();\n        break;\n      case prevCode:\n        focusableElems[rtl ? nextIndex : prevIndex].focus();\n        break;\n      case nextCode:\n        focusableElems[rtl ? prevIndex : nextIndex].focus();\n        break;\n    }\n  }\n  destroy(destroyOpts) {\n    if (!this.isInit) return;\n    const { opts, toggler } = this;\n    this.emit(EVENT_BEFORE_DESTROY);\n    opts.a11y && removeAttribute(toggler, ARIA_CONTROLS, ARIA_EXPANDED);\n    removeClass(toggler, opts[TOGGLER + CLASS_ACTIVE_SUFFIX]);\n    return baseDestroy(this, destroyOpts);\n  }\n\n  async toggle(s, params) {\n    const { toggler, opts, emit, transition, isShown, isAnimating } = this;\n    const { awaitAnimation, a11y } = opts;\n    const { animated, silent, trigger, event, ignoreConditions } =\n      normalizeToggleParameters(params);\n\n    s ??= !isShown;\n\n    if (!ignoreConditions && ((awaitAnimation && isAnimating) || s === isShown))\n      return;\n\n    this.isShown = s;\n\n    if (isAnimating && !awaitAnimation) {\n      await transition?.cancel();\n    }\n\n    const eventParams = { event, trigger };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    const promise = floatingTransition(this, {\n      s,\n      animated,\n      silent,\n      eventParams,\n    });\n\n    a11y && toggler.setAttribute(ARIA_EXPANDED, !!s);\n\n    toggleClass(toggler, opts[TOGGLER + CLASS_ACTIVE_SUFFIX], s);\n    toggleClass(toggler, opts[DROPDOWN + CLASS_ACTIVE_SUFFIX], s);\n\n    animated && awaitAnimation && (await promise);\n\n    return this;\n  }\n}\n\nexport default Dropdown;\n","import {\n  DEFAULT_OPTIONS,\n  body,\n  ROLE,\n  UI_PREFIX,\n  VAR_UI_PREFIX,\n  PX,\n  CONTENT,\n  BACKDROP,\n  SCROLL,\n  WIDTH,\n  ROOT,\n  SELECTOR_ROOT,\n  ACTION_PREVENT,\n  ARIA_LABELLEDBY,\n  ARIA_DESCRIBEDBY,\n  TABINDEX,\n  HIDE_MODE,\n  EVENT_SHOW,\n  EVENT_HIDE,\n  EVENT_CLICK,\n  EVENT_MOUSEDOWN,\n  EVENT_RIGHT_CLICK,\n  EVENT_HIDE_PREVENTED,\n  EVENT_BEFORE_INIT,\n  EVENT_HIDDEN,\n  EVENT_SHOWN,\n  OPTION_GROUP,\n  ACTION_DESTROY,\n  TITLE,\n  NAME,\n  EVENT_BEFORE_HIDE,\n  EVENT_BEFORE_SHOW,\n  CANCEL,\n  CONFIRM,\n  CLASS_ACTIVE,\n  TOGGLER,\n  CLASS_ACTIVE_SUFFIX,\n  DIALOG,\n  doc,\n  UI_EVENT_PREFIX,\n  POPOVER_API_SUPPORTED,\n  MODAL,\n  OPTION_TOP_LAYER,\n  OPTION_PREVENT_SCROLL,\n  POPOVER,\n  POPOVER_API_MODE_MANUAL,\n  DEFAULT_TOP_LAYER_OPTIONS,\n  DATA_UI_PREFIX,\n  OPTION_KEEP_PLACE,\n  ACTION_REMOVE,\n  HIDDEN,\n} from \"./helpers/constants\";\nimport { isString, isElement, isFunction, isDialog } from \"./helpers/is\";\nimport {\n  getElements,\n  toggleClass,\n  removeClass,\n  focus,\n  closest,\n  setAttribute,\n  removeAttribute,\n} from \"./helpers/dom\";\nimport {\n  arrayFrom,\n  getDataSelector,\n  uuidGenerator,\n  normalizeToggleParameters,\n  getEventsPrefix,\n  getDefaultToggleSelector,\n  updateModule,\n  getOptionElem,\n  updateOptsByData,\n  upperFirst,\n  toggleHideModeState,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  callAutofocus,\n  addEscapeHide,\n  callShowInit,\n  awaitPromise,\n} from \"./helpers/modules\";\nimport Base from \"./helpers/Base\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\nimport { FocusGuards } from \"./helpers/modules/index.js\";\n\n// const DOM_ELEMENTS = [DIALOG, BACKDROP, CONTENT];\nconst CLASS_PREVENT_SCROLL =\n  UI_PREFIX + DIALOG + \"-\" + ACTION_PREVENT + \"-\" + SCROLL;\n\nconst PROPERTY_ROOT_SCROLLBAR_WIDTH =\n  VAR_UI_PREFIX + ROOT + \"-scrollbar-\" + WIDTH;\nconst ARIA_SUFFIX = {\n  [ARIA_LABELLEDBY]: TITLE,\n  [ARIA_DESCRIBEDBY]: \"description\",\n};\n\nconst updateBodyScrollbarWidth = () => {\n  return doc\n    .querySelector(SELECTOR_ROOT)\n    .style.setProperty(\n      PROPERTY_ROOT_SCROLLBAR_WIDTH,\n      window.innerWidth - doc.documentElement.clientWidth + PX,\n    );\n};\n\nconst DIALOG_DATA_OPTIONS = [\n  [MODAL, DIALOG + upperFirst(MODAL)],\n  [BACKDROP, DIALOG + upperFirst(BACKDROP)],\n  [OPTION_TOP_LAYER, DIALOG + upperFirst(OPTION_TOP_LAYER)],\n  [OPTION_PREVENT_SCROLL, DIALOG + upperFirst(OPTION_PREVENT_SCROLL)],\n  HIDE_MODE,\n  OPTION_KEEP_PLACE,\n];\n\nclass Dialog extends ToggleMixin(Base, DIALOG) {\n  static DefaultTopLayer = {\n    ...DEFAULT_TOP_LAYER_OPTIONS,\n  };\n  static DefaultGroup = {\n    name: \"\",\n    awaitPrevious: true,\n    hidePrevious: true,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    eventPrefix: getEventsPrefix(DIALOG),\n    escapeHide: true,\n    backdropHide: true,\n    hashNavigation: false,\n    returnFocus: true,\n    preventHide: false,\n    dismiss: true,\n    preventScroll: true,\n    cancel: `[${DATA_UI_PREFIX + CANCEL}],[${\n      DATA_UI_PREFIX + CANCEL\n    }=\"${DIALOG}\"]`,\n    confirm: `[${DATA_UI_PREFIX + CONFIRM}],[${\n      DATA_UI_PREFIX + CONFIRM\n    }=\"${DIALOG}\"]`,\n    title: getDataSelector(DIALOG, ARIA_SUFFIX[ARIA_LABELLEDBY]),\n    description: getDataSelector(DIALOG, ARIA_SUFFIX[ARIA_DESCRIBEDBY]),\n    group: \"\",\n    awaitAnimation: false,\n    [CONTENT]: getDataSelector(DIALOG, CONTENT),\n    [BACKDROP]: getDataSelector(DIALOG, BACKDROP),\n    [TOGGLER]: true,\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [DIALOG + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [BACKDROP + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n\n    autofocus: true,\n    focusTrap: true,\n\n    modal: true,\n    topLayer: true,\n\n    popoverApi: true,\n    safeModal: true,\n  };\n\n  constructor(elem, opts) {\n    super(elem, opts);\n  }\n\n  _update() {\n    this.opts = updateOptsByData(this.opts, this.base, DIALOG_DATA_OPTIONS);\n\n    updateModule(this, OPTION_TOP_LAYER);\n    updateModule(this, OPTION_GROUP, NAME);\n\n    const { base, _fromHTML, opts, teleport, id, on } = this;\n\n    let backdrop;\n    if (opts[BACKDROP]) {\n      if (isFunction(opts[BACKDROP])) {\n        backdrop = opts[BACKDROP](this);\n      }\n      if (isString(opts[BACKDROP])) {\n        backdrop = (opts[BACKDROP][0] === \"#\" ? doc : base).querySelector(\n          opts[BACKDROP],\n        );\n      }\n    }\n\n    this[BACKDROP] = backdrop;\n\n    this[CONTENT] = getOptionElem(this, opts[CONTENT], base);\n\n    const isDialogElem = isDialog(base);\n\n    const moveToBody =\n      (opts.topLayer &&\n        (!opts.modal || opts.topLayer.moveModal) &&\n        (!opts.popoverApi ||\n          (opts.topLayer.movePopover && POPOVER_API_SUPPORTED))) ||\n      _fromHTML;\n\n    this.teleport = Teleport.createOrUpdate(\n      teleport,\n      base,\n      moveToBody ? body : false,\n      {\n        disableAttributes: true,\n      },\n    )?.move(this);\n\n    this.transition = Transition.createOrUpdate(\n      this.transition,\n      this[CONTENT],\n      { hideMode: opts.hideMode, ...opts.transition },\n      { keepPlace: true },\n    );\n\n    this._togglers =\n      opts.toggler === true ? getDefaultToggleSelector(id) : opts.toggler;\n\n    if (isDialogElem) {\n      on(base, CANCEL + UI_EVENT_PREFIX, (e) => e.preventDefault());\n    } else if (opts.a11y) {\n      setAttribute(base, TABINDEX, -1);\n      setAttribute(base, ROLE, DIALOG);\n    }\n\n    base.popover =\n      opts.topLayer &&\n      (!isDialogElem || !opts.modal) &&\n      POPOVER_API_SUPPORTED &&\n      opts.popoverApi\n        ? POPOVER_API_MODE_MANUAL\n        : null;\n\n    return this;\n  }\n  init() {\n    const { opts, isInit, base, on, emit, hide, toggle } = this;\n\n    if (isInit) return;\n\n    emit(EVENT_BEFORE_INIT);\n\n    this._update();\n    this.updateAriaTargets();\n    addDismiss(this);\n\n    on(\n      base,\n      [\n        EVENT_CLICK,\n        opts.backdropHide &&\n          (opts.backdropHide?.rightClick ?? true) &&\n          EVENT_RIGHT_CLICK,\n      ],\n      (event) => {\n        if (event.type === EVENT_CLICK) {\n          [CANCEL, CONFIRM].forEach((name) => {\n            if (opts[name]) {\n              const trigger = closest(event.target, opts[name]);\n              trigger && emit(name, { event, trigger });\n            }\n          });\n        }\n        if (\n          this.opts.backdropHide &&\n          !this[CONTENT].contains(event.target) &&\n          !this._mousedownTarget\n        ) {\n          hide({ event });\n          emit(CANCEL, { event });\n        }\n        this._mousedownTarget = null;\n      },\n    );\n\n    on(body, EVENT_CLICK + UI_EVENT_PREFIX, (event) => {\n      const togglers = this._togglers;\n      const trigger = isString(togglers)\n        ? event.target.closest(togglers)\n        : closest(event.target, togglers);\n      if (trigger) {\n        event.preventDefault();\n        toggle(null, { trigger, event });\n      }\n    });\n\n    return callShowInit(this);\n  }\n  destroy(destroyOpts) {\n    if (!this.isInit) return;\n\n    removeClass(this._togglers, this.opts[TOGGLER + CLASS_ACTIVE]);\n    this.opts.a11y &&\n      removeAttribute(this.base, [\n        TABINDEX,\n        ROLE,\n        ARIA_LABELLEDBY,\n        ARIA_DESCRIBEDBY,\n      ]);\n    this.focusGuards?.destroy();\n    this.focusGuards = null;\n    baseDestroy(this, destroyOpts);\n    return this;\n  }\n\n  updateAriaTargets() {\n    const { base, opts } = this;\n    for (const name of [ARIA_LABELLEDBY, ARIA_DESCRIBEDBY]) {\n      const suffix = ARIA_SUFFIX[name];\n      let elem = opts[suffix];\n      if (isString(elem)) {\n        elem = getOptionElem(this, elem, base);\n      }\n      if (!isElement(elem)) {\n        elem = null;\n      }\n      this[suffix] = elem;\n      if (!elem) return;\n      const id = elem\n        ? (elem.id ||= uuidGenerator(DIALOG + \"-\" + suffix + \"-\"))\n        : elem;\n      setAttribute(base, name, id);\n    }\n    return this;\n  }\n  preventScroll(s) {\n    const hasPreventScrollDialogs = Dialog.shownDialogs.filter(\n      ({ opts }) => opts[OPTION_PREVENT_SCROLL],\n    ).length;\n\n    if ((s && hasPreventScrollDialogs) || (!s && !hasPreventScrollDialogs)) {\n      toggleClass(\n        body,\n        isString(this.opts[OPTION_PREVENT_SCROLL])\n          ? this.opts[OPTION_PREVENT_SCROLL]\n          : CLASS_PREVENT_SCROLL,\n        s,\n      );\n    }\n  }\n  async toggle(s, params) {\n    const {\n      opts,\n      isOpen,\n      emit,\n      on,\n      off,\n      isAnimating,\n      transition,\n      base,\n      content,\n      backdrop,\n    } = this;\n\n    let optReturnFocusAwait =\n      opts.returnFocus && (opts.returnFocus?.await ?? opts.group.awaitPrevious);\n\n    const {\n      animated,\n      silent,\n      trigger,\n      event,\n      ignoreConditions,\n      ignoreAutofocus,\n    } = normalizeToggleParameters(params);\n\n    s = !!(s ?? !isOpen);\n\n    if (\n      !ignoreConditions &&\n      ((opts.awaitAnimation && isAnimating) || s === isOpen)\n    )\n      return;\n\n    if (isAnimating && !opts.awaitAnimation) {\n      await transition?.cancel();\n    }\n\n    const eventParams = { trigger, event };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    if (\n      !s &&\n      opts.preventHide &&\n      (isFunction(opts.preventHide)\n        ? !(await opts.preventHide(this, eventParams))\n        : opts.preventHide)\n    ) {\n      return emit(EVENT_HIDE_PREVENTED);\n    }\n\n    this.isOpen = s;\n\n    const backdropIsOpen = Dialog.shownDialogs.find(\n      (instance) => instance !== this && instance[BACKDROP] === backdrop,\n    );\n\n    const shownGroupDialogs = this.shownGroupDialogs;\n    if (s) {\n      if (shownGroupDialogs.length > 1) {\n        const promises = Promise.allSettled(\n          shownGroupDialogs\n            .filter((m) => m !== this)\n            .map(\n              (instance) =>\n                instance.hide() && instance.transition?.getAwaitPromise(),\n            ),\n        );\n        if (opts.group.awaitPrevious) {\n          await promises;\n        }\n      }\n    } else if (!s && !shownGroupDialogs.length) {\n      optReturnFocusAwait = false;\n    }\n\n    if (s) {\n      toggleHideModeState(true, this, opts);\n\n      if (opts.returnFocus) {\n        this.returnFocusElem ||= doc.activeElement;\n      }\n      this._toggleApi(true);\n    }\n\n    !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, eventParams);\n\n    const promise = this.transition?.run(s, animated, { allowRemove: false });\n\n    toggleClass(\n      getElements(this._togglers),\n      opts[TOGGLER + CLASS_ACTIVE_SUFFIX],\n      s,\n    );\n    toggleClass(base, opts[DIALOG + CLASS_ACTIVE_SUFFIX], s);\n    if (!backdropIsOpen) {\n      toggleClass(backdrop, opts[BACKDROP + CLASS_ACTIVE_SUFFIX], s);\n    }\n\n    this.preventScroll(s);\n\n    if (!s && !optReturnFocusAwait) {\n      this._toggleApi(false);\n      this.returnFocus();\n    }\n\n    opts.escapeHide && addEscapeHide(this, s);\n\n    if (s) {\n      !ignoreAutofocus && opts.autofocus && callAutofocus(this);\n      on(content, EVENT_MOUSEDOWN + UI_EVENT_PREFIX, (e) => {\n        this._mousedownTarget = e.target;\n      });\n    } else {\n      this._mousedownTarget = null;\n      off(content, EVENT_MOUSEDOWN + UI_EVENT_PREFIX);\n      this.returnFocusElem = null;\n    }\n\n    awaitPromise(promise, () => {\n      emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams);\n\n      if (!s && optReturnFocusAwait) {\n        this._toggleApi(false);\n        this.returnFocus();\n      }\n      if (!s) {\n        toggleHideModeState(false, this, opts);\n        if (this.hideMode === ACTION_DESTROY) {\n          this.destroy({ remove: true });\n        }\n      }\n    });\n\n    animated && opts.awaitAnimation && (await promise);\n\n    return this;\n  }\n  _toggleApi(s) {\n    const { base, opts } = this;\n    const baseIsDialog = isDialog(base);\n    if (s) {\n      const isModal =\n        baseIsDialog &&\n        (!opts.safeModal || POPOVER_API_SUPPORTED) &&\n        opts.modal;\n      const isPopover =\n        opts.topLayer && POPOVER_API_SUPPORTED && opts.popoverApi;\n\n      if (baseIsDialog) {\n        if (isModal) {\n          if (base.open) base.close();\n          base.showModal();\n          Dialog.dispatchTopLayer(MODAL);\n        } else {\n          if (isPopover) {\n            base.showPopover();\n            base.open = true;\n            Dialog.dispatchTopLayer(POPOVER);\n          } else {\n            base.show();\n          }\n        }\n      } else if (isPopover) {\n        base.showPopover();\n        Dialog.dispatchTopLayer(POPOVER);\n      }\n      if (opts.focusTrap && !isModal) {\n        this.focusGuards = new FocusGuards(base);\n      }\n    } else {\n      base.close?.();\n      base.popover && base.hidePopover();\n      if (this.focusGuards) {\n        this.focusGuards?.destroy();\n        this.focusGuards = null;\n      }\n    }\n  }\n  returnFocus() {\n    if (this.opts.returnFocus) {\n      focus(this.returnFocusElem);\n    }\n  }\n\n  // get isAnimating() {\n  //   return DOM_ELEMENTS.some(\n  //     (elemName) => this.transitions[elemName]?.isAnimating,\n  //   );\n  // }\n\n  // get transitionPromise() {\n  //   return Promise.allSettled(\n  //     Object.values(this.transitions).flatMap(({ promises }) => promises),\n  //   );\n  // }\n\n  get groupDialogs() {\n    return arrayFrom(this.instances.values()).filter(\n      ({ opts }) => opts.group?.name === this.opts.group?.name,\n    );\n  }\n  static get shownDialogs() {\n    return arrayFrom(this.instances.values()).filter(({ isOpen }) => isOpen);\n  }\n  get shownGroupDialogs() {\n    return this.groupDialogs.filter(({ isOpen, opts }) => opts.group && isOpen);\n  }\n  static updateBodyScrollbarWidth() {\n    updateBodyScrollbarWidth();\n  }\n}\n\nexport default Dialog;\n","import {\n  EVENT_INIT,\n  EVENT_BEFORE_INIT,\n  EVENT_DESTROY,\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDE,\n  EVENT_HIDDEN,\n  EVENT_CLICK,\n  EVENT_KEYDOWN,\n  EVENT_FOCUS,\n  KEY_ENTER,\n  KEY_SPACE,\n  KEY_END,\n  KEY_HOME,\n  KEY_ARROW_LEFT,\n  KEY_ARROW_UP,\n  KEY_ARROW_RIGHT,\n  KEY_ARROW_DOWN,\n  ARIA_CONTROLS,\n  ARIA_LABELLEDBY,\n  ARIA_HIDDEN,\n  ARIA_EXPANDED,\n  ARIA_SELECTED,\n  ARIA_ORIENTATION,\n  ROLE,\n  BUTTON,\n  TABINDEX,\n  HIDDEN,\n  INERT,\n  DISABLED,\n  DATA_UI_PREFIX,\n  CLASS_ACTIVE,\n  ACTION_HIDE,\n  ACTION_SHOW,\n  ACTION_TOGGLE,\n  DEFAULT_OPTIONS,\n  DATA_APPEAR,\n  ID,\n  HORIZONTAL,\n  VERTICAL,\n  A11Y,\n  OPTION_ARIA_HIDDEN,\n  CLASS_ACTIVE_SUFFIX,\n  ROLE_SUFFIX,\n  doc,\n  UI_PREFIX,\n  HIDE_MODE,\n} from \"./helpers/constants\";\nimport Base from \"./helpers/Base.js\";\nimport {\n  isString,\n  isElement,\n  isNumber,\n  isFunction,\n  isArray,\n} from \"./helpers/is\";\nimport {\n  isUnfocusable,\n  callOrReturn,\n  getDataSelector,\n  checkHash,\n  without,\n  uuidGenerator,\n  normalizeToggleParameters,\n  getEventsPrefix,\n  kebabToCamel,\n  updateModule,\n  upperFirst,\n  getOptionElems,\n  isShown,\n  updateOptsByData,\n} from \"./helpers/utils\";\nimport {\n  toggleClass,\n  removeClass,\n  removeAttribute,\n  next,\n  focus,\n  parents,\n  setAttribute,\n} from \"./helpers/dom\";\nimport { addDismiss, awaitPromise } from \"./helpers/modules\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\n\nconst TABLIST = \"tablist\";\nconst TAB = \"tab\";\nconst TABS = \"tabs\";\nconst TABPANEL = \"tabpanel\";\nconst ITEM = \"item\";\nconst ACCORDION = \"accordion\";\n\nconst ELEMS = [ITEM, TAB, TABPANEL];\nconst OPTION_TAB_ROLE = TAB + ROLE_SUFFIX;\nconst OPTION_TABPANEL_ROLE = TABPANEL + ROLE_SUFFIX;\nconst OPTION_TABPANEL_TABINDEX = TABPANEL + upperFirst(TABINDEX);\nconst OPTION_ARIA_ORIENTRATION = kebabToCamel(ARIA_ORIENTATION);\nconst OPTION_STATE_ATTRIBUTE = \"stateAttribute\";\n\nconst TABLIST_SECONDARY_METHODS = [\"getTab\", \"isTab\", \"initTab\", \"initTabs\"];\n\nconst A11Y_DEFAULTS = {\n  [ACCORDION]: {\n    [ROLE]: null,\n    [OPTION_TAB_ROLE]: BUTTON,\n    [OPTION_TABPANEL_ROLE]: \"region\",\n    [OPTION_ARIA_ORIENTRATION]: true,\n    [OPTION_STATE_ATTRIBUTE]: ARIA_EXPANDED,\n    [TABINDEX]: false,\n    [OPTION_TABPANEL_TABINDEX]: false,\n  },\n  [TABS]: {\n    [ROLE]: TABLIST,\n    [OPTION_TAB_ROLE]: TAB,\n    [OPTION_TABPANEL_ROLE]: TABPANEL,\n    [OPTION_ARIA_ORIENTRATION]: true,\n    [OPTION_STATE_ATTRIBUTE]: ARIA_SELECTED,\n    [TABINDEX]: true,\n    [OPTION_TABPANEL_TABINDEX]: true,\n  },\n};\n\nclass Tablist extends Base {\n  static DefaultA11y = { ...A11Y_DEFAULTS[ACCORDION] };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    eventPrefix: getEventsPrefix(TABLIST),\n    siblings: true,\n    alwaysExpanded: false,\n    multiExpand: false,\n    awaitAnimation: false,\n    awaitPrevious: false,\n    keyboard: true,\n    arrowActivation: false,\n    hashNavigation: true,\n    rtl: false,\n    focusFilter: null,\n    horizontal: false,\n    dismiss: false,\n    [TAB]: getDataSelector(TABLIST, TAB),\n    [TABPANEL]: getDataSelector(TABLIST, TABPANEL),\n    [ITEM]: getDataSelector(TABLIST, ITEM),\n    [TAB + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [ITEM + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [TABPANEL + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n  };\n  static _data = {};\n  static instances = new Map();\n  static get NAME() {\n    return TABLIST;\n  }\n  constructor(elem, opts) {\n    super(elem, opts);\n  }\n  _update() {\n    this.opts = updateOptsByData(this.opts, this.base, [HIDE_MODE]);\n    const { a11y } = updateModule(this, A11Y, false, A11Y_DEFAULTS);\n    const { tablist, tabs, lastShownTab, opts } = this;\n\n    if (a11y) {\n      setAttribute(tablist, ROLE, a11y[ROLE]);\n      a11y[OPTION_ARIA_ORIENTRATION] &&\n        setAttribute(\n          tablist,\n          ARIA_ORIENTATION,\n          opts[HORIZONTAL] ? HORIZONTAL : VERTICAL,\n        );\n    }\n\n    const shown = lastShownTab?.index ?? opts.shown;\n\n    const tabWithState = tabs.map((tabObj, i) => {\n      const { tab, tabpanel, teleport } = tabObj;\n\n      if (a11y) {\n        removeAttribute(tab, [ARIA_SELECTED, ARIA_EXPANDED]);\n        setAttribute(tab, ARIA_CONTROLS, tabpanel.id);\n        setAttribute(tab, ROLE, a11y[OPTION_TAB_ROLE]);\n        setAttribute(tabpanel, ROLE, a11y[OPTION_TABPANEL_ROLE]);\n        setAttribute(tabpanel, ARIA_LABELLEDBY, tab.id);\n      }\n\n      tabObj.teleport = Teleport.createOrUpdate(\n        teleport,\n        tabpanel,\n        opts.teleport,\n      )?.move(this, tabObj);\n\n      let isShownTabpanel;\n      if (isFunction(shown)) {\n        isShownTabpanel = shown(tabObj);\n      } else if (isArray(shown)) {\n        isShownTabpanel = shown.some((val) => val === i || val === tabpanel.id);\n      } else if (shown !== null) {\n        isShownTabpanel = tabpanel.id === shown || i === shown;\n      } else {\n        isShownTabpanel = isShown(tabpanel, opts.hideMode);\n      }\n\n      return [isShownTabpanel, tabObj];\n    });\n    const hasSelected = tabWithState.find(([isShown]) => isShown);\n    if (opts.alwaysExpanded && !hasSelected) {\n      tabWithState[0][0] = true;\n    }\n    tabWithState.forEach(([isShown, tab]) => {\n      tab.transition.updateConfig(\n        { hideMode: opts.hideMode, ...opts.transition },\n        { cssVariables: true },\n      );\n      tab.toggle(isShown, {\n        animated: opts.appear ?? tab.tabpanel.hasAttribute(DATA_APPEAR),\n        silent: !isShown,\n      });\n    });\n\n    return this;\n  }\n  init() {\n    const { id, instances, isInit, emit } = this;\n    if (isInit) return;\n\n    TABLIST_SECONDARY_METHODS.forEach(\n      (name) => (this[name] = this[name].bind(this)),\n    );\n\n    emit(EVENT_BEFORE_INIT);\n\n    this.tabs = [];\n    this.initTabs();\n\n    instances.set(id, this);\n\n    this._updateTabIndex();\n\n    this._update();\n\n    this.isInit = true;\n\n    return emit(EVENT_INIT);\n  }\n\n  destroy(deleteInstance = false, cleanStyles = true) {\n    const {\n      tablist,\n      tabs,\n      uuid,\n      opts: { a11y },\n      isInit,\n      off,\n      instances,\n      id,\n      emit,\n    } = this;\n\n    if (!isInit) return;\n\n    emit(EVENT_BEFORE_DESTROY);\n\n    off(tabs);\n\n    if (a11y) {\n      removeAttribute(tablist, [\n        a11y[ROLE] && ROLE,\n        a11y[OPTION_ARIA_ORIENTRATION] && ARIA_ORIENTATION,\n      ]);\n    }\n    tablist.id.includes(uuid) && tablist.removeAttribute(ID);\n\n    tabs.forEach((tab) => tab.destroy(cleanStyles));\n\n    this.isInit = false;\n\n    if (deleteInstance) {\n      instances.delete(id);\n    }\n\n    emit(EVENT_DESTROY);\n\n    return this;\n  }\n\n  initTabs() {\n    return getOptionElems(this, this.opts[TAB], this.tablist)\n      .map((tab) => {\n        for (const parent of parents(tab, null, this.tablist)) {\n          if (this.getTab(parent)) return;\n        }\n        return this.initTab(tab);\n      })\n      .filter(Boolean);\n  }\n  initTab(tab) {\n    if (this.getTab(tab)) return;\n\n    const { tabs, tablist, opts, shownTabs, on, off } = this;\n    const index = tabs.length;\n\n    const item = isString(opts[ITEM])\n      ? tab.closest(opts[ITEM])\n      : callOrReturn(opts[ITEM], { tablist, tab, index });\n\n    const tabpanelId = tab.getAttribute(DATA_UI_PREFIX + TABLIST + \"-\" + TAB);\n    let tabpanel = tabpanelId && doc.getElementById(tabpanelId);\n\n    if (!tabpanel && isFunction(opts[TABPANEL])) {\n      tabpanel = opts[TABPANEL]({ tablist, tab, index });\n    }\n    if (!tabpanel && opts.siblings) {\n      tabpanel = next(tab, opts[TABPANEL]);\n    }\n\n    if (!tabpanel) return;\n\n    const uuid = uuidGenerator();\n    const id = (tabpanel.id ||= TABPANEL + \"-\" + uuid);\n    tab.id ||= TAB + \"-\" + uuid;\n\n    let isShown;\n    if (shownTabs.length && !opts.multiExpand) {\n      isShown = false;\n    }\n    if (opts.hashNavigation && checkHash(id)) {\n      isShown = true;\n    }\n\n    on(tab, EVENT_FOCUS, (e) => this._onTabFocus(e));\n    on(tab, EVENT_KEYDOWN, (e) => this._onTabKeydown(e));\n    on(tab, EVENT_CLICK, (event) => {\n      event.preventDefault();\n      this.toggle(event.currentTarget, null, { event, trigger: tab });\n    });\n\n    const destroy = ({ clean = true, remove = false }) => {\n      const opts = this.opts;\n      const a11y = opts.a11y;\n      if (a11y) {\n        removeAttribute(tab, [\n          ROLE,\n          a11y[TABINDEX] && TABINDEX,\n          ARIA_CONTROLS,\n          a11y[OPTION_STATE_ATTRIBUTE],\n        ]);\n        removeAttribute(tabpanel, [\n          ROLE,\n          a11y[OPTION_TABPANEL_TABINDEX] && TABINDEX,\n          ARIA_LABELLEDBY,\n          a11y[OPTION_ARIA_HIDDEN] && ARIA_HIDDEN,\n          HIDDEN,\n          INERT,\n        ]);\n      }\n\n      off(elems);\n      this.tabs = without(this.tabs, tabInstance);\n      if (clean) {\n        ELEMS.forEach((name) =>\n          removeClass(tabInstance[name], opts[name + CLASS_ACTIVE_SUFFIX]),\n        );\n        tabInstance.transition?.destroy();\n        tabInstance.teleport?.destroy();\n      }\n      tabpanel.id.includes(uuid) && tabpanel.removeAttribute(ID);\n      tab.id.includes(uuid) && tab.removeAttribute(ID);\n\n      if (remove) {\n        elems.forEach((elem) => elem && elem.remove());\n      }\n    };\n\n    const toggleDisabled = (s = null) => {\n      const disabled = tab.toggleAttribute(DISABLED, s);\n\n      disabled && tabInstance.hide(false);\n\n      if (this.opts.alwaysExpanded) {\n        const shownTabs = this.shownTabs;\n        if (\n          !shownTabs.length ||\n          (shownTabs.length === 1 && shownTabs[0].isDisabled)\n        ) {\n          this.show(this.firstActiveTabIndex, false);\n        }\n      }\n\n      return !disabled;\n    };\n\n    const transition = new Transition(tabpanel, opts.transition);\n\n    const elems = [tab, item, tabpanel];\n    const tabInstance = {\n      id,\n      uuid,\n      tab,\n      item,\n      tabpanel,\n      elems,\n      index,\n      transition,\n      destroy: destroy.bind(this),\n      toggleDisabled: toggleDisabled.bind(this),\n      isShown,\n      get isDisabled() {\n        return tab.hasAttribute(DISABLED);\n      },\n      get initialPlaceNode() {\n        return (\n          tabInstance.teleport?.placeholder ??\n          tabInstance.transition?.placeholder ??\n          tabpanel\n        );\n      },\n    };\n\n    [ACTION_HIDE, ACTION_SHOW, ACTION_TOGGLE].forEach(\n      (action) => (tabInstance[action] = this[action].bind(this, tabInstance)),\n    );\n    tabInstance.is = this.isTab.bind(this, tabInstance);\n\n    addDismiss(this, tabpanel, tabInstance.hide);\n\n    tabs.push(tabInstance);\n    return tabInstance;\n  }\n  isTab(tab, value) {\n    let result = false;\n    if (tab === value) {\n      result = true;\n    } else if (isElement(value)) {\n      result = tab.elems.includes(value);\n    } else if (isString(value)) {\n      result = tab.elems.some((elem) => elem.matches(value));\n    } else if (isNumber(value)) {\n      result = tab.index === value;\n    }\n    return result;\n  }\n  getTab(value) {\n    return this.tabs.find((tab) => tab.is(value));\n  }\n  _onTabFocus({ currentTarget }) {\n    const tabInstance = this.getTab(currentTarget);\n    if (!tabInstance || !this.focusFilter(tabInstance)) return;\n\n    this.opts.arrowActivation && !tabInstance.isShown && tabInstance.show();\n\n    this.currentTabIndex = tabInstance.index;\n  }\n  _onTabKeydown(event) {\n    const tabInstance = this.getTab(event.currentTarget);\n    const currentIndex = this.tabs.indexOf(tabInstance);\n    const { keyboard, rtl, horizontal } = this.opts;\n    const { keyCode } = event;\n\n    if (\n      [KEY_ENTER, KEY_SPACE].includes(keyCode) &&\n      !/BUTTON|A/.test(tabInstance.tab.nodeName)\n    )\n      return tabInstance.toggle(null, { event, trigger: event.target });\n    if (KEY_END > keyCode || KEY_ARROW_DOWN < keyCode || !keyboard) return;\n\n    event.preventDefault();\n\n    const firstIndex = this.firstActiveTabIndex;\n    const lastIndex = this.lastActiveTabIndex;\n    const nextIndex = currentIndex + 1;\n    const prevIndex = currentIndex ? currentIndex - 1 : lastIndex;\n\n    const prevCode = horizontal ? KEY_ARROW_LEFT : KEY_ARROW_UP;\n    const nextCode = horizontal ? KEY_ARROW_RIGHT : KEY_ARROW_DOWN;\n\n    let index;\n    if (keyCode === KEY_END) {\n      index = rtl ? firstIndex : lastIndex;\n    } else if (keyCode === KEY_HOME) {\n      index = rtl ? lastIndex : firstIndex;\n    } else if (keyCode === prevCode) {\n      index = rtl ? nextIndex : prevIndex;\n    } else if (keyCode === nextCode) {\n      index = rtl ? prevIndex : nextIndex;\n    }\n    index != null && this._switchTab(index);\n  }\n  _switchTab(index) {\n    const tabs = this.tabs;\n    if (tabs[index] && !this.focusFilter(tabs[index])) {\n      this._switchTab(index > this.currentTabIndex ? index + 1 : index - 1);\n      return;\n    }\n    this.currentTabIndex =\n      index < this.firstActiveTabIndex\n        ? this.lastActiveTabIndex\n        : index >= tabs.length\n        ? this.firstActiveTabIndex\n        : index;\n\n    focus(tabs[this.currentTabIndex].tab);\n  }\n  _updateTabIndex(activeIndex) {\n    const { keyboard, a11y } = this.opts;\n    if (!keyboard || !a11y) return;\n    activeIndex ??= this.shownTabs[0]?.index ?? this.firstActiveTabIndex;\n    a11y &&\n      this.tabs.forEach(({ tab, tabpanel }, i) =>\n        setAttribute(\n          [a11y[TABINDEX] && tab, a11y[OPTION_TABPANEL_TABINDEX] && tabpanel],\n          TABINDEX,\n          i === activeIndex ? 0 : -1,\n        ),\n      );\n  }\n  focusFilter(tab) {\n    return (\n      !isUnfocusable(tab.tab) &&\n      (isFunction(this.opts.focusFilter) ? this.opts.focusFilter(tab) : true)\n    );\n  }\n  get shownTabs() {\n    return this.tabs.filter(({ isShown }) => isShown);\n  }\n  get firstActiveTabIndex() {\n    return this.tabs.find((tab) => this.focusFilter(tab))?.index;\n  }\n  get lastActiveTabIndex() {\n    return this.tabs.findLast((tab) => this.focusFilter(tab))?.index;\n  }\n\n  async toggle(elem, s, params) {\n    const { animated, silent, event, trigger } =\n      normalizeToggleParameters(params);\n    const tabInstance = this.getTab(elem);\n\n    if (!tabInstance) return;\n\n    const { opts, shownTabs, emit } = this;\n    const { a11y, multiExpand, awaitAnimation } = opts;\n    const { tab, isShown, transition, index } = tabInstance;\n\n    s = !!(s ?? !isShown);\n\n    s && this._updateTabIndex(index);\n\n    if (\n      s === isShown ||\n      (awaitAnimation &&\n        transition.isAnimating &&\n        ((shownTabs.length <= 1 && !multiExpand) || multiExpand)) ||\n      (isShown && opts.alwaysExpanded && !s && shownTabs.length < 2) ||\n      (s && !this.focusFilter(tabInstance))\n    )\n      return;\n\n    if (transition.isAnimating && !awaitAnimation) {\n      await transition?.cancel();\n    }\n\n    const eventParams = { event, trigger };\n\n    !silent &&\n      emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, tabInstance, eventParams);\n\n    tabInstance.isShown = s;\n\n    if (!multiExpand && s) {\n      for (const shownTab of shownTabs) {\n        if (tabInstance !== shownTab && shownTab.isShown) {\n          shownTab.hide(animated);\n          if (opts.awaitPrevious) await shownTab.transition.getAwaitPromise();\n        }\n      }\n    }\n\n    if (s && !tabInstance.isShown) return;\n\n    const promise = transition.run(s, animated, {\n      [s ? EVENT_SHOW : EVENT_HIDE]: () =>\n        !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, tabInstance, eventParams),\n      [EVENT_DESTROY]: () =>\n        tabInstance.destroy({ remove: true, destroyTransition: false }),\n    });\n\n    ELEMS.forEach((elemName) =>\n      toggleClass(\n        tabInstance[elemName],\n        opts[elemName + CLASS_ACTIVE_SUFFIX],\n        s,\n      ),\n    );\n\n    if (a11y) {\n      a11y[OPTION_STATE_ATTRIBUTE] &&\n        setAttribute(tab, a11y[OPTION_STATE_ATTRIBUTE], s);\n    }\n\n    if (s) {\n      this.lastShownTab = tabInstance;\n      this.currentTabIndex ??= index;\n    }\n\n    awaitPromise(promise, () =>\n      emit(s ? EVENT_SHOWN : EVENT_HIDDEN, tabInstance, eventParams),\n    );\n\n    animated && opts.awaitAnimation && (await promise);\n\n    return tabInstance;\n  }\n  show(elem, opts) {\n    return this.toggle(elem, true, opts);\n  }\n  hide(elem, opts) {\n    return this.toggle(elem, false, opts);\n  }\n  static show(elem, opts) {\n    return this.toggle(elem, true, opts);\n  }\n  static hide(elem, opts) {\n    return this.toggle(elem, false, opts);\n  }\n  static toggle(elem, s, params) {\n    for (const tablist of this.instances.values()) {\n      if (tablist.getTab(elem)) {\n        tablist.toggle(elem, s, params);\n        break;\n      }\n    }\n  }\n}\n\nTablist.data(UI_PREFIX + TABS, {\n  alwaysExpanded: true,\n  horizontal: true,\n  arrowActivation: true,\n  awaitPrevious: true,\n  a11y: TABS,\n});\n\nexport default Tablist;\n","import { nextAll } from \"./index.js\";\nexport default (elem, selector) => nextAll(elem, selector)[0];\n","import returnArray from \"./returnArray\";\nexport default (source, ...values) =>\n  returnArray(source).filter((elem) => !values.includes(elem));\n","import {\n  UI_PREFIX,\n  PROGRESS,\n  EVENT_MOUSELEAVE,\n  EVENT_MOUSEENTER,\n  EVENT_FOCUSIN,\n  EVENT_FOCUSOUT,\n  EVENT_PAUSE,\n  EVENT_RESUME,\n  EVENT_RESET,\n  ACTION_PAUSE,\n  ACTION_RESUME,\n  ACTION_RESET,\n  ACTION_TOGGLE,\n  EVENT_VISIBILITY_CHANGE,\n  doc,\n} from \"./constants\";\nimport { callOrReturn, getOption, mergeDeep, getDataSelector } from \"./utils\";\nimport { EventHandler } from \"./EventHandler\";\nimport { isNumber } from \"./is\";\n\nclass Autoaction {\n  static Default = {\n    progressElem: getDataSelector(PROGRESS),\n    duration: 5000,\n    decimal: 4,\n    durationUpdate: null,\n    pauseOnMouse: true,\n    resetOnMouse: true,\n    pauseOnFocus: true,\n    resetOnFocus: true,\n    visibilityControl: false,\n    cssVariable: UI_PREFIX + PROGRESS,\n  };\n  constructor(elem, action, opts) {\n    const Default = this.constructor.Default;\n    opts = isNumber(opts)\n      ? { ...Default, duration: opts }\n      : mergeDeep(Default, opts);\n    const { on, off, emit } = new EventHandler();\n    Object.assign(this, { elem, action, on, off, emit, opts });\n    [\n      \"checkTime\",\n      ACTION_PAUSE,\n      ACTION_RESUME,\n      ACTION_RESET,\n      ACTION_TOGGLE,\n    ].forEach((action) => (this[action] = this[action].bind(this)));\n\n    this.progressElem = getOption(false, opts.progressElem, elem);\n\n    if (opts.visibilityControl) {\n      on(doc, EVENT_VISIBILITY_CHANGE, () => this.toggle(!doc.hidden));\n    }\n  }\n  toggleInterections(s) {\n    const { opts, elem, on, off, resume, pause, reset } = this;\n    const { pauseOnMouse, resetOnMouse, pauseOnFocus, resetOnFocus } = opts;\n\n    if (!pauseOnMouse && !resetOnMouse && !pauseOnFocus && !resetOnFocus)\n      return;\n\n    if (s) {\n      reset();\n      let interactedMouse, interactedFocus;\n      if (pauseOnFocus || resetOnFocus) {\n        on(elem, [EVENT_FOCUSIN, EVENT_FOCUSOUT], ({ type }) => {\n          interactedFocus = type === EVENT_FOCUSIN;\n          if (interactedFocus) {\n            resetOnFocus && reset();\n            pauseOnFocus && pause();\n          } else if (!interactedMouse) {\n            pauseOnFocus && resume();\n          }\n        });\n      }\n      if (pauseOnMouse || resetOnMouse) {\n        on(elem, [EVENT_MOUSEENTER, EVENT_MOUSELEAVE], ({ type }) => {\n          interactedMouse = type === EVENT_MOUSEENTER;\n          if (interactedMouse) {\n            resetOnMouse && reset();\n            pauseOnMouse && pause();\n          } else if (!interactedFocus) {\n            pauseOnMouse && resume();\n          }\n        });\n      }\n    } else {\n      off();\n    }\n    return this;\n  }\n  checkTime() {\n    const { opts, elem, progressElem, paused, _prevProgress } = this;\n    if (paused) return;\n    const current = performance.now();\n    this.timeCurrent = Math.round(current - this.timeBegin);\n    const time = opts.duration - this.timeCurrent;\n    const progress = +Math.max(time / opts.duration, 0).toFixed(opts.decimal);\n    this._prevProgress = progress;\n    if (progress && progress === _prevProgress) {\n      return requestAnimationFrame(this.checkTime);\n    }\n\n    if (opts.cssVariable) {\n      progressElem?.style.setProperty(\"--\" + opts.cssVariable, progress);\n    }\n\n    callOrReturn(opts.durationUpdate, { elem, time, progress });\n\n    if (progress <= 0) {\n      this.action();\n    } else {\n      requestAnimationFrame(this.checkTime);\n    }\n  }\n  toggle(s = this.paused) {\n    return s ? this.resume() : this.pause();\n  }\n  pause() {\n    this.paused = true;\n    this.emit(EVENT_PAUSE);\n    return this;\n  }\n  resume() {\n    this.paused = false;\n    this.timeBegin = performance.now() - this.timeCurrent;\n    this.checkTime();\n    this.emit(EVENT_RESUME);\n    return this;\n  }\n  reset() {\n    this.paused = false;\n    this.timeBegin = performance.now();\n    this.checkTime();\n    this.emit(EVENT_RESET);\n    return this;\n  }\n  destroy() {\n    this.paused = true;\n    this.off();\n  }\n  static createOrUpdate(autoaction, elem, action, opts) {\n    if (autoaction) {\n      return autoaction.destroy();\n    } else if (opts !== false) {\n      return new Autoaction(elem, action, opts);\n    }\n  }\n}\n\nexport default Autoaction;\n","import {\n  EVENT_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_SHOW,\n  EVENT_SHOWN,\n  EVENT_BEFORE_HIDE,\n  EVENT_HIDE,\n  EVENT_HIDDEN,\n  body,\n  DEFAULT_OPTIONS,\n  ACTION_DESTROY,\n  HIDE_MODE,\n  POPOVER_API_SUPPORTED,\n  POPOVER_API_MODE_MANUAL,\n  POPOVER,\n} from \"./helpers/constants\";\nimport { isArray, isObject, isString } from \"./helpers/is\";\nimport { fragment, inDOM } from \"./helpers/dom\";\nimport {\n  normalizeToggleParameters,\n  arrayFrom,\n  getEventsPrefix,\n  callOrReturn,\n  getOptionElem,\n  isShown,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  awaitPromise,\n  baseDestroy,\n  callShowInit,\n} from \"./helpers/modules\";\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Autoaction from \"./helpers/Autoaction.js\";\n\nconst TOAST = \"toast\";\n\nconst positions = {};\nconst wrappers = new Map();\nconst _containers = {};\nclass Toast extends ToggleMixin(Base, TOAST) {\n  static _templates = {};\n\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    eventPrefix: getEventsPrefix(TOAST),\n    root: null,\n    container: \"\",\n    template: \"\",\n    appear: true,\n    dismiss: true,\n    limit: false,\n    limitAnimateEnter: true,\n    limitAnimateLeave: true,\n    autohide: false,\n    topLayer: true,\n    keepTopLayer: true,\n    popoverApi: true,\n  };\n  constructor(elem, opts) {\n    if (isObject(elem)) {\n      opts = elem;\n      elem = null;\n    }\n    super(elem, opts);\n  }\n  _update() {\n    const { opts, base, autohide, hide } = this;\n    if (!opts.root && inDOM(base)) {\n      this.root = base.parentElement;\n    } else {\n      this.root = opts.root ? getOptionElem(this, opts.root) : body;\n    }\n    this.transition = new Transition(\n      base,\n      { hideMode: opts.hideMode, ...opts.transition },\n      {\n        [HIDE_MODE]: ACTION_DESTROY,\n      },\n    );\n    this.autohide = Autoaction.createOrUpdate(\n      autohide,\n      base,\n      hide,\n      opts.autohide,\n    );\n\n    return this;\n  }\n  destroy(opts) {\n    if (!this.isInit) return;\n    baseDestroy(this, { remove: true, ...opts });\n    return this;\n  }\n  init() {\n    if (this.isInit) return;\n\n    this._update();\n\n    addDismiss(this);\n\n    return callShowInit(this);\n  }\n  async toggle(s, params) {\n    const {\n      transition,\n      opts: {\n        limit,\n        limitAnimateLeave,\n        limitAnimateEnter,\n        position,\n        container,\n        popoverApi,\n        topLayer,\n        keepTopLayer,\n        hideMode,\n      },\n      autohide,\n      base,\n      root,\n      instances,\n      constructor,\n      emit,\n      destroy,\n    } = this;\n    const { animated, silent, event, trigger } =\n      normalizeToggleParameters(params);\n\n    if (animated && transition.isAnimating) return;\n\n    s ??= !isShown(base, hideMode);\n\n    let preventAnimation;\n\n    if (s) {\n      if (limit) {\n        const nots = arrayFrom(instances.values()).filter(\n          (instance) =>\n            instance !== this &&\n            instance.opts.position === position &&\n            instance.root === root,\n        );\n        for (let i = 0; i < nots.length; i++) {\n          if (i >= limit - 1) {\n            nots[i - (limit - 1)]?.hide(limitAnimateLeave);\n            if (!limitAnimateEnter) {\n              preventAnimation = true;\n            }\n          }\n        }\n      }\n      if (root) {\n        let to = root;\n        if (position) {\n          const wrapper = (to = constructor.getWrapper({\n            position,\n            root,\n            container,\n            keepTopLayer,\n          }));\n\n          if (POPOVER_API_SUPPORTED && popoverApi && topLayer) {\n            wrapper[POPOVER] = POPOVER_API_MODE_MANUAL;\n          } else {\n            wrapper[POPOVER] = null;\n          }\n\n          if (wrapper && wrapper.parentElement !== root) {\n            root.append(wrapper);\n          }\n          if (POPOVER_API_SUPPORTED && popoverApi && topLayer) {\n            wrapper.hidePopover();\n            wrapper.showPopover();\n          }\n        }\n        to.append(base);\n      }\n    }\n\n    const eventParams = { event, trigger };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    autohide && autohide.toggleInterections(s);\n\n    const promise = transition.run(s, animated && !preventAnimation, {\n      [s ? EVENT_SHOW : EVENT_HIDE]: () =>\n        !silent && emit(s ? EVENT_SHOW : EVENT_HIDE, eventParams),\n      [EVENT_DESTROY]: () =>\n        destroy({ remove: true, destroyTransition: false }),\n    });\n\n    awaitPromise(promise, () =>\n      emit(s ? EVENT_SHOWN : EVENT_HIDDEN, eventParams),\n    );\n\n    animated && (await promise);\n\n    const rootWrappers = wrappers.get(root);\n    const wrapper =\n      rootWrappers &&\n      [...rootWrappers].find(\n        (w) => w.position === position && w.container === container,\n      )?.wrapper;\n\n    if (!s && wrapper && !wrapper.children.length) {\n      if (rootWrappers) {\n        const w = [...rootWrappers].find((w) => w.wrapper === wrapper);\n        w && rootWrappers.delete(w);\n      }\n      wrapper.remove();\n    }\n\n    return this;\n  }\n\n  static getWrapper({ position, root = body, container = \"\", keepTopLayer }) {\n    let rootWrappers = wrappers.get(root);\n    if (!rootWrappers) {\n      rootWrappers = new Set();\n      wrappers.set(root, rootWrappers);\n    } else {\n      const wrapper = [...rootWrappers].find(\n        (w) => w.position === position && w.container === container,\n      );\n      if (wrapper) return wrapper.wrapper;\n    }\n\n    const containerParams = { name: container, position };\n    const wrapper = fragment(\n      isString(container)\n        ? callOrReturn(\n            _containers[container] ?? _containers[\"\"],\n            containerParams,\n          )\n        : container(containerParams),\n    );\n\n    rootWrappers.add({ wrapper, container, position, root, keepTopLayer });\n    return wrapper;\n  }\n  static addPosition(position, container = \"\") {\n    positions[container] ||= {};\n    if (isArray(position)) {\n      position.forEach((p) => this.addPosition(p, container));\n    } else if (isObject(position)) {\n      positions[container][position.name] = position;\n    }\n  }\n  static template(name, opts) {\n    if (!opts) {\n      opts = name;\n      name = \"\";\n    }\n    if (!opts) return this._templates[name];\n    this._templates[name] = opts;\n    return this;\n  }\n  static container(name, opts) {\n    if (!opts) {\n      opts = name;\n      name = \"\";\n    }\n    if (!opts) return _containers[name];\n    _containers[name] = opts;\n    return this;\n  }\n  static forceTopLayer() {\n    [...wrappers.values()].forEach((set) => {\n      set.forEach(({ wrapper, root, keepTopLayer }) => {\n        if (\n          keepTopLayer &&\n          POPOVER_API_SUPPORTED &&\n          wrapper.popover &&\n          root.contains(wrapper)\n        ) {\n          wrapper.hidePopover();\n          wrapper.showPopover();\n        }\n      });\n    });\n  }\n}\n\nexport default Toast;\n","import {\n  EVENT_BEFORE_INIT,\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_BEFORE_HIDE,\n  CLASS,\n  HOVER,\n  FOCUS,\n  TOP,\n  ANCHOR,\n  TARGET,\n  UI_PREFIX,\n  ARIA_DESCRIBEDBY,\n  DATA_UI_PREFIX,\n  DEFAULT_FLOATING_OPTIONS,\n  DEFAULT_OPTIONS,\n  OPTION_ARIA_DESCRIBEDBY,\n  TITLE,\n  CONTENT,\n  TOOLTIP,\n  CLASS_ACTIVE_SUFFIX,\n  DEFAULT_TOP_LAYER_OPTIONS,\n  OPTION_TOP_LAYER,\n} from \"./helpers/constants\";\n\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport {\n  getElement,\n  setAttribute,\n  toggleClass,\n  inDOM,\n  removeAttribute,\n} from \"./helpers/dom\";\nimport Transition from \"./helpers/Transition.js\";\n\nimport {\n  normalizeToggleParameters,\n  getEventsPrefix,\n  getClassActive,\n  updateModule,\n} from \"./helpers/utils\";\nimport {\n  baseDestroy,\n  floatingTransition,\n  callShowInit,\n  toggleOnInterection,\n  addDismiss,\n} from \"./helpers/modules\";\nimport Teleport from \"./helpers/Teleport.js\";\n\nconst UI_TOOLTIP = UI_PREFIX + TOOLTIP;\n\nclass Tooltip extends ToggleMixin(Base, TOOLTIP) {\n  static DefaultTopLayer = {\n    ...DEFAULT_TOP_LAYER_OPTIONS,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    ...DEFAULT_FLOATING_OPTIONS,\n    delay: [200, 0],\n    eventPrefix: getEventsPrefix(TOOLTIP),\n    placement: TOP,\n    template: (content) =>\n      `<div class=\"${UI_TOOLTIP}\"><div class=\"${UI_TOOLTIP}-arrow\" data-${UI_TOOLTIP}-arrow></div><div class=\"${UI_TOOLTIP}-content\">${content}</div></div>`,\n    interactive: false,\n    removeTitle: true,\n    tooltipClass: \"\",\n    [ANCHOR + CLASS_ACTIVE_SUFFIX]: getClassActive(TOOLTIP),\n    trigger: HOVER + \" \" + FOCUS,\n    content: null,\n  };\n\n  static get BASE_NODE_NAME() {\n    return ANCHOR;\n  }\n  constructor(elem, opts) {\n    super(elem, opts);\n  }\n  _update() {\n    updateModule(this, OPTION_TOP_LAYER);\n    const { tooltip, opts, transition } = this;\n\n    this.transition = Transition.createOrUpdate(\n      transition,\n      tooltip,\n      opts.transition,\n      { keepPlace: false },\n    );\n\n    opts.a11y && setAttribute(tooltip, TOOLTIP);\n  }\n  destroy(destroyOpts) {\n    const { isInit, anchor, tooltip, id, _cache, emit, opts } = this;\n    if (!isInit) return;\n    emit(EVENT_BEFORE_DESTROY);\n    if (opts.a11y) {\n      removeAttribute(tooltip, TOOLTIP);\n      setAttribute(anchor, ARIA_DESCRIBEDBY, (val) =>\n        val === id + \"-\" + TARGET ? _cache[OPTION_ARIA_DESCRIBEDBY] : val,\n      );\n    }\n\n    if (_cache[TITLE]) {\n      anchor[TITLE] = _cache[TITLE];\n    }\n    return baseDestroy(this, destroyOpts);\n  }\n  init() {\n    const { opts, anchor, id, isInit, emit } = this;\n\n    if (isInit) return;\n\n    emit(EVENT_BEFORE_INIT);\n\n    this._cache = { [TITLE]: anchor[TITLE] };\n\n    const target = (this.tooltip = getElement(\n      opts.template(\n        opts[CONTENT] ??\n          anchor.getAttribute(DATA_UI_PREFIX + TOOLTIP + \"-\" + CONTENT) ??\n          anchor[TITLE],\n        this,\n      ),\n    ));\n    target.id ||= id + \"-\" + TARGET;\n\n    anchor.removeAttribute(TITLE);\n    toggleClass(\n      target,\n      anchor.getAttribute(DATA_UI_PREFIX + TOOLTIP + \"-\" + CLASS) ??\n        opts.tooltipClass,\n      true,\n    );\n\n    this._update();\n\n    toggleOnInterection({\n      toggler: anchor,\n      target,\n      instance: this,\n    });\n\n    addDismiss(this, target);\n\n    this.teleport = new Teleport(\n      target,\n      {},\n      {\n        disableAttributes: true,\n      },\n    );\n\n    return callShowInit(this, target);\n  }\n\n  async toggle(s, params) {\n    const {\n      transition,\n      anchor,\n      tooltip,\n      id,\n      opts,\n      emit,\n      _cache,\n      isShown,\n      isAnimating,\n    } = this;\n    const awaitAnimation = opts.awaitAnimation;\n    const { animated, trigger, silent, event, ignoreConditions } =\n      normalizeToggleParameters(params);\n\n    s ??= !isShown;\n\n    if (\n      (!ignoreConditions &&\n        ((awaitAnimation && isAnimating) || s === isShown)) ||\n      (!s && !inDOM(tooltip))\n    )\n      return;\n\n    this.isShown = s;\n\n    if (isAnimating && !awaitAnimation) {\n      await transition?.cancel();\n    }\n\n    const eventParams = { event, trigger };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    const promise = floatingTransition(this, {\n      s,\n      animated,\n      silent,\n      eventParams,\n    });\n\n    if (opts.a11y) {\n      setAttribute(\n        anchor,\n        ARIA_DESCRIBEDBY,\n        s\n          ? (value) => {\n              value && (_cache[OPTION_ARIA_DESCRIBEDBY] = value);\n              return id + \"-\" + TARGET;\n            }\n          : _cache[OPTION_ARIA_DESCRIBEDBY] ?? null,\n      );\n    }\n\n    toggleClass(anchor, opts[ANCHOR + CLASS_ACTIVE_SUFFIX], s);\n\n    animated && awaitAnimation && (await promise);\n\n    return this;\n  }\n}\n\nexport default Tooltip;\n","import {\n  EVENT_BEFORE_DESTROY,\n  EVENT_BEFORE_SHOW,\n  EVENT_BEFORE_HIDE,\n  CLASS_ACTIVE,\n  ARIA_CONTROLS,\n  ARIA_EXPANDED,\n  POPOVER,\n  CLICK,\n  DEFAULT_FLOATING_OPTIONS,\n  DEFAULT_OPTIONS,\n  CLASS_ACTIVE_SUFFIX,\n  TOGGLER,\n  DEFAULT_TOP_LAYER_OPTIONS,\n  OPTION_TOP_LAYER,\n  DATA_UI_PREFIX,\n  CANCEL,\n  CONFIRM,\n  EVENT_CLICK,\n  UI_EVENT_PREFIX,\n  TRIGGER,\n  DELAY,\n  HIDE_MODE,\n} from \"./helpers/constants\";\n\nimport {\n  toggleClass,\n  removeClass,\n  setAttribute,\n  removeAttribute,\n  closest,\n} from \"./helpers/dom\";\nimport {\n  normalizeToggleParameters,\n  getDefaultToggleSelector,\n  getOptionElem,\n  updateModule,\n  getEventsPrefix,\n  updateOptsByData,\n  upperFirst,\n} from \"./helpers/utils\";\nimport {\n  addDismiss,\n  baseDestroy,\n  toggleOnInterection,\n  floatingTransition,\n  callShowInit,\n} from \"./helpers/modules\";\nimport Base from \"./helpers/Base.js\";\nimport ToggleMixin from \"./helpers/ToggleMixin.js\";\nimport Transition from \"./helpers/Transition.js\";\nimport Teleport from \"./helpers/Teleport.js\";\n\nconst POPOVER_DATA_ATTRIBUTES = [\n  [TRIGGER, POPOVER + upperFirst(TRIGGER)],\n  [DELAY, POPOVER + upperFirst(DELAY)],\n  HIDE_MODE,\n];\nclass Popover extends ToggleMixin(Base, POPOVER) {\n  static DefaultTopLayer = {\n    ...DEFAULT_TOP_LAYER_OPTIONS,\n  };\n  static Default = {\n    ...DEFAULT_OPTIONS,\n    ...DEFAULT_FLOATING_OPTIONS,\n    eventPrefix: getEventsPrefix(POPOVER),\n    dismiss: true,\n    autofocus: true,\n    trigger: CLICK,\n    [TOGGLER]: null,\n    [TOGGLER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    [POPOVER + CLASS_ACTIVE_SUFFIX]: CLASS_ACTIVE,\n    cancel: `[${DATA_UI_PREFIX + CANCEL}],[${\n      DATA_UI_PREFIX + CANCEL\n    }=\"${POPOVER}\"]`,\n    confirm: `[${DATA_UI_PREFIX + CONFIRM}],[${\n      DATA_UI_PREFIX + CONFIRM\n    }=\"${POPOVER}\"]`,\n  };\n\n  constructor(elem, opts) {\n    super(elem, opts);\n  }\n  init() {\n    if (this.isInit) return;\n    this._update();\n\n    const { toggler, base } = this;\n\n    toggleOnInterection({\n      toggler,\n      target: base,\n      instance: this,\n    });\n\n    addDismiss(this, base);\n\n    this.teleport = new Teleport(\n      base,\n      {},\n      {\n        disableAttributes: true,\n      },\n    );\n\n    return callShowInit(this);\n  }\n  _update() {\n    this.opts = updateOptsByData(this.opts, this.base, POPOVER_DATA_ATTRIBUTES);\n\n    updateModule(this, OPTION_TOP_LAYER);\n\n    const { base, opts, transition } = this;\n\n    this.transition = Transition.createOrUpdate(\n      transition,\n      base,\n      opts.transition,\n      { keepPlace: false },\n    );\n\n    this.updateToggler();\n  }\n  updateToggler() {\n    const { opts, id } = this;\n    const toggler = (this.toggler = getOptionElem(\n      this,\n      opts.toggler ?? getDefaultToggleSelector(id),\n    ));\n    if (!toggler) return;\n    opts.a11y && setAttribute(toggler, ARIA_CONTROLS, id);\n    return this;\n  }\n  destroy(destroyOpts) {\n    if (!this.isInit) return;\n    const { opts, toggler } = this;\n    this.emit(EVENT_BEFORE_DESTROY);\n    opts.a11y && removeAttribute(toggler, ARIA_CONTROLS, ARIA_EXPANDED);\n    removeClass(toggler, opts[TOGGLER + CLASS_ACTIVE_SUFFIX]);\n    return baseDestroy(this, destroyOpts);\n  }\n\n  async toggle(s, params) {\n    const { transition, isShown, isAnimating, toggler, base, opts, emit } =\n      this;\n    const { awaitAnimation, a11y } = opts;\n    const { animated, silent, event, ignoreConditions } =\n      normalizeToggleParameters(params);\n\n    s ??= !isShown;\n\n    if (!ignoreConditions && ((awaitAnimation && isAnimating) || s === isShown))\n      return;\n\n    this.isShown = s;\n\n    if (isAnimating && !awaitAnimation) {\n      await transition?.cancel();\n    }\n\n    const eventParams = { event };\n\n    !silent && emit(s ? EVENT_BEFORE_SHOW : EVENT_BEFORE_HIDE, eventParams);\n\n    a11y && toggler.setAttribute(ARIA_EXPANDED, !!s);\n\n    if (s) {\n      this.on(this.base, EVENT_CLICK + UI_EVENT_PREFIX, (event) => {\n        [CANCEL, CONFIRM].forEach((name) => {\n          if (opts[name]) {\n            const trigger = closest(event.target, opts[name]);\n            trigger && emit(name, { event, trigger });\n          }\n        });\n      });\n    } else {\n      this.off(this.base, EVENT_CLICK + UI_EVENT_PREFIX);\n    }\n\n    const promise = floatingTransition(this, {\n      s,\n      animated,\n      silent,\n      eventParams,\n    });\n\n    toggleClass(toggler, opts[TOGGLER + CLASS_ACTIVE_SUFFIX], s);\n    toggleClass(base, opts[POPOVER + CLASS_ACTIVE_SUFFIX], s);\n\n    animated && awaitAnimation && (await promise);\n\n    return this;\n  }\n}\n\nexport default Popover;\n"],"names":["cache","kebabToCamel","str","replace","match","toUpperCase","upperFirst","slice","UI","UI_PREFIX","UI_EVENT_PREFIX","VAR_UI_PREFIX","DATA_UI_PREFIX","ACTIVE","CLASS_ACTIVE","NAME","MODE","PX","NONE","ID","WIDTH","HEIGHT","TOP","LEFT","RIGHT","BOTTOM","CENTER","START","END","DOWN","TITLE","HORIZONTAL","ABSOLUTE","FIXED","TRANSITION","BUTTON","CLASS","STYLE","ROLE","ROOT","CONFIRM","CANCEL","BEFORE","AFTER","MOUSE","CLICK","HOVER","FOCUS","SCROLL","HIDE","HIDDEN","SHOW","SHOWN","APPEAR","TARGET","AVAILABLE","AVAILABLE_WIDTH","AVAILABLE_HEIGHT","ANCHOR","MODAL","CONTENT","BACKDROP","POPOVER","TOOLTIP","TOGGLER","TRIGGER","DELAY","DROPDOWN","ARROW","PROGRESS","DISMISS","FLOATING","DIALOG","FLIP","SHRINK","STICKY","PLACEMENT","PADDING","OFFSET","BOUNDARY_OFFSET","CLIP_PATH","ARROW_OFFSET","ARROW_PADDING","TRUE","FALSE","TOP_LAYER","doc","document","body","ENTER","LEAVE","BEFORE_ENTER","ENTER_ACTIVE","ENTER_FROM","ENTER_TO","AFTER_ENTER","BEFORE_LEAVE","LEAVE_ACTIVE","LEAVE_FROM","LEAVE_TO","AFTER_LEAVE","HIDE_MODE","DURATION","ACTION_INIT","ACTION_DESTROY","ACTION_TOGGLE","ACTION_SHOW","ACTION_HIDE","ACTION_REMOVE","ACTION_UPDATE","ACTION_PAUSE","ACTION_RESUME","ACTION_RESET","ACTION_ON","ACTION_OFF","ACTION_EMIT","ACTION_ONCE","INERT","AUTOFOCUS","TABINDEX","DISABLED","AUTO","FLOATING_DATA_ATTRIBUTE","DATA_APPEAR","POPOVER_API_MODE_MANUAL","PLACEHOLDER","EVENT_INIT","EVENT_BEFORE_INIT","EVENT_DESTROY","EVENT_BEFORE_DESTROY","EVENT_BEFORE_SHOW","EVENT_SHOW","EVENT_SHOWN","EVENT_BEFORE_HIDE","EVENT_HIDE","EVENT_HIDDEN","EVENT_PAUSE","EVENT_RESUME","EVENT_RESET","EVENT_MOUSEENTER","EVENT_MOUSELEAVE","EVENT_MOUSEDOWN","EVENT_CHANGE","EVENT_CLICK","EVENT_KEYDOWN","EVENT_FOCUS","EVENT_FOCUSIN","EVENT_FOCUSOUT","EVENT_ACTION_OUTSIDE","EVENT_SCROLL","ARIA","ARIA_CONTROLS","ARIA_EXPANDED","ARIA_SELECTED","ARIA_HIDDEN","ARIA_LABELLEDBY","ARIA_DESCRIBEDBY","ARIA_ORIENTATION","ARIA_LIVE","ARIA_ATOMIC","KEY_ENTER","KEY_SPACE","KEY_END","KEY_HOME","KEY_ARROW_LEFT","KEY_ARROW_UP","KEY_ARROW_RIGHT","KEY_ARROW_DOWN","OPTION_KEEP_PLACE","OPTION_PREVENT_SCROLL","OPTION_POSITION","OPTION_ARIA_DESCRIBEDBY","OPTION_ARIA_HIDDEN","OPTION_TOP_LAYER","CLASS_ACTIVE_SUFFIX","ROLE_SUFFIX","HIDDEN_CLASS","DEFAULT_OPTIONS","data","on","eventDispatch","eventBubble","shown","a11y","hideMode","DEFAULT_TOP_LAYER_OPTIONS","moveModal","movePopover","DEFAULT_FLOATING_OPTIONS","awaitAnimation","placement","offset","padding","delay","boundaryOffset","shrink","flip","sticky","escapeHide","outsideHide","mode","focusTrap","topLayer","popoverApi","safeModal","floatingClass","arrow","height","width","SELECTOR_DISABLED","SELECTOR_INERT","SELECTOR_ROOT","MIRROR","x","y","CLIP_PATH_PROPERTY","CSS","supports","POPOVER_API_SUPPORTED","HTMLElement","prototype","hasOwnProperty","FOCUSABLE_ELEMENTS_SELECTOR","isArray","Array","isElement","value","getElementsByClassName","isFunction","isHTML","RegExp","test","bind","isIterable","Symbol","iterator","isString","isNumber","isObject","constructor","Object","isDialog","elem","tagName","arrayFrom","from","arrayUnique","array","length","Set","callOrReturn","camelToKebab","toLowerCase","checkHash","id","window","location","hash","substring","createElement","type","props","content","class","entries","forEach","name","classes","toggleClass","addClass","style","addStyle","setAttribute","item","append","createInset","input","returnArray","top","right","bottom","left","getDataSelector","values","join","getOption","multiply","instance","option","root","params","filter","Boolean","getOptionElem","getOptionElems","min","max","Math","isOverflowElement","overflow","overflowX","overflowY","display","getComputedStyle","UNFOCUSABLE_SELECTORS","isUnfocusable","matches","mergeDeep","objects","result","object","key","undefined","normalizeToggleParameters","animated","resizeObserver","ResizeObserver","borderBoxSize","target","blockSize","inlineSize","__resizeCallback__","strToArray","separator","split","toMs","time","num","parseFloat","unit","uuidGenerator","prefix","random","toString","OPTIONS_BOOLEAN","updateOptsByData","opts","dataset","names","optionName","attributeName","includes","JSON","parse","getEventsPrefix","getClassActive","getDefaultToggleSelector","DEFAULT_PREFIX","updateModule","property","defaults","defaultValue","registerProperty","valuesToArray","trim","map","isShown","inDOM","classList","contains","hasAttribute","toggleHideModeState","s","base","replaceWith","_parent","createComment","parent","parentElement","remove","toggleAttribute","setProperty","closest","selectors","getElements","find","t","dir","selector","until","utilIsFn","el","elems","is","push","flat","each","fn","isFn","i","list","focus","preventScroll","fragment","html","findSelectors","children","DOMParser","parseFromString","querySelectorAll","getElement","context","findSelf","unshift","nextAll","parents","removeAttribute","removeClass","getAttribute","cls","getBoundingClientRect","toJSON","getPropertyValue","EventHandler","this","eventsSet","_id","getNamespaces","eventFullName","event","namespace","events","deligate","_handler","_opts","capture","e","detail","handler","once","offId","isSelector","deligateTarget","addEventListener","add","args","newOpts","optsPosition","getOptsObj","arguments","removeSets","sets","set","removeEventListener","delete","off","emit","dispatchEvent","CustomEvent","Breakpoints","static","breakpoints","_onResize","sort","a","b","mql","media","mq","matchMedia","instances","checkBreakpoints","ignoreConditions","breakpoint","currentData","newBreakpoint","onUpdate","destroy","getDataValue","_data","dataName","documentElement","Base","Map","BASE_NODE_NAME","Default","_templates","allInstances","components","baseElemName","datasetValue","isDataObject","template","_fromTemplate","_fromHTML","querySelector","baseOpts","uuid","eventHandler","action","_initBreakpoints","init","isInit","_update","eventName","eventPrefix","any","bubbles","update","get","getOrCreate","Toast","toast","forceTopLayer","ToggleMixin","isAnimating","transition","initialPlaceNode","teleport","placeholder","hide","toggle","show","DATASET_DURATION","DATASET_DURATION_ENTER","DATASET_DURATION_LEAVE","OPTION_SHOWN_CLASS","OPTION_HIDDEN_CLASS","Transition","css","cssVariables","defaultOpts","updateConfig","promises","setFinishClass","defaultConfig","datasetData","duration","durationEnter","durationLeave","enter","leave","toggleVariables","offsetWidth","offsetHeight","rect","prop","removeProperty","toggleAnimationClasses","setClasses","setFinishClasses","removeClasses","animations","styles","hasStyle","hasClass","state","collectPromises","promisesEvent","promisesAnimation","Promise","resolve","getAnimations","allSettled","finished","promisesDuration","isNaN","setTimeout","cancel","animation","getAwaitPromise","async","hidden","allowRemove","TELEPORT","TELEPORT_DATA_ATTRIBUTE","TELEPORT_DATA_ATTRIBUTES","Teleport","to","enableAttributes","move","toParameters","position","keepPlace","before","insertAdjacentElement","reset","addDismiss","_dismiss","preventDefault","stopPropagation","trigger","addEscapeHide","keyCode","stop","callAutofocus","autofocus","focusElem","activeElement","baseDestroy","keepInstance","destroyTransition","destroyTeleport","autohide","floating","transitions","toggleOnInterection","toggler","triggerClick","triggerHover","triggerFocus","isMouseDown","clearTimeout","_hoverTimer","requestAnimationFrame","isFocus","entered","d","PREFIX","syntax","inherits","head","appendChild","ResetFloatingCssVariables","Floating","anchor","onTopLayer","defaultTopLayerOpts","assign","anchorScrollParents","anchorStyles","targetStyles","v","modeIsModal","startsWith","usePopoverApi","inTopLayer","moveToRoot","useFocusGuards","wrapper","createWrapper","shiftKey","_toggleApi","wrapperStyle","arrowPadding","arrowOffset","wrapperComputedStyle","polygonValues","valueEnd","splice","computedValues","next","collectCssVariables","anchorRect","targetRect","arrowData","size","minHeight","minWidth","prevTop","pendingUpdate","updatePosition","offsetLeft","offsetTop","viewRect","visualViewport","baseM","baseS","hor","dirS","minRect","useFlipM","useFlipS","calculate","m","isStart","isEnd","isCenter","isMainDir","sumPadding","mirrorSize","mirrorDirS","anchorSpace","awailableSizesOffset","awailableSizes","currentSize","mo","so","staticSo","shift","transformOrigin","arrowPosition","getPosition","scrollY","scrollX","abs","translate","observe","box","observeResize","passive","wrapperIsDialog","isModal","isPopover","popover","open","close","showModal","showPopover","focusGuards","FocusGuards","focusAfterAnchor","strategy","onFocusOut","zIndex","margin","background","maxWidth","maxHeight","pointerEvents","justifyContent","alignItems","inset","willChange","attributes","interactive","after","unobserve","hidePopover","floatingTransition","silent","eventParams","transitionParams","DefaultTopLayer","dispatchTopLayer","promise","run","callShowInit","stateElem","hashNavigation","appear","ignoreAutofocus","awaitPromise","callback","FOCUS_GUARD","onFocus","returnElem","focusFirst","isGuardBefore","globalReturnElems","findIndex","relatedTarget","returnElems","methodName","focusGuard","COLLAPSE","Collapse","dismiss","super","createOrUpdate","updateTriggers","destroyOpts","togglers","otherTogglers","flatMap","replaceWord","word","w","concat","Dropdown","itemClickHide","items","_onKeydown","arrowActivated","focusableElems","disableAttributes","updateToggler","dropdown","isControl","textContent","lastIndex","currentIndex","nextIndex","prevIndex","prevCode","horizontal","nextCode","click","CLASS_PREVENT_SCROLL","PROPERTY_ROOT_SCROLLBAR_WIDTH","ARIA_SUFFIX","DIALOG_DATA_OPTIONS","Dialog","awaitPrevious","hidePrevious","backdropHide","returnFocus","preventHide","confirm","title","description","group","modal","backdrop","isDialogElem","moveToBody","_togglers","updateAriaTargets","rightClick","_mousedownTarget","suffix","hasPreventScrollDialogs","shownDialogs","isOpen","optReturnFocusAwait","await","backdropIsOpen","shownGroupDialogs","returnFocusElem","baseIsDialog","groupDialogs","innerWidth","clientWidth","TABLIST","TAB","TABS","TABPANEL","ITEM","ACCORDION","ELEMS","OPTION_TAB_ROLE","OPTION_TABPANEL_ROLE","OPTION_TABPANEL_TABINDEX","OPTION_ARIA_ORIENTRATION","OPTION_STATE_ATTRIBUTE","TABLIST_SECONDARY_METHODS","A11Y_DEFAULTS","Tablist","siblings","alwaysExpanded","multiExpand","keyboard","arrowActivation","rtl","focusFilter","tablist","tabs","lastShownTab","index","tabWithState","tabObj","tab","tabpanel","isShownTabpanel","some","val","hasSelected","initTabs","_updateTabIndex","deleteInstance","cleanStyles","getTab","initTab","shownTabs","tabpanelId","getElementById","_onTabFocus","_onTabKeydown","currentTarget","tabInstance","clean","source","without","toggleDisabled","disabled","isDisabled","firstActiveTabIndex","isTab","currentTabIndex","indexOf","nodeName","firstIndex","lastActiveTabIndex","_switchTab","activeIndex","findLast","shownTab","elemName","Autoaction","progressElem","decimal","durationUpdate","pauseOnMouse","resetOnMouse","pauseOnFocus","resetOnFocus","visibilityControl","cssVariable","toggleInterections","resume","pause","interactedMouse","interactedFocus","checkTime","paused","_prevProgress","current","performance","now","timeCurrent","round","timeBegin","progress","toFixed","autoaction","TOAST","positions","wrappers","_containers","container","limit","limitAnimateEnter","limitAnimateLeave","keepTopLayer","preventAnimation","nots","getWrapper","rootWrappers","containerParams","p","addPosition","UI_TOOLTIP","Tooltip","removeTitle","tooltipClass","tooltip","_cache","POPOVER_DATA_ATTRIBUTES","Popover"],"mappings":"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"}